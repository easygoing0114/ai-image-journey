(this.webpackChunkmermaid=this.webpackChunkmermaid||[]).push([[676],{3143:function(e){!function webpackUniversalModuleDefinition(t,n){e.exports=n()}(0,function(){return function(e){var t={};function __nested_webpack_require_543__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__nested_webpack_require_543__),i.l=!0,i.exports}return __nested_webpack_require_543__.m=e,__nested_webpack_require_543__.c=t,__nested_webpack_require_543__.i=function(e){return e},__nested_webpack_require_543__.d=function(e,t,n){__nested_webpack_require_543__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__nested_webpack_require_543__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __nested_webpack_require_543__.d(t,"a",t),t},__nested_webpack_require_543__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_543__.p="",__nested_webpack_require_543__(__nested_webpack_require_543__.s=26)}([function(e,t,n){"use strict";function LayoutConstants(){}LayoutConstants.QUALITY=1,LayoutConstants.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,LayoutConstants.DEFAULT_INCREMENTAL=!1,LayoutConstants.DEFAULT_ANIMATION_ON_LAYOUT=!0,LayoutConstants.DEFAULT_ANIMATION_DURING_LAYOUT=!1,LayoutConstants.DEFAULT_ANIMATION_PERIOD=50,LayoutConstants.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,LayoutConstants.DEFAULT_GRAPH_MARGIN=15,LayoutConstants.NODE_DIMENSIONS_INCLUDE_LABELS=!1,LayoutConstants.SIMPLE_NODE_SIZE=40,LayoutConstants.SIMPLE_NODE_HALF_SIZE=LayoutConstants.SIMPLE_NODE_SIZE/2,LayoutConstants.EMPTY_COMPOUND_NODE_SIZE=40,LayoutConstants.MIN_EDGE_LENGTH=1,LayoutConstants.WORLD_BOUNDARY=1e6,LayoutConstants.INITIAL_WORLD_BOUNDARY=LayoutConstants.WORLD_BOUNDARY/1e3,LayoutConstants.WORLD_CENTER_X=1200,LayoutConstants.WORLD_CENTER_Y=900,e.exports=LayoutConstants},function(e,t,n){"use strict";var i=n(2),a=n(8),s=n(9);function LEdge(e,t,n){i.call(this,n),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=n,this.bendpoints=[],this.source=e,this.target=t}for(var l in LEdge.prototype=Object.create(i.prototype),i)LEdge[l]=i[l];LEdge.prototype.getSource=function(){return this.source},LEdge.prototype.getTarget=function(){return this.target},LEdge.prototype.isInterGraph=function(){return this.isInterGraph},LEdge.prototype.getLength=function(){return this.length},LEdge.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},LEdge.prototype.getBendpoints=function(){return this.bendpoints},LEdge.prototype.getLca=function(){return this.lca},LEdge.prototype.getSourceInLca=function(){return this.sourceInLca},LEdge.prototype.getTargetInLca=function(){return this.targetInLca},LEdge.prototype.getOtherEnd=function(e){if(this.source===e)return this.target;if(this.target===e)return this.source;throw"Node is not incident with this edge"},LEdge.prototype.getOtherEndInGraph=function(e,t){for(var n=this.getOtherEnd(e),i=t.getGraphManager().getRoot();;){if(n.getOwner()==t)return n;if(n.getOwner()==i)break;n=n.getOwner().getParent()}return null},LEdge.prototype.updateLength=function(){var e=new Array(4);this.isOverlapingSourceAndTarget=a.getIntersection(this.target.getRect(),this.source.getRect(),e),this.isOverlapingSourceAndTarget||(this.lengthX=e[0]-e[2],this.lengthY=e[1]-e[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},LEdge.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},e.exports=LEdge},function(e,t,n){"use strict";e.exports=function LGraphObject(e){this.vGraphObject=e}},function(e,t,n){"use strict";var i=n(2),a=n(10),s=n(13),l=n(0),u=n(16),c=n(4);function LNode(e,t,n,l){null==n&&null==l&&(l=t),i.call(this,l),null!=e.graphManager&&(e=e.graphManager),this.estimatedSize=a.MIN_VALUE,this.inclusionTreeDepth=a.MAX_VALUE,this.vGraphObject=l,this.edges=[],this.graphManager=e,this.rect=null!=n&&null!=t?new s(t.x,t.y,n.width,n.height):new s}for(var h in LNode.prototype=Object.create(i.prototype),i)LNode[h]=i[h];LNode.prototype.getEdges=function(){return this.edges},LNode.prototype.getChild=function(){return this.child},LNode.prototype.getOwner=function(){return this.owner},LNode.prototype.getWidth=function(){return this.rect.width},LNode.prototype.setWidth=function(e){this.rect.width=e},LNode.prototype.getHeight=function(){return this.rect.height},LNode.prototype.setHeight=function(e){this.rect.height=e},LNode.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},LNode.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},LNode.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},LNode.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},LNode.prototype.getRect=function(){return this.rect},LNode.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},LNode.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},LNode.prototype.setRect=function(e,t){this.rect.x=e.x,this.rect.y=e.y,this.rect.width=t.width,this.rect.height=t.height},LNode.prototype.setCenter=function(e,t){this.rect.x=e-this.rect.width/2,this.rect.y=t-this.rect.height/2},LNode.prototype.setLocation=function(e,t){this.rect.x=e,this.rect.y=t},LNode.prototype.moveBy=function(e,t){this.rect.x+=e,this.rect.y+=t},LNode.prototype.getEdgeListToNode=function(e){var t=[],n=this;return n.edges.forEach(function(i){if(i.target==e){if(i.source!=n)throw"Incorrect edge source!";t.push(i)}}),t},LNode.prototype.getEdgesBetween=function(e){var t=[],n=this;return n.edges.forEach(function(i){if(i.source!=n&&i.target!=n)throw"Incorrect edge source and/or target";i.target!=e&&i.source!=e||t.push(i)}),t},LNode.prototype.getNeighborsList=function(){var e=new Set,t=this;return t.edges.forEach(function(n){if(n.source==t)e.add(n.target);else{if(n.target!=t)throw"Incorrect incidency!";e.add(n.source)}}),e},LNode.prototype.withChildren=function(){var e=new Set;if(e.add(this),null!=this.child)for(var t=this.child.getNodes(),n=0;n<t.length;n++)t[n].withChildren().forEach(function(t){e.add(t)});return e},LNode.prototype.getNoOfChildren=function(){var e=0;if(null==this.child)e=1;else for(var t=this.child.getNodes(),n=0;n<t.length;n++)e+=t[n].getNoOfChildren();return 0==e&&(e=1),e},LNode.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},LNode.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},LNode.prototype.scatter=function(){var e,t,n=-l.INITIAL_WORLD_BOUNDARY,i=l.INITIAL_WORLD_BOUNDARY;e=l.WORLD_CENTER_X+u.nextDouble()*(i-n)+n;var a=-l.INITIAL_WORLD_BOUNDARY,s=l.INITIAL_WORLD_BOUNDARY;t=l.WORLD_CENTER_Y+u.nextDouble()*(s-a)+a,this.rect.x=e,this.rect.y=t},LNode.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var e=this.getChild();if(e.updateBounds(!0),this.rect.x=e.getLeft(),this.rect.y=e.getTop(),this.setWidth(e.getRight()-e.getLeft()),this.setHeight(e.getBottom()-e.getTop()),l.NODE_DIMENSIONS_INCLUDE_LABELS){var t=e.getRight()-e.getLeft(),n=e.getBottom()-e.getTop();this.labelWidth>t&&(this.rect.x-=(this.labelWidth-t)/2,this.setWidth(this.labelWidth)),this.labelHeight>n&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-n)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-n),this.setHeight(this.labelHeight))}}},LNode.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==a.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},LNode.prototype.transform=function(e){var t=this.rect.x;t>l.WORLD_BOUNDARY?t=l.WORLD_BOUNDARY:t<-l.WORLD_BOUNDARY&&(t=-l.WORLD_BOUNDARY);var n=this.rect.y;n>l.WORLD_BOUNDARY?n=l.WORLD_BOUNDARY:n<-l.WORLD_BOUNDARY&&(n=-l.WORLD_BOUNDARY);var i=new c(t,n),a=e.inverseTransformPoint(i);this.setLocation(a.x,a.y)},LNode.prototype.getLeft=function(){return this.rect.x},LNode.prototype.getRight=function(){return this.rect.x+this.rect.width},LNode.prototype.getTop=function(){return this.rect.y},LNode.prototype.getBottom=function(){return this.rect.y+this.rect.height},LNode.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},e.exports=LNode},function(e,t,n){"use strict";function PointD(e,t){null==e&&null==t?(this.x=0,this.y=0):(this.x=e,this.y=t)}PointD.prototype.getX=function(){return this.x},PointD.prototype.getY=function(){return this.y},PointD.prototype.setX=function(e){this.x=e},PointD.prototype.setY=function(e){this.y=e},PointD.prototype.getDifference=function(e){return new DimensionD(this.x-e.x,this.y-e.y)},PointD.prototype.getCopy=function(){return new PointD(this.x,this.y)},PointD.prototype.translate=function(e){return this.x+=e.width,this.y+=e.height,this},e.exports=PointD},function(e,t,n){"use strict";var i=n(2),a=n(10),s=n(0),l=n(6),u=n(3),c=n(1),h=n(13),d=n(12),p=n(11);function LGraph(e,t,n){i.call(this,n),this.estimatedSize=a.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=e,null!=t&&t instanceof l?this.graphManager=t:null!=t&&t instanceof Layout&&(this.graphManager=t.graphManager)}for(var g in LGraph.prototype=Object.create(i.prototype),i)LGraph[g]=i[g];LGraph.prototype.getNodes=function(){return this.nodes},LGraph.prototype.getEdges=function(){return this.edges},LGraph.prototype.getGraphManager=function(){return this.graphManager},LGraph.prototype.getParent=function(){return this.parent},LGraph.prototype.getLeft=function(){return this.left},LGraph.prototype.getRight=function(){return this.right},LGraph.prototype.getTop=function(){return this.top},LGraph.prototype.getBottom=function(){return this.bottom},LGraph.prototype.isConnected=function(){return this.isConnected},LGraph.prototype.add=function(e,t,n){if(null==t&&null==n){var i=e;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(i)>-1)throw"Node already in graph!";return i.owner=this,this.getNodes().push(i),i}var a=e;if(!(this.getNodes().indexOf(t)>-1&&this.getNodes().indexOf(n)>-1))throw"Source or target not in graph!";if(t.owner!=n.owner||t.owner!=this)throw"Both owners must be this graph!";return t.owner!=n.owner?null:(a.source=t,a.target=n,a.isInterGraph=!1,this.getEdges().push(a),t.edges.push(a),n!=t&&n.edges.push(a),a)},LGraph.prototype.remove=function(e){var t=e;if(e instanceof u){if(null==t)throw"Node is null!";if(null==t.owner||t.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var n=t.edges.slice(),i=n.length,a=0;a<i;a++)(s=n[a]).isInterGraph?this.graphManager.remove(s):s.source.owner.remove(s);if(-1==(l=this.nodes.indexOf(t)))throw"Node not in owner node list!";this.nodes.splice(l,1)}else if(e instanceof c){var s;if(null==(s=e))throw"Edge is null!";if(null==s.source||null==s.target)throw"Source and/or target is null!";if(null==s.source.owner||null==s.target.owner||s.source.owner!=this||s.target.owner!=this)throw"Source and/or target owner is invalid!";var l,h=s.source.edges.indexOf(s),d=s.target.edges.indexOf(s);if(!(h>-1&&d>-1))throw"Source and/or target doesn't know this edge!";if(s.source.edges.splice(h,1),s.target!=s.source&&s.target.edges.splice(d,1),-1==(l=s.source.owner.getEdges().indexOf(s)))throw"Not in owner's edge list!";s.source.owner.getEdges().splice(l,1)}},LGraph.prototype.updateLeftTop=function(){for(var e,t,n,i=a.MAX_VALUE,s=a.MAX_VALUE,l=this.getNodes(),u=l.length,c=0;c<u;c++){var h=l[c];i>(e=h.getTop())&&(i=e),s>(t=h.getLeft())&&(s=t)}return i==a.MAX_VALUE?null:(n=null!=l[0].getParent().paddingLeft?l[0].getParent().paddingLeft:this.margin,this.left=s-n,this.top=i-n,new d(this.left,this.top))},LGraph.prototype.updateBounds=function(e){for(var t,n,i,s,l,u=a.MAX_VALUE,c=-a.MAX_VALUE,d=a.MAX_VALUE,p=-a.MAX_VALUE,g=this.nodes,v=g.length,y=0;y<v;y++){var m=g[y];e&&null!=m.child&&m.updateBounds(),u>(t=m.getLeft())&&(u=t),c<(n=m.getRight())&&(c=n),d>(i=m.getTop())&&(d=i),p<(s=m.getBottom())&&(p=s)}var b=new h(u,d,c-u,p-d);u==a.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),l=null!=g[0].getParent().paddingLeft?g[0].getParent().paddingLeft:this.margin,this.left=b.x-l,this.right=b.x+b.width+l,this.top=b.y-l,this.bottom=b.y+b.height+l},LGraph.calculateBounds=function(e){for(var t,n,i,s,l=a.MAX_VALUE,u=-a.MAX_VALUE,c=a.MAX_VALUE,d=-a.MAX_VALUE,p=e.length,g=0;g<p;g++){var v=e[g];l>(t=v.getLeft())&&(l=t),u<(n=v.getRight())&&(u=n),c>(i=v.getTop())&&(c=i),d<(s=v.getBottom())&&(d=s)}return new h(l,c,u-l,d-c)},LGraph.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},LGraph.prototype.getEstimatedSize=function(){if(this.estimatedSize==a.MIN_VALUE)throw"assert failed";return this.estimatedSize},LGraph.prototype.calcEstimatedSize=function(){for(var e=0,t=this.nodes,n=t.length,i=0;i<n;i++){e+=t[i].calcEstimatedSize()}return this.estimatedSize=0==e?s.EMPTY_COMPOUND_NODE_SIZE:e/Math.sqrt(this.nodes.length),this.estimatedSize},LGraph.prototype.updateConnected=function(){var e=this;if(0!=this.nodes.length){var t,n,i=new p,a=new Set,s=this.nodes[0];for(s.withChildren().forEach(function(e){i.push(e),a.add(e)});0!==i.length;)for(var l=(t=(s=i.shift()).getEdges()).length,u=0;u<l;u++){if(null!=(n=t[u].getOtherEndInGraph(s,this))&&!a.has(n))n.withChildren().forEach(function(e){i.push(e),a.add(e)})}if(this.isConnected=!1,a.size>=this.nodes.length){var c=0;a.forEach(function(t){t.owner==e&&c++}),c==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},e.exports=LGraph},function(e,t,n){"use strict";var i,a=n(1);function LGraphManager(e){i=n(5),this.layout=e,this.graphs=[],this.edges=[]}LGraphManager.prototype.addRoot=function(){var e=this.layout.newGraph(),t=this.layout.newNode(null),n=this.add(e,t);return this.setRootGraph(n),this.rootGraph},LGraphManager.prototype.add=function(e,t,n,i,a){if(null==n&&null==i&&null==a){if(null==e)throw"Graph is null!";if(null==t)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),null!=e.parent)throw"Already has a parent!";if(null!=t.child)throw"Already has a child!";return e.parent=t,t.child=e,e}a=n,n=e;var s=(i=t).getOwner(),l=a.getOwner();if(null==s||s.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==l||l.getGraphManager()!=this)throw"Target not in this graph mgr!";if(s==l)return n.isInterGraph=!1,s.add(n,i,a);if(n.isInterGraph=!0,n.source=i,n.target=a,this.edges.indexOf(n)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(n),null==n.source||null==n.target)throw"Edge source and/or target is null!";if(-1!=n.source.edges.indexOf(n)||-1!=n.target.edges.indexOf(n))throw"Edge already in source and/or target incidency list!";return n.source.edges.push(n),n.target.edges.push(n),n},LGraphManager.prototype.remove=function(e){if(e instanceof i){var t=e;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(t!=this.rootGraph&&(null==t.parent||t.parent.graphManager!=this))throw"Invalid parent node!";for(var n,s=[],l=(s=s.concat(t.getEdges())).length,u=0;u<l;u++)n=s[u],t.remove(n);var c,h=[];l=(h=h.concat(t.getNodes())).length;for(u=0;u<l;u++)c=h[u],t.remove(c);t==this.rootGraph&&this.setRootGraph(null);var d=this.graphs.indexOf(t);this.graphs.splice(d,1),t.parent=null}else if(e instanceof a){if(null==(n=e))throw"Edge is null!";if(!n.isInterGraph)throw"Not an inter-graph edge!";if(null==n.source||null==n.target)throw"Source and/or target is null!";if(-1==n.source.edges.indexOf(n)||-1==n.target.edges.indexOf(n))throw"Source and/or target doesn't know this edge!";d=n.source.edges.indexOf(n);if(n.source.edges.splice(d,1),d=n.target.edges.indexOf(n),n.target.edges.splice(d,1),null==n.source.owner||null==n.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==n.source.owner.getGraphManager().edges.indexOf(n))throw"Not in owner graph manager's edge list!";d=n.source.owner.getGraphManager().edges.indexOf(n);n.source.owner.getGraphManager().edges.splice(d,1)}},LGraphManager.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},LGraphManager.prototype.getGraphs=function(){return this.graphs},LGraphManager.prototype.getAllNodes=function(){if(null==this.allNodes){for(var e=[],t=this.getGraphs(),n=t.length,i=0;i<n;i++)e=e.concat(t[i].getNodes());this.allNodes=e}return this.allNodes},LGraphManager.prototype.resetAllNodes=function(){this.allNodes=null},LGraphManager.prototype.resetAllEdges=function(){this.allEdges=null},LGraphManager.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},LGraphManager.prototype.getAllEdges=function(){if(null==this.allEdges){for(var e=[],t=this.getGraphs(),n=(t.length,0);n<t.length;n++)e=e.concat(t[n].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},LGraphManager.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},LGraphManager.prototype.setAllNodesToApplyGravitation=function(e){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=e},LGraphManager.prototype.getRoot=function(){return this.rootGraph},LGraphManager.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,null==e.parent&&(e.parent=this.layout.newNode("Root node"))},LGraphManager.prototype.getLayout=function(){return this.layout},LGraphManager.prototype.isOneAncestorOfOther=function(e,t){if(null==e||null==t)throw"assert failed";if(e==t)return!0;for(var n,i=e.getOwner();;){if(null==(n=i.getParent()))break;if(n==t)return!0;if(null==(i=n.getOwner()))break}for(i=t.getOwner();;){if(null==(n=i.getParent()))break;if(n==e)return!0;if(null==(i=n.getOwner()))break}return!1},LGraphManager.prototype.calcLowestCommonAncestors=function(){for(var e,t,n,i,a,s=this.getAllEdges(),l=s.length,u=0;u<l;u++)if(t=(e=s[u]).source,n=e.target,e.lca=null,e.sourceInLca=t,e.targetInLca=n,t!=n){for(i=t.getOwner();null==e.lca;){for(e.targetInLca=n,a=n.getOwner();null==e.lca;){if(a==i){e.lca=a;break}if(a==this.rootGraph)break;if(null!=e.lca)throw"assert failed";e.targetInLca=a.getParent(),a=e.targetInLca.getOwner()}if(i==this.rootGraph)break;null==e.lca&&(e.sourceInLca=i.getParent(),i=e.sourceInLca.getOwner())}if(null==e.lca)throw"assert failed"}else e.lca=t.getOwner()},LGraphManager.prototype.calcLowestCommonAncestor=function(e,t){if(e==t)return e.getOwner();for(var n=e.getOwner();;){if(null==n)break;for(var i=t.getOwner();;){if(null==i)break;if(i==n)return i;i=i.getParent().getOwner()}n=n.getParent().getOwner()}return n},LGraphManager.prototype.calcInclusionTreeDepths=function(e,t){var n;null==e&&null==t&&(e=this.rootGraph,t=1);for(var i=e.getNodes(),a=i.length,s=0;s<a;s++)(n=i[s]).inclusionTreeDepth=t,null!=n.child&&this.calcInclusionTreeDepths(n.child,t+1)},LGraphManager.prototype.includesInvalidEdge=function(){for(var e,t=this.edges.length,n=0;n<t;n++)if(e=this.edges[n],this.isOneAncestorOfOther(e.source,e.target))return!0;return!1},e.exports=LGraphManager},function(e,t,n){"use strict";var i=n(0);function FDLayoutConstants(){}for(var a in i)FDLayoutConstants[a]=i[a];FDLayoutConstants.MAX_ITERATIONS=2500,FDLayoutConstants.DEFAULT_EDGE_LENGTH=50,FDLayoutConstants.DEFAULT_SPRING_STRENGTH=.45,FDLayoutConstants.DEFAULT_REPULSION_STRENGTH=4500,FDLayoutConstants.DEFAULT_GRAVITY_STRENGTH=.4,FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,FDLayoutConstants.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,FDLayoutConstants.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,FDLayoutConstants.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,FDLayoutConstants.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,FDLayoutConstants.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,FDLayoutConstants.COOLING_ADAPTATION_FACTOR=.33,FDLayoutConstants.ADAPTATION_LOWER_NODE_LIMIT=1e3,FDLayoutConstants.ADAPTATION_UPPER_NODE_LIMIT=5e3,FDLayoutConstants.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,FDLayoutConstants.MAX_NODE_DISPLACEMENT=3*FDLayoutConstants.MAX_NODE_DISPLACEMENT_INCREMENTAL,FDLayoutConstants.MIN_REPULSION_DIST=FDLayoutConstants.DEFAULT_EDGE_LENGTH/10,FDLayoutConstants.CONVERGENCE_CHECK_PERIOD=100,FDLayoutConstants.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,FDLayoutConstants.MIN_EDGE_LENGTH=1,FDLayoutConstants.GRID_CALCULATION_CHECK_PERIOD=10,e.exports=FDLayoutConstants},function(e,t,n){"use strict";var i=n(12);function IGeometry(){}IGeometry.calcSeparationAmount=function(e,t,n,i){if(!e.intersects(t))throw"assert failed";var a=new Array(2);this.decideDirectionsForOverlappingNodes(e,t,a),n[0]=Math.min(e.getRight(),t.getRight())-Math.max(e.x,t.x),n[1]=Math.min(e.getBottom(),t.getBottom())-Math.max(e.y,t.y),e.getX()<=t.getX()&&e.getRight()>=t.getRight()?n[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight()):t.getX()<=e.getX()&&t.getRight()>=e.getRight()&&(n[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight())),e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()?n[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()):t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()&&(n[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()));var s=Math.abs((t.getCenterY()-e.getCenterY())/(t.getCenterX()-e.getCenterX()));t.getCenterY()===e.getCenterY()&&t.getCenterX()===e.getCenterX()&&(s=1);var l=s*n[0],u=n[1]/s;n[0]<u?u=n[0]:l=n[1],n[0]=-1*a[0]*(u/2+i),n[1]=-1*a[1]*(l/2+i)},IGeometry.decideDirectionsForOverlappingNodes=function(e,t,n){e.getCenterX()<t.getCenterX()?n[0]=-1:n[0]=1,e.getCenterY()<t.getCenterY()?n[1]=-1:n[1]=1},IGeometry.getIntersection2=function(e,t,n){var i=e.getCenterX(),a=e.getCenterY(),s=t.getCenterX(),l=t.getCenterY();if(e.intersects(t))return n[0]=i,n[1]=a,n[2]=s,n[3]=l,!0;var u=e.getX(),c=e.getY(),h=e.getRight(),d=e.getX(),p=e.getBottom(),g=e.getRight(),v=e.getWidthHalf(),y=e.getHeightHalf(),m=t.getX(),b=t.getY(),x=t.getRight(),w=t.getX(),E=t.getBottom(),_=t.getRight(),T=t.getWidthHalf(),L=t.getHeightHalf(),D=!1,S=!1;if(i===s){if(a>l)return n[0]=i,n[1]=c,n[2]=s,n[3]=E,!1;if(a<l)return n[0]=i,n[1]=p,n[2]=s,n[3]=b,!1}else if(a===l){if(i>s)return n[0]=u,n[1]=a,n[2]=x,n[3]=l,!1;if(i<s)return n[0]=h,n[1]=a,n[2]=m,n[3]=l,!1}else{var k=e.height/e.width,P=t.height/t.width,N=(l-a)/(s-i),I=void 0,M=void 0,R=void 0,O=void 0,z=void 0,G=void 0;if(-k===N?i>s?(n[0]=d,n[1]=p,D=!0):(n[0]=h,n[1]=c,D=!0):k===N&&(i>s?(n[0]=u,n[1]=c,D=!0):(n[0]=g,n[1]=p,D=!0)),-P===N?s>i?(n[2]=w,n[3]=E,S=!0):(n[2]=x,n[3]=b,S=!0):P===N&&(s>i?(n[2]=m,n[3]=b,S=!0):(n[2]=_,n[3]=E,S=!0)),D&&S)return!1;if(i>s?a>l?(I=this.getCardinalDirection(k,N,4),M=this.getCardinalDirection(P,N,2)):(I=this.getCardinalDirection(-k,N,3),M=this.getCardinalDirection(-P,N,1)):a>l?(I=this.getCardinalDirection(-k,N,1),M=this.getCardinalDirection(-P,N,3)):(I=this.getCardinalDirection(k,N,2),M=this.getCardinalDirection(P,N,4)),!D)switch(I){case 1:O=c,R=i+-y/N,n[0]=R,n[1]=O;break;case 2:R=g,O=a+v*N,n[0]=R,n[1]=O;break;case 3:O=p,R=i+y/N,n[0]=R,n[1]=O;break;case 4:R=d,O=a+-v*N,n[0]=R,n[1]=O}if(!S)switch(M){case 1:G=b,z=s+-L/N,n[2]=z,n[3]=G;break;case 2:z=_,G=l+T*N,n[2]=z,n[3]=G;break;case 3:G=E,z=s+L/N,n[2]=z,n[3]=G;break;case 4:z=w,G=l+-T*N,n[2]=z,n[3]=G}}return!1},IGeometry.getCardinalDirection=function(e,t,n){return e>t?n:1+n%4},IGeometry.getIntersection=function(e,t,n,a){if(null==a)return this.getIntersection2(e,t,n);var s,l,u,c,h,d,p,g=e.x,v=e.y,y=t.x,m=t.y,b=n.x,x=n.y,w=a.x,E=a.y;return 0===(p=(s=m-v)*(c=b-w)-(l=E-x)*(u=g-y))?null:new i((u*(d=w*x-b*E)-c*(h=y*v-g*m))/p,(l*h-s*d)/p)},IGeometry.angleOfVector=function(e,t,n,i){var a=void 0;return e!==n?(a=Math.atan((i-t)/(n-e)),n<e?a+=Math.PI:i<t&&(a+=this.TWO_PI)):a=i<t?this.ONE_AND_HALF_PI:this.HALF_PI,a},IGeometry.doIntersect=function(e,t,n,i){var a=e.x,s=e.y,l=t.x,u=t.y,c=n.x,h=n.y,d=i.x,p=i.y,g=(l-a)*(p-h)-(d-c)*(u-s);if(0===g)return!1;var v=((p-h)*(d-a)+(c-d)*(p-s))/g,y=((s-u)*(d-a)+(l-a)*(p-s))/g;return 0<v&&v<1&&0<y&&y<1},IGeometry.HALF_PI=.5*Math.PI,IGeometry.ONE_AND_HALF_PI=1.5*Math.PI,IGeometry.TWO_PI=2*Math.PI,IGeometry.THREE_PI=3*Math.PI,e.exports=IGeometry},function(e,t,n){"use strict";function IMath(){}IMath.sign=function(e){return e>0?1:e<0?-1:0},IMath.floor=function(e){return e<0?Math.ceil(e):Math.floor(e)},IMath.ceil=function(e){return e<0?Math.floor(e):Math.ceil(e)},e.exports=IMath},function(e,t,n){"use strict";function Integer(){}Integer.MAX_VALUE=2147483647,Integer.MIN_VALUE=-2147483648,e.exports=Integer},function(e,t,n){"use strict";var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var a=function nodeFrom(e){return{value:e,next:null,prev:null}},s=function add(e,t,n,i){return null!==e?e.next=t:i.head=t,null!==n?n.prev=t:i.tail=t,t.prev=e,t.next=n,i.length++,t},l=function _remove(e,t){var n=e.prev,i=e.next;return null!==n?n.next=i:t.head=i,null!==i?i.prev=n:t.tail=n,e.prev=e.next=null,t.length--,e},u=function(){function LinkedList(e){var t=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LinkedList),this.length=0,this.head=null,this.tail=null,null!=e&&e.forEach(function(e){return t.push(e)})}return i(LinkedList,[{key:"size",value:function size(){return this.length}},{key:"insertBefore",value:function insertBefore(e,t){return s(t.prev,a(e),t,this)}},{key:"insertAfter",value:function insertAfter(e,t){return s(t,a(e),t.next,this)}},{key:"insertNodeBefore",value:function insertNodeBefore(e,t){return s(t.prev,e,t,this)}},{key:"insertNodeAfter",value:function insertNodeAfter(e,t){return s(t,e,t.next,this)}},{key:"push",value:function push(e){return s(this.tail,a(e),null,this)}},{key:"unshift",value:function unshift(e){return s(null,a(e),this.head,this)}},{key:"remove",value:function remove(e){return l(e,this)}},{key:"pop",value:function pop(){return l(this.tail,this).value}},{key:"popNode",value:function popNode(){return l(this.tail,this)}},{key:"shift",value:function shift(){return l(this.head,this).value}},{key:"shiftNode",value:function shiftNode(){return l(this.head,this)}},{key:"get_object_at",value:function get_object_at(e){if(e<=this.length()){for(var t=1,n=this.head;t<e;)n=n.next,t++;return n.value}}},{key:"set_object_at",value:function set_object_at(e,t){if(e<=this.length()){for(var n=1,i=this.head;n<e;)i=i.next,n++;i.value=t}}}]),LinkedList}();e.exports=u},function(e,t,n){"use strict";function Point(e,t,n){this.x=null,this.y=null,null==e&&null==t&&null==n?(this.x=0,this.y=0):"number"==typeof e&&"number"==typeof t&&null==n?(this.x=e,this.y=t):"Point"==e.constructor.name&&null==t&&null==n&&(n=e,this.x=n.x,this.y=n.y)}Point.prototype.getX=function(){return this.x},Point.prototype.getY=function(){return this.y},Point.prototype.getLocation=function(){return new Point(this.x,this.y)},Point.prototype.setLocation=function(e,t,n){"Point"==e.constructor.name&&null==t&&null==n?(n=e,this.setLocation(n.x,n.y)):"number"==typeof e&&"number"==typeof t&&null==n&&(parseInt(e)==e&&parseInt(t)==t?this.move(e,t):(this.x=Math.floor(e+.5),this.y=Math.floor(t+.5)))},Point.prototype.move=function(e,t){this.x=e,this.y=t},Point.prototype.translate=function(e,t){this.x+=e,this.y+=t},Point.prototype.equals=function(e){if("Point"==e.constructor.name){var t=e;return this.x==t.x&&this.y==t.y}return this==e},Point.prototype.toString=function(){return(new Point).constructor.name+"[x="+this.x+",y="+this.y+"]"},e.exports=Point},function(e,t,n){"use strict";function RectangleD(e,t,n,i){this.x=0,this.y=0,this.width=0,this.height=0,null!=e&&null!=t&&null!=n&&null!=i&&(this.x=e,this.y=t,this.width=n,this.height=i)}RectangleD.prototype.getX=function(){return this.x},RectangleD.prototype.setX=function(e){this.x=e},RectangleD.prototype.getY=function(){return this.y},RectangleD.prototype.setY=function(e){this.y=e},RectangleD.prototype.getWidth=function(){return this.width},RectangleD.prototype.setWidth=function(e){this.width=e},RectangleD.prototype.getHeight=function(){return this.height},RectangleD.prototype.setHeight=function(e){this.height=e},RectangleD.prototype.getRight=function(){return this.x+this.width},RectangleD.prototype.getBottom=function(){return this.y+this.height},RectangleD.prototype.intersects=function(e){return!(this.getRight()<e.x)&&(!(this.getBottom()<e.y)&&(!(e.getRight()<this.x)&&!(e.getBottom()<this.y)))},RectangleD.prototype.getCenterX=function(){return this.x+this.width/2},RectangleD.prototype.getMinX=function(){return this.getX()},RectangleD.prototype.getMaxX=function(){return this.getX()+this.width},RectangleD.prototype.getCenterY=function(){return this.y+this.height/2},RectangleD.prototype.getMinY=function(){return this.getY()},RectangleD.prototype.getMaxY=function(){return this.getY()+this.height},RectangleD.prototype.getWidthHalf=function(){return this.width/2},RectangleD.prototype.getHeightHalf=function(){return this.height/2},e.exports=RectangleD},function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function UniqueIDGeneretor(){}UniqueIDGeneretor.lastID=0,UniqueIDGeneretor.createID=function(e){return UniqueIDGeneretor.isPrimitive(e)?e:(null!=e.uniqueID||(e.uniqueID=UniqueIDGeneretor.getString(),UniqueIDGeneretor.lastID++),e.uniqueID)},UniqueIDGeneretor.getString=function(e){return null==e&&(e=UniqueIDGeneretor.lastID),"Object#"+e},UniqueIDGeneretor.isPrimitive=function(e){var t=void 0===e?"undefined":i(e);return null==e||"object"!=t&&"function"!=t},e.exports=UniqueIDGeneretor},function(e,t,n){"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(0),a=n(6),s=n(3),l=n(1),u=n(5),c=n(4),h=n(17),d=n(27);function Layout(e){d.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new a(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=e&&(this.isRemoteUse=e)}Layout.RANDOM_SEED=1,Layout.prototype=Object.create(d.prototype),Layout.prototype.getGraphManager=function(){return this.graphManager},Layout.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},Layout.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},Layout.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},Layout.prototype.newGraphManager=function(){var e=new a(this);return this.graphManager=e,e},Layout.prototype.newGraph=function(e){return new u(null,this.graphManager,e)},Layout.prototype.newNode=function(e){return new s(this.graphManager,e)},Layout.prototype.newEdge=function(e){return new l(null,null,e)},Layout.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},Layout.prototype.runLayout=function(){var e;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),e=!this.checkLayoutSuccess()&&this.layout(),"during"!==i.ANIMATE&&(e&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,e)},Layout.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},Layout.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var e=this.graphManager.getAllEdges(),t=0;t<e.length;t++)e[t];var n=this.graphManager.getRoot().getNodes();for(t=0;t<n.length;t++)n[t];this.update(this.graphManager.getRoot())}},Layout.prototype.update=function(e){if(null==e)this.update2();else if(e instanceof s){var t=e;if(null!=t.getChild())for(var n=t.getChild().getNodes(),i=0;i<n.length;i++)update(n[i]);if(null!=t.vGraphObject)t.vGraphObject.update(t)}else if(e instanceof l){var a=e;if(null!=a.vGraphObject)a.vGraphObject.update(a)}else if(e instanceof u){var c=e;if(null!=c.vGraphObject)c.vGraphObject.update(c)}},Layout.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},Layout.prototype.transform=function(e){if(null==e)this.transform(new c(0,0));else{var t=new h,n=this.graphManager.getRoot().updateLeftTop();if(null!=n){t.setWorldOrgX(e.x),t.setWorldOrgY(e.y),t.setDeviceOrgX(n.x),t.setDeviceOrgY(n.y);for(var i=this.getAllNodes(),a=0;a<i.length;a++)i[a].transform(t)}}},Layout.prototype.positionNodesRandomly=function(e){if(null==e)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var t,n,i=e.getNodes(),a=0;a<i.length;a++)null==(n=(t=i[a]).getChild())||0==n.getNodes().length?t.scatter():(this.positionNodesRandomly(n),t.updateBounds())},Layout.prototype.getFlatForest=function(){for(var e=[],t=!0,n=this.graphManager.getRoot().getNodes(),i=!0,a=0;a<n.length;a++)null!=n[a].getChild()&&(i=!1);if(!i)return e;var s=new Set,l=[],u=new Map,c=[];for(c=c.concat(n);c.length>0&&t;){for(l.push(c[0]);l.length>0&&t;){var h=l[0];l.splice(0,1),s.add(h);var d=h.getEdges();for(a=0;a<d.length;a++){var p=d[a].getOtherEnd(h);if(u.get(h)!=p){if(s.has(p)){t=!1;break}l.push(p),u.set(p,h)}}}if(t){var g=[].concat(_toConsumableArray(s));e.push(g);for(a=0;a<g.length;a++){var v=g[a],y=c.indexOf(v);y>-1&&c.splice(y,1)}s=new Set,u=new Map}else e=[]}return e},Layout.prototype.createDummyNodesForBendpoints=function(e){for(var t=[],n=e.source,i=this.graphManager.calcLowestCommonAncestor(e.source,e.target),a=0;a<e.bendpoints.length;a++){var s=this.newNode(null);s.setRect(new Point(0,0),new Dimension(1,1)),i.add(s);var l=this.newEdge(null);this.graphManager.add(l,n,s),t.add(s),n=s}l=this.newEdge(null);return this.graphManager.add(l,n,e.target),this.edgeToDummyNodes.set(e,t),e.isInterGraph()?this.graphManager.remove(e):i.remove(e),t},Layout.prototype.createBendpointsFromDummyNodes=function(){var e=[];e=e.concat(this.graphManager.getAllEdges()),e=[].concat(_toConsumableArray(this.edgeToDummyNodes.keys())).concat(e);for(var t=0;t<e.length;t++){var n=e[t];if(n.bendpoints.length>0){for(var i=this.edgeToDummyNodes.get(n),a=0;a<i.length;a++){var s=i[a],l=new c(s.getCenterX(),s.getCenterY()),u=n.bendpoints.get(a);u.x=l.x,u.y=l.y,s.getOwner().remove(s)}this.graphManager.add(n,n.source,n.target)}}},Layout.transform=function(e,t,n,i){if(null!=n&&null!=i){var a=t;if(e<=50)a-=(t-t/n)/50*(50-e);else a+=(t*i-t)/50*(e-50);return a}var s,l;return e<=50?(s=9*t/500,l=t/10):(s=9*t/50,l=-8*t),s*e+l},Layout.findCenterOfTree=function(e){var t=[];t=t.concat(e);var n=[],i=new Map,a=!1,s=null;1!=t.length&&2!=t.length||(a=!0,s=t[0]);for(var l=0;l<t.length;l++){var u=(d=t[l]).getNeighborsList().size;i.set(d,d.getNeighborsList().size),1==u&&n.push(d)}var c=[];for(c=c.concat(n);!a;){var h=[];h=h.concat(c),c=[];for(l=0;l<t.length;l++){var d=t[l],p=t.indexOf(d);p>=0&&t.splice(p,1),d.getNeighborsList().forEach(function(e){if(n.indexOf(e)<0){var t=i.get(e)-1;1==t&&c.push(e),i.set(e,t)}})}n=n.concat(c),1!=t.length&&2!=t.length||(a=!0,s=t[0])}return s},Layout.prototype.setGraphManager=function(e){this.graphManager=e},e.exports=Layout},function(e,t,n){"use strict";function RandomSeed(){}RandomSeed.seed=1,RandomSeed.x=0,RandomSeed.nextDouble=function(){return RandomSeed.x=1e4*Math.sin(RandomSeed.seed++),RandomSeed.x-Math.floor(RandomSeed.x)},e.exports=RandomSeed},function(e,t,n){"use strict";var i=n(4);function Transform(e,t){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}Transform.prototype.getWorldOrgX=function(){return this.lworldOrgX},Transform.prototype.setWorldOrgX=function(e){this.lworldOrgX=e},Transform.prototype.getWorldOrgY=function(){return this.lworldOrgY},Transform.prototype.setWorldOrgY=function(e){this.lworldOrgY=e},Transform.prototype.getWorldExtX=function(){return this.lworldExtX},Transform.prototype.setWorldExtX=function(e){this.lworldExtX=e},Transform.prototype.getWorldExtY=function(){return this.lworldExtY},Transform.prototype.setWorldExtY=function(e){this.lworldExtY=e},Transform.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},Transform.prototype.setDeviceOrgX=function(e){this.ldeviceOrgX=e},Transform.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},Transform.prototype.setDeviceOrgY=function(e){this.ldeviceOrgY=e},Transform.prototype.getDeviceExtX=function(){return this.ldeviceExtX},Transform.prototype.setDeviceExtX=function(e){this.ldeviceExtX=e},Transform.prototype.getDeviceExtY=function(){return this.ldeviceExtY},Transform.prototype.setDeviceExtY=function(e){this.ldeviceExtY=e},Transform.prototype.transformX=function(e){var t=0,n=this.lworldExtX;return 0!=n&&(t=this.ldeviceOrgX+(e-this.lworldOrgX)*this.ldeviceExtX/n),t},Transform.prototype.transformY=function(e){var t=0,n=this.lworldExtY;return 0!=n&&(t=this.ldeviceOrgY+(e-this.lworldOrgY)*this.ldeviceExtY/n),t},Transform.prototype.inverseTransformX=function(e){var t=0,n=this.ldeviceExtX;return 0!=n&&(t=this.lworldOrgX+(e-this.ldeviceOrgX)*this.lworldExtX/n),t},Transform.prototype.inverseTransformY=function(e){var t=0,n=this.ldeviceExtY;return 0!=n&&(t=this.lworldOrgY+(e-this.ldeviceOrgY)*this.lworldExtY/n),t},Transform.prototype.inverseTransformPoint=function(e){return new i(this.inverseTransformX(e.x),this.inverseTransformY(e.y))},e.exports=Transform},function(e,t,n){"use strict";var i=n(15),a=n(7),s=n(0),l=n(8),u=n(9);function FDLayout(){i.call(this),this.useSmartIdealEdgeLengthCalculation=a.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=a.DEFAULT_EDGE_LENGTH,this.springConstant=a.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=a.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=a.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=a.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=a.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*a.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=a.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=a.MAX_ITERATIONS}for(var c in FDLayout.prototype=Object.create(i.prototype),i)FDLayout[c]=i[c];FDLayout.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=a.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},FDLayout.prototype.calcIdealEdgeLengths=function(){for(var e,t,n,i,l,u,c=this.getGraphManager().getAllEdges(),h=0;h<c.length;h++)(e=c[h]).idealLength=this.idealEdgeLength,e.isInterGraph&&(n=e.getSource(),i=e.getTarget(),l=e.getSourceInLca().getEstimatedSize(),u=e.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(e.idealLength+=l+u-2*s.SIMPLE_NODE_SIZE),t=e.getLca().getInclusionTreeDepth(),e.idealLength+=a.DEFAULT_EDGE_LENGTH*a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(n.getInclusionTreeDepth()+i.getInclusionTreeDepth()-2*t))},FDLayout.prototype.initSpringEmbedder=function(){var e=this.getAllNodes().length;this.incremental?(e>a.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*a.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(e-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-a.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT_INCREMENTAL):(e>a.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(a.COOLING_ADAPTATION_FACTOR,1-(e-a.ADAPTATION_LOWER_NODE_LIMIT)/(a.ADAPTATION_UPPER_NODE_LIMIT-a.ADAPTATION_LOWER_NODE_LIMIT)*(1-a.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=a.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},FDLayout.prototype.calcSpringForces=function(){for(var e,t=this.getAllEdges(),n=0;n<t.length;n++)e=t[n],this.calcSpringForce(e,e.idealLength)},FDLayout.prototype.calcRepulsionForces=function(){var e,t,n,i,s,l=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&l&&this.updateGrid(),s=new Set,e=0;e<c.length;e++)n=c[e],this.calculateRepulsionForceOfANode(n,s,l,u),s.add(n);else for(e=0;e<c.length;e++)for(n=c[e],t=e+1;t<c.length;t++)i=c[t],n.getOwner()==i.getOwner()&&this.calcRepulsionForce(n,i)},FDLayout.prototype.calcGravitationalForces=function(){for(var e,t=this.getAllNodesToApplyGravitation(),n=0;n<t.length;n++)e=t[n],this.calcGravitationalForce(e)},FDLayout.prototype.moveNodes=function(){for(var e=this.getAllNodes(),t=0;t<e.length;t++)e[t].move()},FDLayout.prototype.calcSpringForce=function(e,t){var n,i,a,s,l=e.getSource(),u=e.getTarget();if(this.uniformLeafNodeSizes&&null==l.getChild()&&null==u.getChild())e.updateLengthSimple();else if(e.updateLength(),e.isOverlapingSourceAndTarget)return;0!=(n=e.getLength())&&(a=(i=this.springConstant*(n-t))*(e.lengthX/n),s=i*(e.lengthY/n),l.springForceX+=a,l.springForceY+=s,u.springForceX-=a,u.springForceY-=s)},FDLayout.prototype.calcRepulsionForce=function(e,t){var n,i,s,c,h,d,p,g=e.getRect(),v=t.getRect(),y=new Array(2),m=new Array(4);if(g.intersects(v)){l.calcSeparationAmount(g,v,y,a.DEFAULT_EDGE_LENGTH/2),d=2*y[0],p=2*y[1];var b=e.noOfChildren*t.noOfChildren/(e.noOfChildren+t.noOfChildren);e.repulsionForceX-=b*d,e.repulsionForceY-=b*p,t.repulsionForceX+=b*d,t.repulsionForceY+=b*p}else this.uniformLeafNodeSizes&&null==e.getChild()&&null==t.getChild()?(n=v.getCenterX()-g.getCenterX(),i=v.getCenterY()-g.getCenterY()):(l.getIntersection(g,v,m),n=m[2]-m[0],i=m[3]-m[1]),Math.abs(n)<a.MIN_REPULSION_DIST&&(n=u.sign(n)*a.MIN_REPULSION_DIST),Math.abs(i)<a.MIN_REPULSION_DIST&&(i=u.sign(i)*a.MIN_REPULSION_DIST),s=n*n+i*i,c=Math.sqrt(s),d=(h=this.repulsionConstant*e.noOfChildren*t.noOfChildren/s)*n/c,p=h*i/c,e.repulsionForceX-=d,e.repulsionForceY-=p,t.repulsionForceX+=d,t.repulsionForceY+=p},FDLayout.prototype.calcGravitationalForce=function(e){var t,n,i,a,s,l,u,c;n=((t=e.getOwner()).getRight()+t.getLeft())/2,i=(t.getTop()+t.getBottom())/2,a=e.getCenterX()-n,s=e.getCenterY()-i,l=Math.abs(a)+e.getWidth()/2,u=Math.abs(s)+e.getHeight()/2,e.getOwner()==this.graphManager.getRoot()?(l>(c=t.getEstimatedSize()*this.gravityRangeFactor)||u>c)&&(e.gravitationForceX=-this.gravityConstant*a,e.gravitationForceY=-this.gravityConstant*s):(l>(c=t.getEstimatedSize()*this.compoundGravityRangeFactor)||u>c)&&(e.gravitationForceX=-this.gravityConstant*a*this.compoundGravityConstant,e.gravitationForceY=-this.gravityConstant*s*this.compoundGravityConstant)},FDLayout.prototype.isConverged=function(){var e,t=!1;return this.totalIterations>this.maxIterations/3&&(t=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),e=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,e||t},FDLayout.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},FDLayout.prototype.calcNoOfChildrenForAllNodes=function(){for(var e,t=this.graphManager.getAllNodes(),n=0;n<t.length;n++)(e=t[n]).noOfChildren=e.getNoOfChildren()},FDLayout.prototype.calcGrid=function(e){var t,n;t=parseInt(Math.ceil((e.getRight()-e.getLeft())/this.repulsionRange)),n=parseInt(Math.ceil((e.getBottom()-e.getTop())/this.repulsionRange));for(var i=new Array(t),a=0;a<t;a++)i[a]=new Array(n);for(a=0;a<t;a++)for(var s=0;s<n;s++)i[a][s]=new Array;return i},FDLayout.prototype.addNodeToGrid=function(e,t,n){var i,a,s,l;i=parseInt(Math.floor((e.getRect().x-t)/this.repulsionRange)),a=parseInt(Math.floor((e.getRect().width+e.getRect().x-t)/this.repulsionRange)),s=parseInt(Math.floor((e.getRect().y-n)/this.repulsionRange)),l=parseInt(Math.floor((e.getRect().height+e.getRect().y-n)/this.repulsionRange));for(var u=i;u<=a;u++)for(var c=s;c<=l;c++)this.grid[u][c].push(e),e.setGridCoordinates(i,a,s,l)},FDLayout.prototype.updateGrid=function(){var e,t,n=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),e=0;e<n.length;e++)t=n[e],this.addNodeToGrid(t,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},FDLayout.prototype.calculateRepulsionForceOfANode=function(e,t,n,i){if(this.totalIterations%a.GRID_CALCULATION_CHECK_PERIOD==1&&n||i){var s,l=new Set;e.surrounding=new Array;for(var u=this.grid,c=e.startX-1;c<e.finishX+2;c++)for(var h=e.startY-1;h<e.finishY+2;h++)if(!(c<0||h<0||c>=u.length||h>=u[0].length))for(var d=0;d<u[c][h].length;d++)if(s=u[c][h][d],e.getOwner()==s.getOwner()&&e!=s&&!t.has(s)&&!l.has(s)){var p=Math.abs(e.getCenterX()-s.getCenterX())-(e.getWidth()/2+s.getWidth()/2),g=Math.abs(e.getCenterY()-s.getCenterY())-(e.getHeight()/2+s.getHeight()/2);p<=this.repulsionRange&&g<=this.repulsionRange&&l.add(s)}e.surrounding=[].concat(function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l))}for(c=0;c<e.surrounding.length;c++)this.calcRepulsionForce(e,e.surrounding[c])},FDLayout.prototype.calcRepulsionRange=function(){return 0},e.exports=FDLayout},function(e,t,n){"use strict";var i=n(1),a=n(7);function FDLayoutEdge(e,t,n){i.call(this,e,t,n),this.idealLength=a.DEFAULT_EDGE_LENGTH}for(var s in FDLayoutEdge.prototype=Object.create(i.prototype),i)FDLayoutEdge[s]=i[s];e.exports=FDLayoutEdge},function(e,t,n){"use strict";var i=n(3);function FDLayoutNode(e,t,n,a){i.call(this,e,t,n,a),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var a in FDLayoutNode.prototype=Object.create(i.prototype),i)FDLayoutNode[a]=i[a];FDLayoutNode.prototype.setGridCoordinates=function(e,t,n,i){this.startX=e,this.finishX=t,this.startY=n,this.finishY=i},e.exports=FDLayoutNode},function(e,t,n){"use strict";function DimensionD(e,t){this.width=0,this.height=0,null!==e&&null!==t&&(this.height=t,this.width=e)}DimensionD.prototype.getWidth=function(){return this.width},DimensionD.prototype.setWidth=function(e){this.width=e},DimensionD.prototype.getHeight=function(){return this.height},DimensionD.prototype.setHeight=function(e){this.height=e},e.exports=DimensionD},function(e,t,n){"use strict";var i=n(14);function HashMap(){this.map={},this.keys=[]}HashMap.prototype.put=function(e,t){var n=i.createID(e);this.contains(n)||(this.map[n]=t,this.keys.push(e))},HashMap.prototype.contains=function(e){i.createID(e);return null!=this.map[e]},HashMap.prototype.get=function(e){var t=i.createID(e);return this.map[t]},HashMap.prototype.keySet=function(){return this.keys},e.exports=HashMap},function(e,t,n){"use strict";var i=n(14);function HashSet(){this.set={}}HashSet.prototype.add=function(e){var t=i.createID(e);this.contains(t)||(this.set[t]=e)},HashSet.prototype.remove=function(e){delete this.set[i.createID(e)]},HashSet.prototype.clear=function(){this.set={}},HashSet.prototype.contains=function(e){return this.set[i.createID(e)]==e},HashSet.prototype.isEmpty=function(){return 0===this.size()},HashSet.prototype.size=function(){return Object.keys(this.set).length},HashSet.prototype.addAllTo=function(e){for(var t=Object.keys(this.set),n=t.length,i=0;i<n;i++)e.push(this.set[t[i]])},HashSet.prototype.size=function(){return Object.keys(this.set).length},HashSet.prototype.addAll=function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n];this.add(i)}},e.exports=HashSet},function(e,t,n){"use strict";var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var a=n(11),s=function(){function Quicksort(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Quicksort),null===t&&void 0===t||(this.compareFunction=this._defaultCompareFunction);var n=void 0;n=e instanceof a?e.size():e.length,this._quicksort(e,0,n-1)}return i(Quicksort,[{key:"_quicksort",value:function _quicksort(e,t,n){if(t<n){var i=this._partition(e,t,n);this._quicksort(e,t,i),this._quicksort(e,i+1,n)}}},{key:"_partition",value:function _partition(e,t,n){for(var i=this._get(e,t),a=t,s=n;;){for(;this.compareFunction(i,this._get(e,s));)s--;for(;this.compareFunction(this._get(e,a),i);)a++;if(!(a<s))return s;this._swap(e,a,s),a++,s--}}},{key:"_get",value:function _get(e,t){return e instanceof a?e.get_object_at(t):e[t]}},{key:"_set",value:function _set(e,t,n){e instanceof a?e.set_object_at(t,n):e[t]=n}},{key:"_swap",value:function _swap(e,t,n){var i=this._get(e,t);this._set(e,t,this._get(e,n)),this._set(e,n,i)}},{key:"_defaultCompareFunction",value:function _defaultCompareFunction(e,t){return t>e}}]),Quicksort}();e.exports=s},function(e,t,n){"use strict";var i=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var a=function(){function NeedlemanWunsch(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,NeedlemanWunsch),this.sequence1=e,this.sequence2=t,this.match_score=n,this.mismatch_penalty=i,this.gap_penalty=a,this.iMax=e.length+1,this.jMax=t.length+1,this.grid=new Array(this.iMax);for(var s=0;s<this.iMax;s++){this.grid[s]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.grid[s][l]=0}this.tracebackGrid=new Array(this.iMax);for(var u=0;u<this.iMax;u++){this.tracebackGrid[u]=new Array(this.jMax);for(var c=0;c<this.jMax;c++)this.tracebackGrid[u][c]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return i(NeedlemanWunsch,[{key:"getScore",value:function getScore(){return this.score}},{key:"getAlignments",value:function getAlignments(){return this.alignments}},{key:"computeGrids",value:function computeGrids(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var t=1;t<this.iMax;t++)this.grid[t][0]=this.grid[t-1][0]+this.gap_penalty,this.tracebackGrid[t][0]=[!1,!0,!1];for(var n=1;n<this.iMax;n++)for(var i=1;i<this.jMax;i++){var a=[this.sequence1[n-1]===this.sequence2[i-1]?this.grid[n-1][i-1]+this.match_score:this.grid[n-1][i-1]+this.mismatch_penalty,this.grid[n-1][i]+this.gap_penalty,this.grid[n][i-1]+this.gap_penalty],s=this.arrayAllMaxIndexes(a);this.grid[n][i]=a[s[0]],this.tracebackGrid[n][i]=[s.includes(0),s.includes(1),s.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function alignmentTraceback(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var t=e[0],n=this.tracebackGrid[t.pos[0]][t.pos[1]];n[0]&&e.push({pos:[t.pos[0]-1,t.pos[1]-1],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),n[1]&&e.push({pos:[t.pos[0]-1,t.pos[1]],seq1:this.sequence1[t.pos[0]-1]+t.seq1,seq2:"-"+t.seq2}),n[2]&&e.push({pos:[t.pos[0],t.pos[1]-1],seq1:"-"+t.seq1,seq2:this.sequence2[t.pos[1]-1]+t.seq2}),0===t.pos[0]&&0===t.pos[1]&&this.alignments.push({sequence1:t.seq1,sequence2:t.seq2}),e.shift()}return this.alignments}},{key:"getAllIndexes",value:function getAllIndexes(e,t){for(var n=[],i=-1;-1!==(i=e.indexOf(t,i+1));)n.push(i);return n}},{key:"arrayAllMaxIndexes",value:function arrayAllMaxIndexes(e){return this.getAllIndexes(e,Math.max.apply(null,e))}}]),NeedlemanWunsch}();e.exports=a},function(e,t,n){"use strict";var i=function layoutBase(){};i.FDLayout=n(18),i.FDLayoutConstants=n(7),i.FDLayoutEdge=n(19),i.FDLayoutNode=n(20),i.DimensionD=n(21),i.HashMap=n(22),i.HashSet=n(23),i.IGeometry=n(8),i.IMath=n(9),i.Integer=n(10),i.Point=n(12),i.PointD=n(4),i.RandomSeed=n(16),i.RectangleD=n(13),i.Transform=n(17),i.UniqueIDGeneretor=n(14),i.Quicksort=n(24),i.LinkedList=n(11),i.LGraphObject=n(2),i.LGraph=n(5),i.LEdge=n(1),i.LGraphManager=n(6),i.LNode=n(3),i.Layout=n(15),i.LayoutConstants=n(0),i.NeedlemanWunsch=n(25),e.exports=i},function(e,t,n){"use strict";function Emitter(){this.listeners=[]}var i=Emitter.prototype;i.addListener=function(e,t){this.listeners.push({event:e,callback:t})},i.removeListener=function(e,t){for(var n=this.listeners.length;n>=0;n--){var i=this.listeners[n];i.event===e&&i.callback===t&&this.listeners.splice(n,1)}},i.emit=function(e,t){for(var n=0;n<this.listeners.length;n++){var i=this.listeners[n];e===i.event&&i.callback(t)}},e.exports=Emitter}])})},3457:function(e,t,n){!function webpackUniversalModuleDefinition(t,i){e.exports=i(n(7799))}(0,function(e){return function(e){var t={};function __nested_webpack_require_659__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__nested_webpack_require_659__),i.l=!0,i.exports}return __nested_webpack_require_659__.m=e,__nested_webpack_require_659__.c=t,__nested_webpack_require_659__.i=function(e){return e},__nested_webpack_require_659__.d=function(e,t,n){__nested_webpack_require_659__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__nested_webpack_require_659__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __nested_webpack_require_659__.d(t,"a",t),t},__nested_webpack_require_659__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_659__.p="",__nested_webpack_require_659__(__nested_webpack_require_659__.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";var i=n(0).layoutBase.LayoutConstants,a=n(0).layoutBase.FDLayoutConstants,s=n(0).CoSEConstants,l=n(0).CoSELayout,u=n(0).CoSENode,c=n(0).layoutBase.PointD,h=n(0).layoutBase.DimensionD,d={ready:function ready(){},stop:function stop(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function _CoSELayout(e){this.options=function extend(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n}(d,e),p(this.options)}var p=function getUserOptions(e){null!=e.nodeRepulsion&&(s.DEFAULT_REPULSION_STRENGTH=a.DEFAULT_REPULSION_STRENGTH=e.nodeRepulsion),null!=e.idealEdgeLength&&(s.DEFAULT_EDGE_LENGTH=a.DEFAULT_EDGE_LENGTH=e.idealEdgeLength),null!=e.edgeElasticity&&(s.DEFAULT_SPRING_STRENGTH=a.DEFAULT_SPRING_STRENGTH=e.edgeElasticity),null!=e.nestingFactor&&(s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=a.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=e.nestingFactor),null!=e.gravity&&(s.DEFAULT_GRAVITY_STRENGTH=a.DEFAULT_GRAVITY_STRENGTH=e.gravity),null!=e.numIter&&(s.MAX_ITERATIONS=a.MAX_ITERATIONS=e.numIter),null!=e.gravityRange&&(s.DEFAULT_GRAVITY_RANGE_FACTOR=a.DEFAULT_GRAVITY_RANGE_FACTOR=e.gravityRange),null!=e.gravityCompound&&(s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=a.DEFAULT_COMPOUND_GRAVITY_STRENGTH=e.gravityCompound),null!=e.gravityRangeCompound&&(s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=a.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=e.gravityRangeCompound),null!=e.initialEnergyOnIncremental&&(s.DEFAULT_COOLING_FACTOR_INCREMENTAL=a.DEFAULT_COOLING_FACTOR_INCREMENTAL=e.initialEnergyOnIncremental),"draft"==e.quality?i.QUALITY=0:"proof"==e.quality?i.QUALITY=2:i.QUALITY=1,s.NODE_DIMENSIONS_INCLUDE_LABELS=a.NODE_DIMENSIONS_INCLUDE_LABELS=i.NODE_DIMENSIONS_INCLUDE_LABELS=e.nodeDimensionsIncludeLabels,s.DEFAULT_INCREMENTAL=a.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=!e.randomize,s.ANIMATE=a.ANIMATE=i.ANIMATE=e.animate,s.TILE=e.tile,s.TILING_PADDING_VERTICAL="function"==typeof e.tilingPaddingVertical?e.tilingPaddingVertical.call():e.tilingPaddingVertical,s.TILING_PADDING_HORIZONTAL="function"==typeof e.tilingPaddingHorizontal?e.tilingPaddingHorizontal.call():e.tilingPaddingHorizontal};_CoSELayout.prototype.run=function(){var e,t,n=this.options,i=(this.idToLNode={},this.layout=new l),a=this;a.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var s=i.newGraphManager();this.gm=s;var u=this.options.eles.nodes(),c=this.options.eles.edges();this.root=s.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(u),i);for(var h=0;h<c.length;h++){var d=c[h],p=this.idToLNode[d.data("source")],g=this.idToLNode[d.data("target")];if(p!==g&&0==p.getEdgesBetween(g).length)s.add(i.newEdge(),p,g).id=d.id()}var v=function getPositions(e,t){"number"==typeof e&&(e=t);var n=e.data("id"),i=a.idToLNode[n];return{x:i.getRect().getCenterX(),y:i.getRect().getCenterY()}},y=function iterateAnimated(){for(var s,l=function afterReposition(){n.fit&&n.cy.fit(n.eles,n.padding),e||(e=!0,a.cy.one("layoutready",n.ready),a.cy.trigger({type:"layoutready",layout:a}))},u=a.options.refresh,c=0;c<u&&!s;c++)s=a.stopped||a.layout.tick();if(s)return i.checkLayoutSuccess()&&!i.isSubLayout&&i.doPostLayout(),i.tilingPostLayout&&i.tilingPostLayout(),i.isLayoutFinished=!0,a.options.eles.nodes().positions(v),l(),a.cy.one("layoutstop",a.options.stop),a.cy.trigger({type:"layoutstop",layout:a}),t&&cancelAnimationFrame(t),void(e=!1);var h=a.layout.getPositionsData();n.eles.nodes().positions(function(e,t){if("number"==typeof e&&(e=t),!e.isParent()){for(var n=e.id(),i=h[n],a=e;null==i&&(i=h[a.data("parent")]||h["DummyCompound_"+a.data("parent")],h[n]=i,null!=(a=a.parent()[0])););return null!=i?{x:i.x,y:i.y}:{x:e.position("x"),y:e.position("y")}}}),l(),t=requestAnimationFrame(iterateAnimated)};return i.addListener("layoutstarted",function(){"during"===a.options.animate&&(t=requestAnimationFrame(y))}),i.runLayout(),"during"!==this.options.animate&&(a.options.eles.nodes().not(":parent").layoutPositions(a,a.options,v),e=!1),this},_CoSELayout.prototype.getTopMostNodes=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].id()]=!0;var i=e.filter(function(e,n){"number"==typeof e&&(e=n);for(var i=e.parent()[0];null!=i;){if(t[i.id()])return!1;i=i.parent()[0]}return!0});return i},_CoSELayout.prototype.processChildrenList=function(e,t,n){for(var i=t.length,a=0;a<i;a++){var s,l,d=t[a],p=d.children(),g=d.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((s=null!=d.outerWidth()&&null!=d.outerHeight()?e.add(new u(n.graphManager,new c(d.position("x")-g.w/2,d.position("y")-g.h/2),new h(parseFloat(g.w),parseFloat(g.h)))):e.add(new u(this.graphManager))).id=d.data("id"),s.paddingLeft=parseInt(d.css("padding")),s.paddingTop=parseInt(d.css("padding")),s.paddingRight=parseInt(d.css("padding")),s.paddingBottom=parseInt(d.css("padding")),this.options.nodeDimensionsIncludeLabels&&d.isParent()){var v=d.boundingBox({includeLabels:!0,includeNodes:!1}).w,y=d.boundingBox({includeLabels:!0,includeNodes:!1}).h,m=d.css("text-halign");s.labelWidth=v,s.labelHeight=y,s.labelPos=m}if(this.idToLNode[d.data("id")]=s,isNaN(s.rect.x)&&(s.rect.x=0),isNaN(s.rect.y)&&(s.rect.y=0),null!=p&&p.length>0)l=n.getGraphManager().add(n.newGraph(),s),this.processChildrenList(l,p,n)}},_CoSELayout.prototype.stop=function(){return this.stopped=!0,this};var g=function register(e){e("layout","cose-bilkent",_CoSELayout)};"undefined"!=typeof cytoscape&&g(cytoscape),e.exports=g}])})},7799:function(e,t,n){!function webpackUniversalModuleDefinition(t,i){e.exports=i(n(3143))}(0,function(e){return function(e){var t={};function __nested_webpack_require_643__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__nested_webpack_require_643__),i.l=!0,i.exports}return __nested_webpack_require_643__.m=e,__nested_webpack_require_643__.c=t,__nested_webpack_require_643__.i=function(e){return e},__nested_webpack_require_643__.d=function(e,t,n){__nested_webpack_require_643__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__nested_webpack_require_643__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __nested_webpack_require_643__.d(t,"a",t),t},__nested_webpack_require_643__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_643__.p="",__nested_webpack_require_643__(__nested_webpack_require_643__.s=7)}([function(t,n){t.exports=e},function(e,t,n){"use strict";var i=n(0).FDLayoutConstants;function CoSEConstants(){}for(var a in i)CoSEConstants[a]=i[a];CoSEConstants.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,CoSEConstants.DEFAULT_RADIAL_SEPARATION=i.DEFAULT_EDGE_LENGTH,CoSEConstants.DEFAULT_COMPONENT_SEPERATION=60,CoSEConstants.TILE=!0,CoSEConstants.TILING_PADDING_VERTICAL=10,CoSEConstants.TILING_PADDING_HORIZONTAL=10,CoSEConstants.TREE_REDUCTION_ON_INCREMENTAL=!1,e.exports=CoSEConstants},function(e,t,n){"use strict";var i=n(0).FDLayoutEdge;function CoSEEdge(e,t,n){i.call(this,e,t,n)}for(var a in CoSEEdge.prototype=Object.create(i.prototype),i)CoSEEdge[a]=i[a];e.exports=CoSEEdge},function(e,t,n){"use strict";var i=n(0).LGraph;function CoSEGraph(e,t,n){i.call(this,e,t,n)}for(var a in CoSEGraph.prototype=Object.create(i.prototype),i)CoSEGraph[a]=i[a];e.exports=CoSEGraph},function(e,t,n){"use strict";var i=n(0).LGraphManager;function CoSEGraphManager(e){i.call(this,e)}for(var a in CoSEGraphManager.prototype=Object.create(i.prototype),i)CoSEGraphManager[a]=i[a];e.exports=CoSEGraphManager},function(e,t,n){"use strict";var i=n(0).FDLayoutNode,a=n(0).IMath;function CoSENode(e,t,n,a){i.call(this,e,t,n,a)}for(var s in CoSENode.prototype=Object.create(i.prototype),i)CoSENode[s]=i[s];CoSENode.prototype.move=function(){var e=this.graphManager.getLayout();this.displacementX=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*a.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*a.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},CoSENode.prototype.propogateDisplacementToChildren=function(e,t){for(var n,i=this.getChild().getNodes(),a=0;a<i.length;a++)null==(n=i[a]).getChild()?(n.moveBy(e,t),n.displacementX+=e,n.displacementY+=t):n.propogateDisplacementToChildren(e,t)},CoSENode.prototype.setPred1=function(e){this.pred1=e},CoSENode.prototype.getPred1=function(){return pred1},CoSENode.prototype.getPred2=function(){return pred2},CoSENode.prototype.setNext=function(e){this.next=e},CoSENode.prototype.getNext=function(){return next},CoSENode.prototype.setProcessed=function(e){this.processed=e},CoSENode.prototype.isProcessed=function(){return processed},e.exports=CoSENode},function(e,t,n){"use strict";var i=n(0).FDLayout,a=n(4),s=n(3),l=n(5),u=n(2),c=n(1),h=n(0).FDLayoutConstants,d=n(0).LayoutConstants,p=n(0).Point,g=n(0).PointD,v=n(0).Layout,y=n(0).Integer,m=n(0).IGeometry,b=n(0).LGraph,x=n(0).Transform;function CoSELayout(){i.call(this),this.toBeTiled={}}for(var w in CoSELayout.prototype=Object.create(i.prototype),i)CoSELayout[w]=i[w];CoSELayout.prototype.newGraphManager=function(){var e=new a(this);return this.graphManager=e,e},CoSELayout.prototype.newGraph=function(e){return new s(null,this.graphManager,e)},CoSELayout.prototype.newNode=function(e){return new l(this.graphManager,e)},CoSELayout.prototype.newEdge=function(e){return new u(null,null,e)},CoSELayout.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.isSubLayout||(c.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=c.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=c.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=h.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=h.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=h.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},CoSELayout.prototype.layout=function(){return d.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},CoSELayout.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(c.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();t=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(e){return t.has(e)});this.graphManager.setAllNodesToApplyGravitation(n)}}else{var e=this.getFlatForest();if(e.length>0)this.positionNodesRadially(e);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var t=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(e){return t.has(e)});this.graphManager.setAllNodesToApplyGravitation(n),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},CoSELayout.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var e=new Set(this.getAllNodes()),t=this.nodesWithGravity.filter(function(t){return e.has(t)});this.graphManager.setAllNodesToApplyGravitation(t),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var n=!this.isTreeGrowing&&!this.isGrowthFinished,i=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(n,i),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},CoSELayout.prototype.getPositionsData=function(){for(var e=this.graphManager.getAllNodes(),t={},n=0;n<e.length;n++){var i=e[n].rect,a=e[n].id;t[a]={id:a,x:i.getCenterX(),y:i.getCenterY(),w:i.width,h:i.height}}return t},CoSELayout.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var e=!1;if("during"===h.ANIMATE)this.emit("layoutstarted");else{for(;!e;)e=this.tick();this.graphManager.updateBounds()}},CoSELayout.prototype.calculateNodesToApplyGravitationTo=function(){var e,t,n=[],i=this.graphManager.getGraphs(),a=i.length;for(t=0;t<a;t++)(e=i[t]).updateConnected(),e.isConnected||(n=n.concat(e.getNodes()));return n},CoSELayout.prototype.createBendpoints=function(){var e=[];e=e.concat(this.graphManager.getAllEdges());var t,n=new Set;for(t=0;t<e.length;t++){var i=e[t];if(!n.has(i)){var a=i.getSource(),s=i.getTarget();if(a==s)i.getBendpoints().push(new g),i.getBendpoints().push(new g),this.createDummyNodesForBendpoints(i),n.add(i);else{var l=[];if(l=(l=l.concat(a.getEdgeListToNode(s))).concat(s.getEdgeListToNode(a)),!n.has(l[0])){var u;if(l.length>1)for(u=0;u<l.length;u++){var c=l[u];c.getBendpoints().push(new g),this.createDummyNodesForBendpoints(c)}l.forEach(function(e){n.add(e)})}}}if(n.size==e.length)break}},CoSELayout.prototype.positionNodesRadially=function(e){for(var t=new p(0,0),n=Math.ceil(Math.sqrt(e.length)),i=0,a=0,s=0,l=new g(0,0),u=0;u<e.length;u++){u%n==0&&(s=0,a=i,0!=u&&(a+=c.DEFAULT_COMPONENT_SEPERATION),i=0);var h=e[u],y=v.findCenterOfTree(h);t.x=s,t.y=a,(l=CoSELayout.radialLayout(h,y,t)).y>i&&(i=Math.floor(l.y)),s=Math.floor(l.x+c.DEFAULT_COMPONENT_SEPERATION)}this.transform(new g(d.WORLD_CENTER_X-l.x/2,d.WORLD_CENTER_Y-l.y/2))},CoSELayout.radialLayout=function(e,t,n){var i=Math.max(this.maxDiagonalInTree(e),c.DEFAULT_RADIAL_SEPARATION);CoSELayout.branchRadialLayout(t,null,0,359,0,i);var a=b.calculateBounds(e),s=new x;s.setDeviceOrgX(a.getMinX()),s.setDeviceOrgY(a.getMinY()),s.setWorldOrgX(n.x),s.setWorldOrgY(n.y);for(var l=0;l<e.length;l++){e[l].transform(s)}var u=new g(a.getMaxX(),a.getMaxY());return s.inverseTransformPoint(u)},CoSELayout.branchRadialLayout=function(e,t,n,i,a,s){var l=(i-n+1)/2;l<0&&(l+=180);var u=(l+n)%360*m.TWO_PI/360,c=(Math.cos(u),a*Math.cos(u)),h=a*Math.sin(u);e.setCenter(c,h);var d=[],p=(d=d.concat(e.getEdges())).length;null!=t&&p--;for(var g,v=0,y=d.length,b=e.getEdgesBetween(t);b.length>1;){var x=b[0];b.splice(0,1);var w=d.indexOf(x);w>=0&&d.splice(w,1),y--,p--}g=null!=t?(d.indexOf(b[0])+1)%y:0;for(var E=Math.abs(i-n)/p,_=g;v!=p;_=++_%y){var T=d[_].getOtherEnd(e);if(T!=t){var L=(n+v*E)%360,D=(L+E)%360;CoSELayout.branchRadialLayout(T,e,L,D,a+s,s),v++}}},CoSELayout.maxDiagonalInTree=function(e){for(var t=y.MIN_VALUE,n=0;n<e.length;n++){var i=e[n].getDiagonal();i>t&&(t=i)}return t},CoSELayout.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},CoSELayout.prototype.groupZeroDegreeMembers=function(){var e=this,t={};this.memberGroups={},this.idToDummyNode={};for(var n=[],i=this.graphManager.getAllNodes(),a=0;a<i.length;a++){var s=(u=i[a]).getParent();0!==this.getNodeDegreeWithChildren(u)||null!=s.id&&this.getToBeTiled(s)||n.push(u)}for(a=0;a<n.length;a++){var u,c=(u=n[a]).getParent().id;void 0===t[c]&&(t[c]=[]),t[c]=t[c].concat(u)}Object.keys(t).forEach(function(n){if(t[n].length>1){var i="DummyCompound_"+n;e.memberGroups[i]=t[n];var a=t[n][0].getParent(),s=new l(e.graphManager);s.id=i,s.paddingLeft=a.paddingLeft||0,s.paddingRight=a.paddingRight||0,s.paddingBottom=a.paddingBottom||0,s.paddingTop=a.paddingTop||0,e.idToDummyNode[i]=s;var u=e.getGraphManager().add(e.newGraph(),s),c=a.getChild();c.add(s);for(var h=0;h<t[n].length;h++){var d=t[n][h];c.remove(d),u.add(d)}}})},CoSELayout.prototype.clearCompounds=function(){var e={},t={};this.performDFSOnCompounds();for(var n=0;n<this.compoundOrder.length;n++)t[this.compoundOrder[n].id]=this.compoundOrder[n],e[this.compoundOrder[n].id]=[].concat(this.compoundOrder[n].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[n].getChild()),this.compoundOrder[n].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(e,t)},CoSELayout.prototype.clearZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(n){var i=e.idToDummyNode[n];t[n]=e.tileNodes(e.memberGroups[n],i.paddingLeft+i.paddingRight),i.rect.width=t[n].width,i.rect.height=t[n].height})},CoSELayout.prototype.repopulateCompounds=function(){for(var e=this.compoundOrder.length-1;e>=0;e--){var t=this.compoundOrder[e],n=t.id,i=t.paddingLeft,a=t.paddingTop;this.adjustLocations(this.tiledMemberPack[n],t.rect.x,t.rect.y,i,a)}},CoSELayout.prototype.repopulateZeroDegreeMembers=function(){var e=this,t=this.tiledZeroDegreePack;Object.keys(t).forEach(function(n){var i=e.idToDummyNode[n],a=i.paddingLeft,s=i.paddingTop;e.adjustLocations(t[n],i.rect.x,i.rect.y,a,s)})},CoSELayout.prototype.getToBeTiled=function(e){var t=e.id;if(null!=this.toBeTiled[t])return this.toBeTiled[t];var n=e.getChild();if(null==n)return this.toBeTiled[t]=!1,!1;for(var i=n.getNodes(),a=0;a<i.length;a++){var s=i[a];if(this.getNodeDegree(s)>0)return this.toBeTiled[t]=!1,!1;if(null!=s.getChild()){if(!this.getToBeTiled(s))return this.toBeTiled[t]=!1,!1}else this.toBeTiled[s.id]=!1}return this.toBeTiled[t]=!0,!0},CoSELayout.prototype.getNodeDegree=function(e){e.id;for(var t=e.getEdges(),n=0,i=0;i<t.length;i++){var a=t[i];a.getSource().id!==a.getTarget().id&&(n+=1)}return n},CoSELayout.prototype.getNodeDegreeWithChildren=function(e){var t=this.getNodeDegree(e);if(null==e.getChild())return t;for(var n=e.getChild().getNodes(),i=0;i<n.length;i++){var a=n[i];t+=this.getNodeDegreeWithChildren(a)}return t},CoSELayout.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},CoSELayout.prototype.fillCompexOrderByDFS=function(e){for(var t=0;t<e.length;t++){var n=e[t];null!=n.getChild()&&this.fillCompexOrderByDFS(n.getChild().getNodes()),this.getToBeTiled(n)&&this.compoundOrder.push(n)}},CoSELayout.prototype.adjustLocations=function(e,t,n,i,a){n+=a;for(var s=t+=i,l=0;l<e.rows.length;l++){var u=e.rows[l];t=s;for(var c=0,h=0;h<u.length;h++){var d=u[h];d.rect.x=t,d.rect.y=n,t+=d.rect.width+e.horizontalPadding,d.rect.height>c&&(c=d.rect.height)}n+=c+e.verticalPadding}},CoSELayout.prototype.tileCompoundMembers=function(e,t){var n=this;this.tiledMemberPack=[],Object.keys(e).forEach(function(i){var a=t[i];n.tiledMemberPack[i]=n.tileNodes(e[i],a.paddingLeft+a.paddingRight),a.rect.width=n.tiledMemberPack[i].width,a.rect.height=n.tiledMemberPack[i].height})},CoSELayout.prototype.tileNodes=function(e,t){var n={rows:[],rowWidth:[],rowHeight:[],width:0,height:t,verticalPadding:c.TILING_PADDING_VERTICAL,horizontalPadding:c.TILING_PADDING_HORIZONTAL};e.sort(function(e,t){return e.rect.width*e.rect.height>t.rect.width*t.rect.height?-1:e.rect.width*e.rect.height<t.rect.width*t.rect.height?1:0});for(var i=0;i<e.length;i++){var a=e[i];0==n.rows.length?this.insertNodeToRow(n,a,0,t):this.canAddHorizontal(n,a.rect.width,a.rect.height)?this.insertNodeToRow(n,a,this.getShortestRowIndex(n),t):this.insertNodeToRow(n,a,n.rows.length,t),this.shiftToLastRow(n)}return n},CoSELayout.prototype.insertNodeToRow=function(e,t,n,i){var a=i;if(n==e.rows.length){e.rows.push([]),e.rowWidth.push(a),e.rowHeight.push(0)}var s=e.rowWidth[n]+t.rect.width;e.rows[n].length>0&&(s+=e.horizontalPadding),e.rowWidth[n]=s,e.width<s&&(e.width=s);var l=t.rect.height;n>0&&(l+=e.verticalPadding);var u=0;l>e.rowHeight[n]&&(u=e.rowHeight[n],e.rowHeight[n]=l,u=e.rowHeight[n]-u),e.height+=u,e.rows[n].push(t)},CoSELayout.prototype.getShortestRowIndex=function(e){for(var t=-1,n=Number.MAX_VALUE,i=0;i<e.rows.length;i++)e.rowWidth[i]<n&&(t=i,n=e.rowWidth[i]);return t},CoSELayout.prototype.getLongestRowIndex=function(e){for(var t=-1,n=Number.MIN_VALUE,i=0;i<e.rows.length;i++)e.rowWidth[i]>n&&(t=i,n=e.rowWidth[i]);return t},CoSELayout.prototype.canAddHorizontal=function(e,t,n){var i=this.getShortestRowIndex(e);if(i<0)return!0;var a=e.rowWidth[i];if(a+e.horizontalPadding+t<=e.width)return!0;var s,l,u=0;return e.rowHeight[i]<n&&i>0&&(u=n+e.verticalPadding-e.rowHeight[i]),s=e.width-a>=t+e.horizontalPadding?(e.height+u)/(a+t+e.horizontalPadding):(e.height+u)/e.width,u=n+e.verticalPadding,(l=e.width<t?(e.height+u)/t:(e.height+u)/e.width)<1&&(l=1/l),s<1&&(s=1/s),s<l},CoSELayout.prototype.shiftToLastRow=function(e){var t=this.getLongestRowIndex(e),n=e.rowWidth.length-1,i=e.rows[t],a=i[i.length-1],s=a.width+e.horizontalPadding;if(e.width-e.rowWidth[n]>s&&t!=n){i.splice(-1,1),e.rows[n].push(a),e.rowWidth[t]=e.rowWidth[t]-s,e.rowWidth[n]=e.rowWidth[n]+s,e.width=e.rowWidth[instance.getLongestRowIndex(e)];for(var l=Number.MIN_VALUE,u=0;u<i.length;u++)i[u].height>l&&(l=i[u].height);t>0&&(l+=e.verticalPadding);var c=e.rowHeight[t]+e.rowHeight[n];e.rowHeight[t]=l,e.rowHeight[n]<a.height+e.verticalPadding&&(e.rowHeight[n]=a.height+e.verticalPadding);var h=e.rowHeight[t]+e.rowHeight[n];e.height+=h-c,this.shiftToLastRow(e)}},CoSELayout.prototype.tilingPreLayout=function(){c.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},CoSELayout.prototype.tilingPostLayout=function(){c.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},CoSELayout.prototype.reduceTrees=function(){for(var e,t=[],n=!0;n;){var i=this.graphManager.getAllNodes(),a=[];n=!1;for(var s=0;s<i.length;s++)1!=(e=i[s]).getEdges().length||e.getEdges()[0].isInterGraph||null!=e.getChild()||(a.push([e,e.getEdges()[0],e.getOwner()]),n=!0);if(1==n){for(var l=[],u=0;u<a.length;u++)1==a[u][0].getEdges().length&&(l.push(a[u]),a[u][0].getOwner().remove(a[u][0]));t.push(l),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=t},CoSELayout.prototype.growTree=function(e){for(var t,n=e[e.length-1],i=0;i<n.length;i++)t=n[i],this.findPlaceforPrunedNode(t),t[2].add(t[0]),t[2].add(t[1],t[1].source,t[1].target);e.splice(e.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},CoSELayout.prototype.findPlaceforPrunedNode=function(e){var t,n,i=e[0],a=(n=i==e[1].source?e[1].target:e[1].source).startX,s=n.finishX,l=n.startY,u=n.finishY,c=[0,0,0,0];if(l>0)for(var d=a;d<=s;d++)c[0]+=this.grid[d][l-1].length+this.grid[d][l].length-1;if(s<this.grid.length-1)for(d=l;d<=u;d++)c[1]+=this.grid[s+1][d].length+this.grid[s][d].length-1;if(u<this.grid[0].length-1)for(d=a;d<=s;d++)c[2]+=this.grid[d][u+1].length+this.grid[d][u].length-1;if(a>0)for(d=l;d<=u;d++)c[3]+=this.grid[a-1][d].length+this.grid[a][d].length-1;for(var p,g,v=y.MAX_VALUE,m=0;m<c.length;m++)c[m]<v?(v=c[m],p=1,g=m):c[m]==v&&p++;if(3==p&&0==v)0==c[0]&&0==c[1]&&0==c[2]?t=1:0==c[0]&&0==c[1]&&0==c[3]?t=0:0==c[0]&&0==c[2]&&0==c[3]?t=3:0==c[1]&&0==c[2]&&0==c[3]&&(t=2);else if(2==p&&0==v){var b=Math.floor(2*Math.random());t=0==c[0]&&0==c[1]?0==b?0:1:0==c[0]&&0==c[2]?0==b?0:2:0==c[0]&&0==c[3]?0==b?0:3:0==c[1]&&0==c[2]?0==b?1:2:0==c[1]&&0==c[3]?0==b?1:3:0==b?2:3}else if(4==p&&0==v){t=b=Math.floor(4*Math.random())}else t=g;0==t?i.setCenter(n.getCenterX(),n.getCenterY()-n.getHeight()/2-h.DEFAULT_EDGE_LENGTH-i.getHeight()/2):1==t?i.setCenter(n.getCenterX()+n.getWidth()/2+h.DEFAULT_EDGE_LENGTH+i.getWidth()/2,n.getCenterY()):2==t?i.setCenter(n.getCenterX(),n.getCenterY()+n.getHeight()/2+h.DEFAULT_EDGE_LENGTH+i.getHeight()/2):i.setCenter(n.getCenterX()-n.getWidth()/2-h.DEFAULT_EDGE_LENGTH-i.getWidth()/2,n.getCenterY())},e.exports=CoSELayout},function(e,t,n){"use strict";var i={};i.layoutBase=n(0),i.CoSEConstants=n(1),i.CoSEEdge=n(2),i.CoSEGraph=n(3),i.CoSEGraphManager=n(4),i.CoSELayout=n(6),i.CoSENode=n(5),e.exports=i}])})},9676:(e,t,n)=>{"use strict";n.d(t,{diagram:()=>vh});var i=n(9466);function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _createClass(e,t,n){return t&&function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t){n&&(e=n);var i=0,F=function(){};return{s:F,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function _defineProperty$1(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,s,l,u=[],c=!0,h=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=s.call(n)).done)&&(u.push(i.value),u.length!==t);c=!0);}catch(e){h=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(h)throw a}}return u}}(e,t)||_unsupportedIterableToArray(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}var a="undefined"==typeof window?null:window,s=a?a.navigator:null;a&&a.document;var l,u,c,h,d,p,g,v,y,m,b,x,w,E,_,T,L,D,S,k,P,N,I,M,R,O,z,G,V=_typeof(""),q=_typeof({}),Y=_typeof(function(){}),X="undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement),U=function instanceStr(e){return e&&e.instanceString&&j(e.instanceString)?e.instanceString():null},H=function string(e){return null!=e&&_typeof(e)==V},j=function fn(e){return null!=e&&_typeof(e)===Y},W=function array(e){return!J(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)},K=function plainObject(e){return null!=e&&_typeof(e)===q&&!W(e)&&e.constructor===Object},Z=function number(e){return null!=e&&_typeof(e)===_typeof(1)&&!isNaN(e)},Q=function htmlElement(e){return"undefined"===X?void 0:null!=e&&e instanceof HTMLElement},J=function elementOrCollection(e){return ee(e)||te(e)},ee=function element(e){return"collection"===U(e)&&e._private.single},te=function collection(e){return"collection"===U(e)&&!e._private.single},ne=function core(e){return"core"===U(e)},re=function stylesheet(e){return"stylesheet"===U(e)},ie=function emptyString(e){return null==e||!(""!==e&&!e.match(/^\s+$/))},ae=function promise(e){return function object(e){return null!=e&&_typeof(e)===q}(e)&&j(e.then)},oe=function memoize(e,t){t||(t=function keyFn(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var n=function memoizedFn(){var i,a=arguments,s=t.apply(this,a),l=n.cache;return(i=l[s])||(i=l[s]=e.apply(this,a)),i};return n.cache={},n},se=oe(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),le=oe(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),ue=oe(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),ce=function capitalize(e){return ie(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},he=function endsWith(e,t){return e.slice(-1*t.length)===t},de="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",pe="rgb[a]?\\(("+de+"[%]?)\\s*,\\s*("+de+"[%]?)\\s*,\\s*("+de+"[%]?)(?:\\s*,\\s*("+de+"))?\\)",ge="rgb[a]?\\((?:"+de+"[%]?)\\s*,\\s*(?:"+de+"[%]?)\\s*,\\s*(?:"+de+"[%]?)(?:\\s*,\\s*(?:"+de+"))?\\)",fe="hsl[a]?\\(("+de+")\\s*,\\s*("+de+"[%])\\s*,\\s*("+de+"[%])(?:\\s*,\\s*("+de+"))?\\)",ve="hsl[a]?\\((?:"+de+")\\s*,\\s*(?:"+de+"[%])\\s*,\\s*(?:"+de+"[%])(?:\\s*,\\s*(?:"+de+"))?\\)",ye=function ascending(e,t){return e<t?-1:e>t?1:0},me=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,n=1;n<t.length;n++){var i=t[n];if(null!=i)for(var a=Object.keys(i),s=0;s<a.length;s++){var l=a[s];e[l]=i[l]}}return e},be=function color2tuple(e){return(W(e)?e:null)||function colorname2tuple(e){return xe[e.toLowerCase()]}(e)||function hex2tuple(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,n,i,a=16;return 4===e.length?(t=parseInt(e[1]+e[1],a),n=parseInt(e[2]+e[2],a),i=parseInt(e[3]+e[3],a)):(t=parseInt(e[1]+e[2],a),n=parseInt(e[3]+e[4],a),i=parseInt(e[5]+e[6],a)),[t,n,i]}}(e)||function rgb2tuple(e){var t,n=new RegExp("^"+pe+"$").exec(e);if(n){t=[];for(var i=[],a=1;a<=3;a++){var s=n[a];if("%"===s[s.length-1]&&(i[a]=!0),s=parseFloat(s),i[a]&&(s=s/100*255),s<0||s>255)return;t.push(Math.floor(s))}var l=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(l&&!u)return;var c=n[4];if(void 0!==c){if((c=parseFloat(c))<0||c>1)return;t.push(c)}}return t}(e)||function hsl2tuple(e){var t,n,i,a,s,l,u,c;function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var h=new RegExp("^"+fe+"$").exec(e);if(h){if((n=parseInt(h[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(i=parseFloat(h[2]))<0||i>100)return;if(i/=100,(a=parseFloat(h[3]))<0||a>100)return;if(a/=100,void 0!==(s=h[4])&&((s=parseFloat(s))<0||s>1))return;if(0===i)l=u=c=Math.round(255*a);else{var d=a<.5?a*(1+i):a+i-a*i,p=2*a-d;l=Math.round(255*hue2rgb(p,d,n+1/3)),u=Math.round(255*hue2rgb(p,d,n)),c=Math.round(255*hue2rgb(p,d,n-1/3))}t=[l,u,c,s]}return t}(e)},xe={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},we=function setMap(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var s=n[a];if(K(s))throw Error("Tried to set map with object key");a<n.length-1?(null==t[s]&&(t[s]={}),t=t[s]):t[s]=e.value}},Ee=function getMap(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var s=n[a];if(K(s))throw Error("Tried to get map with object key");if(null==(t=t[s]))return t}return t},_e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function requireIsObject(){if(u)return l;return u=1,l=function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}function require_root(){if(p)return d;p=1;var e=function require_freeGlobal(){if(h)return c;h=1;var e="object"==typeof _e&&_e&&_e.Object===Object&&_e;return c=e}(),t="object"==typeof self&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return d=n}function require_baseTrim(){if(x)return b;x=1;var e=function require_trimmedEndIndex(){if(m)return y;m=1;var e=/\s/;return y=function trimmedEndIndex(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n},y}(),t=/^\s+/;return b=function baseTrim(n){return n?n.slice(0,e(n)+1).replace(t,""):n},b}function require_Symbol(){if(E)return w;E=1;var e=require_root().Symbol;return w=e}function require_baseGetTag(){if(k)return S;k=1;var e=require_Symbol(),t=function require_getRawTag(){if(T)return _;T=1;var e=require_Symbol(),t=Object.prototype,n=t.hasOwnProperty,i=t.toString,a=e?e.toStringTag:void 0;return _=function getRawTag(e){var t=n.call(e,a),s=e[a];try{e[a]=void 0;var l=!0}catch(e){}var u=i.call(e);return l&&(t?e[a]=s:delete e[a]),u}}(),n=function require_objectToString(){if(D)return L;D=1;var e=Object.prototype.toString;return L=function objectToString(t){return e.call(t)}}(),i=e?e.toStringTag:void 0;return S=function baseGetTag(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?t(e):n(e)}}function requireIsSymbol(){if(M)return I;M=1;var e=require_baseGetTag(),t=function requireIsObjectLike(){return N?P:(N=1,P=function isObjectLike(e){return null!=e&&"object"==typeof e})}();return I=function isSymbol(n){return"symbol"==typeof n||t(n)&&"[object Symbol]"==e(n)}}var Ce=getDefaultExportFromCjs(function requireDebounce(){if(G)return z;G=1;var e=requireIsObject(),t=function requireNow(){if(v)return g;v=1;var e=require_root();return g=function(){return e.Date.now()}}(),n=function requireToNumber(){if(O)return R;O=1;var e=require_baseTrim(),t=requireIsObject(),n=requireIsSymbol(),i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;return R=function toNumber(u){if("number"==typeof u)return u;if(n(u))return NaN;if(t(u)){var c="function"==typeof u.valueOf?u.valueOf():u;u=t(c)?c+"":c}if("string"!=typeof u)return 0===u?u:+u;u=e(u);var h=a.test(u);return h||s.test(u)?l(u.slice(2),h?2:8):i.test(u)?NaN:+u}}(),i=Math.max,a=Math.min;return z=function debounce(s,l,u){var c,h,d,p,g,v,y=0,m=!1,b=!1,x=!0;if("function"!=typeof s)throw new TypeError("Expected a function");function invokeFunc(e){var t=c,n=h;return c=h=void 0,y=e,p=s.apply(n,t)}function shouldInvoke(e){var t=e-v;return void 0===v||t>=l||t<0||b&&e-y>=d}function timerExpired(){var e=t();if(shouldInvoke(e))return trailingEdge(e);g=setTimeout(timerExpired,function remainingWait(e){var t=l-(e-v);return b?a(t,d-(e-y)):t}(e))}function trailingEdge(e){return g=void 0,x&&c?invokeFunc(e):(c=h=void 0,p)}function debounced(){var e=t(),n=shouldInvoke(e);if(c=arguments,h=this,v=e,n){if(void 0===g)return function leadingEdge(e){return y=e,g=setTimeout(timerExpired,l),m?invokeFunc(e):p}(v);if(b)return clearTimeout(g),g=setTimeout(timerExpired,l),invokeFunc(v)}return void 0===g&&(g=setTimeout(timerExpired,l)),p}return l=n(l)||0,e(u)&&(m=!!u.leading,d=(b="maxWait"in u)?i(n(u.maxWait)||0,l):d,x="trailing"in u?!!u.trailing:x),debounced.cancel=function cancel(){void 0!==g&&clearTimeout(g),y=0,c=v=h=g=void 0},debounced.flush=function flush(){return void 0===g?p:trailingEdge(t())},debounced}}()),Te=a?a.performance:null,Le=Te&&Te.now?function(){return Te.now()}:function(){return Date.now()},De=function(){if(a){if(a.requestAnimationFrame)return function(e){a.requestAnimationFrame(e)};if(a.mozRequestAnimationFrame)return function(e){a.mozRequestAnimationFrame(e)};if(a.webkitRequestAnimationFrame)return function(e){a.webkitRequestAnimationFrame(e)};if(a.msRequestAnimationFrame)return function(e){a.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(Le())},1e3/60)}}(),Ae=function requestAnimationFrame(e){return De(e)},Se=Le,ke=9261,Pe=5381,Ne=function hashIterableInts(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke;!(t=e.next()).done;)n=65599*n+t.value|0;return n},Ie=function hashInt(e){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke)+e|0},Me=function hashIntAlt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return(t<<5)+t+e|0},Re=function combineHashesArray(e){return 2097152*e[0]+e[1]},Be=function hashArrays(e,t){return[Ie(e[0],t[0]),Me(e[1],t[1])]},Oe=function hashIntsArray(e,t){var n={value:0,done:!1},i=0,a=e.length;return Ne({next:function next(){return i<a?n.value=e[i++]:n.done=!0,n}},t)},Fe=function hashString(e,t){var n={value:0,done:!1},i=0,a=e.length;return Ne({next:function next(){return i<a?n.value=e.charCodeAt(i++):n.done=!0,n}},t)},ze=function hashStrings(){return Ge(arguments)},Ge=function hashStringsArray(e){for(var t,n=0;n<e.length;n++){var i=e[n];t=0===n?Fe(i):Fe(i,t)}return t};function rotatePosAndSkewByBox(e,t,n){if(0===n)return e;var i=(t.x1+t.x2)/2,a=(t.y1+t.y2)/2,s=t.w/t.h,l=1/s,u=function rotatePoint(e,t,n,i,a){var s=a*Math.PI/180;return{x:Math.cos(s)*(e-n)-Math.sin(s)*(t-i)+n,y:Math.sin(s)*(e-n)+Math.cos(s)*(t-i)+i}}(e.x,e.y,i,a,n),c=function movePointByBoxAspect(e,t,n,i,a,s){return{x:(e-n)*a+n,y:(t-i)*s+i}}(u.x,u.y,i,a,s,l);return{x:c.x,y:c.y}}var Ve=!0,qe=null!=console.warn,Ye=null!=console.trace,Xe=Number.MAX_SAFE_INTEGER||9007199254740991,Ue=function trueify(){return!0},He=function falsify(){return!1},je=function zeroify(){return 0},We=function noop(){},$e=function error(e){throw new Error(e)},Ke=function warnings(e){if(void 0===e)return Ve;Ve=!!e},Ze=function warn(e){Ke()&&(qe?console.warn(e):(console.log(e),Ye&&console.trace()))},Qe=function copy(e){return null==e?e:W(e)?e.slice():K(e)?function clone(e){return me({},e)}(e):e},Je=function uuid(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},et={},tt=function staticEmptyObject(){return et},nt=function defaults(e){var t=Object.keys(e);return function(n){for(var i={},a=0;a<t.length;a++){var s=t[a],l=null==n?void 0:n[s];i[s]=void 0===l?e[s]:l}return i}},rt=function removeFromArray(e,t,n){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1)},it=function clearArray(e){e.splice(0,e.length)},at=function getPrefixedProperty(e,t,n){return n&&(t=ue(n,t)),e[t]},ot=function setPrefixedProperty(e,t,n,i){n&&(t=ue(n,t)),e[t]=i},st="undefined"!=typeof Map?Map:function(){return _createClass(function ObjectMap(){_classCallCheck(this,ObjectMap),this._obj={}},[{key:"set",value:function set(e,t){return this._obj[e]=t,this}},{key:"delete",value:function _delete(e){return this._obj[e]=void 0,this}},{key:"clear",value:function clear(){this._obj={}}},{key:"has",value:function has(e){return void 0!==this._obj[e]}},{key:"get",value:function get(e){return this._obj[e]}}])}(),lt=function(){return _createClass(function ObjectSet(e){if(_classCallCheck(this,ObjectSet),this._obj=Object.create(null),this.size=0,null!=e){var t;t=null!=e.instanceString&&e.instanceString()===this.instanceString()?e.toArray():e;for(var n=0;n<t.length;n++)this.add(t[n])}},[{key:"instanceString",value:function instanceString(){return"set"}},{key:"add",value:function add(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function _delete(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function clear(){this._obj=Object.create(null)}},{key:"has",value:function has(e){return 1===this._obj[e]}},{key:"toArray",value:function toArray(){var e=this;return Object.keys(this._obj).filter(function(t){return e.has(t)})}},{key:"forEach",value:function forEach(e,t){return this.toArray().forEach(e,t)}}])}(),ut="undefined"!==("undefined"==typeof Set?"undefined":_typeof(Set))?Set:lt,ct=function Element(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==e&&void 0!==t&&ne(e)){var i=t.group;if(null==i&&(i=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"===i||"edges"===i){this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===i:!!t.pannable,active:!1,classes:new ut,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==a.position.x&&(a.position.x=0),null==a.position.y&&(a.position.y=0),t.renderedPosition){var s=t.renderedPosition,l=e.pan(),u=e.zoom();a.position={x:(s.x-l.x)/u,y:(s.y-l.y)/u}}var c=[];W(t.classes)?c=t.classes:H(t.classes)&&(c=t.classes.split(/\s+/));for(var h=0,d=c.length;h<d;h++){var p=c[h];p&&""!==p&&a.classes.add(p)}this.createEmitter(),(void 0===n||n)&&this.restore();var g=t.style||t.css;g&&(Ze("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(g))}else $e("An element must be of type `nodes` or `edges`; you specified `"+i+"`")}else $e("An element must have a core reference and parameters set")},ht=function defineSearch(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function searchFn(t,n,i){var a;K(t)&&!J(t)&&(t=(a=t).roots||a.root,n=a.visit,i=a.directed),i=2!==arguments.length||j(n)?i:n,n=j(n)?n:function(){};for(var s,l=this._private.cy,u=t=H(t)?this.filter(t):t,c=[],h=[],d={},p={},g={},v=0,y=this.byGroup(),m=y.nodes,b=y.edges,x=0;x<u.length;x++){var w=u[x],E=w.id();w.isNode()&&(c.unshift(w),e.bfs&&(g[E]=!0,h.push(w)),p[E]=0)}for(var _,T=function _loop(){var t=e.bfs?c.shift():c.pop(),a=t.id();if(e.dfs){if(g[a])return 0;g[a]=!0,h.push(t)}var l,u=p[a],y=d[a],x=null!=y?y.source():null,w=null!=y?y.target():null,E=null==y?void 0:t.same(x)?w[0]:x[0];if(!0===(l=n(t,y,E,v++,u)))return s=t,1;if(!1===l)return 1;for(var _=t.connectedEdges().filter(function(e){return(!i||e.source().same(t))&&b.has(e)}),T=0;T<_.length;T++){var L=_[T],D=L.connectedNodes().filter(function(e){return!e.same(t)&&m.has(e)}),S=D.id();0===D.length||g[S]||(D=D[0],c.push(D),e.bfs&&(g[S]=!0,h.push(D)),d[S]=L,p[S]=p[a]+1)}};0!==c.length&&(0===(_=T())||1!==_););for(var L=l.collection(),D=0;D<h.length;D++){var S=h[D],k=d[S.id()];null!=k&&L.push(k),L.push(S)}return{path:l.collection(L),found:l.collection(s)}}},dt={breadthFirstSearch:ht({bfs:!0}),depthFirstSearch:ht({dfs:!0})};dt.bfs=dt.breadthFirstSearch,dt.dfs=dt.depthFirstSearch;var pt,gt,ft,vt={exports:{}},yt=vt.exports;function requireHeap$1(){return pt||(pt=1,e=vt,function(){var t,n,i,a,s,l,u,c,h,d,p,g,v,y,m;i=Math.floor,d=Math.min,n=function(e,t){return e<t?-1:e>t?1:0},h=function(e,t,a,s,l){var u;if(null==a&&(a=0),null==l&&(l=n),a<0)throw new Error("lo must be non-negative");for(null==s&&(s=e.length);a<s;)l(t,e[u=i((a+s)/2)])<0?s=u:a=u+1;return[].splice.apply(e,[a,a-a].concat(t)),t},l=function(e,t,i){return null==i&&(i=n),e.push(t),y(e,0,e.length-1,i)},s=function(e,t){var i,a;return null==t&&(t=n),i=e.pop(),e.length?(a=e[0],e[0]=i,m(e,0,t)):a=i,a},c=function(e,t,i){var a;return null==i&&(i=n),a=e[0],e[0]=t,m(e,0,i),a},u=function(e,t,i){var a;return null==i&&(i=n),e.length&&i(e[0],t)<0&&(t=(a=[e[0],t])[0],e[0]=a[1],m(e,0,i)),t},a=function(e,t){var a,s,l,u,c,h;for(null==t&&(t=n),c=[],s=0,l=(u=function(){h=[];for(var t=0,n=i(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)h.push(t);return h}.apply(this).reverse()).length;s<l;s++)a=u[s],c.push(m(e,a,t));return c},v=function(e,t,i){var a;if(null==i&&(i=n),-1!==(a=e.indexOf(t)))return y(e,0,a,i),m(e,a,i)},p=function(e,t,i){var s,l,c,h,d;if(null==i&&(i=n),!(l=e.slice(0,t)).length)return l;for(a(l,i),c=0,h=(d=e.slice(t)).length;c<h;c++)s=d[c],u(l,s,i);return l.sort(i).reverse()},g=function(e,t,i){var l,u,c,p,g,v,y,m,b;if(null==i&&(i=n),10*t<=e.length){if(!(c=e.slice(0,t).sort(i)).length)return c;for(u=c[c.length-1],p=0,v=(y=e.slice(t)).length;p<v;p++)i(l=y[p],u)<0&&(h(c,l,0,null,i),c.pop(),u=c[c.length-1]);return c}for(a(e,i),b=[],g=0,m=d(t,e.length);0<=m?g<m:g>m;0<=m?++g:--g)b.push(s(e,i));return b},y=function(e,t,i,a){var s,l,u;for(null==a&&(a=n),s=e[i];i>t&&a(s,l=e[u=i-1>>1])<0;)e[i]=l,i=u;return e[i]=s},m=function(e,t,i){var a,s,l,u,c;for(null==i&&(i=n),s=e.length,c=t,l=e[t],a=2*t+1;a<s;)(u=a+1)<s&&!(i(e[a],e[u])<0)&&(a=u),e[t]=e[a],a=2*(t=a)+1;return e[t]=l,y(e,c,t,i)},t=function(){function Heap(e){this.cmp=null!=e?e:n,this.nodes=[]}return Heap.push=l,Heap.pop=s,Heap.replace=c,Heap.pushpop=u,Heap.heapify=a,Heap.updateItem=v,Heap.nlargest=p,Heap.nsmallest=g,Heap.prototype.push=function(e){return l(this.nodes,e,this.cmp)},Heap.prototype.pop=function(){return s(this.nodes,this.cmp)},Heap.prototype.peek=function(){return this.nodes[0]},Heap.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},Heap.prototype.replace=function(e){return c(this.nodes,e,this.cmp)},Heap.prototype.pushpop=function(e){return u(this.nodes,e,this.cmp)},Heap.prototype.heapify=function(){return a(this.nodes,this.cmp)},Heap.prototype.updateItem=function(e){return v(this.nodes,e,this.cmp)},Heap.prototype.clear=function(){return this.nodes=[]},Heap.prototype.empty=function(){return 0===this.nodes.length},Heap.prototype.size=function(){return this.nodes.length},Heap.prototype.clone=function(){var e;return(e=new Heap).nodes=this.nodes.slice(0),e},Heap.prototype.toArray=function(){return this.nodes.slice(0)},Heap.prototype.insert=Heap.prototype.push,Heap.prototype.top=Heap.prototype.peek,Heap.prototype.front=Heap.prototype.peek,Heap.prototype.has=Heap.prototype.contains,Heap.prototype.copy=Heap.prototype.clone,Heap}(),e.exports=t}.call(yt)),vt.exports;var e}var mt,bt=getDefaultExportFromCjs(function requireHeap(){return ft?gt:(ft=1,gt=requireHeap$1())}()),xt=nt({root:null,weight:function weight(e){return 1},directed:!1}),wt={dijkstra:function dijkstra(e){if(!K(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=xt(e),i=n.root,a=n.weight,s=n.directed,l=this,u=a,c=H(i)?this.filter(i)[0]:i[0],h={},d={},p={},g=this.byGroup(),v=g.nodes,y=g.edges;y.unmergeBy(function(e){return e.isLoop()});for(var m=function getDist(e){return h[e.id()]},b=function setDist(e,t){h[e.id()]=t,x.updateItem(e)},x=new bt(function(e,t){return m(e)-m(t)}),w=0;w<v.length;w++){var E=v[w];h[E.id()]=E.same(c)?0:1/0,x.push(E)}for(var _=function distBetween(e,t){for(var n,i=(s?e.edgesTo(t):e.edgesWith(t)).intersect(y),a=1/0,l=0;l<i.length;l++){var c=i[l],h=u(c);(h<a||!n)&&(a=h,n=c)}return{edge:n,dist:a}};x.size()>0;){var T=x.pop(),L=m(T),D=T.id();if(p[D]=L,L!==1/0)for(var S=T.neighborhood().intersect(v),k=0;k<S.length;k++){var P=S[k],N=P.id(),I=_(T,P),M=L+I.dist;M<m(P)&&(b(P,M),d[N]={node:T,edge:I.edge})}}return{distanceTo:function distanceTo(e){var t=H(e)?v.filter(e)[0]:e[0];return p[t.id()]},pathTo:function pathTo(e){var t=H(e)?v.filter(e)[0]:e[0],n=[],i=t,a=i.id();if(t.length>0)for(n.unshift(t);d[a];){var s=d[a];n.unshift(s.edge),n.unshift(s.node),a=(i=s.node).id()}return l.spawn(n)}}}},Et={kruskal:function kruskal(e){e=e||function(e){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,a=n.length,s=new Array(a),l=n,u=function findSetIndex(e){for(var t=0;t<s.length;t++){if(s[t].has(e))return t}},c=0;c<a;c++)s[c]=this.spawn(n[c]);for(var h=i.sort(function(t,n){return e(t)-e(n)}),d=0;d<h.length;d++){var p=h[d],g=p.source()[0],v=p.target()[0],y=u(g),m=u(v),b=s[y],x=s[m];y!==m&&(l.merge(p),b.merge(x),s.splice(m,1))}return l}},_t=nt({root:null,goal:null,weight:function weight(e){return 1},heuristic:function heuristic(e){return 0},directed:!1}),Ct={aStar:function aStar(e){var t=this.cy(),n=_t(e),i=n.root,a=n.goal,s=n.heuristic,l=n.directed,u=n.weight;i=t.collection(i)[0],a=t.collection(a)[0];var c,h,d=i.id(),p=a.id(),g={},v={},y={},m=new bt(function(e,t){return v[e.id()]-v[t.id()]}),b=new ut,x={},w={},E=function addToOpenSet(e,t){m.push(e),b.add(t)},_=function popFromOpenSet(){c=m.pop(),h=c.id(),b.delete(h)},T=function isInOpenSet(e){return b.has(e)};E(i,d),g[d]=0,v[d]=s(i);for(var L=0;m.size()>0;){if(_(),L++,h===p){for(var D=[],S=a,k=p,P=w[k];D.unshift(S),null!=P&&D.unshift(P),null!=(S=x[k]);)P=w[k=S.id()];return{found:!0,distance:g[h],path:this.spawn(D),steps:L}}y[h]=!0;for(var N=c._private.edges,I=0;I<N.length;I++){var M=N[I];if(this.hasElementWithId(M.id())&&(!l||M.data("source")===h)){var R=M.source(),O=M.target(),z=R.id()!==h?R:O,G=z.id();if(this.hasElementWithId(G)&&!y[G]){var V=g[h]+u(M);T(G)?V<g[G]&&(g[G]=V,v[G]=V+s(z),x[G]=c,w[G]=M):(g[G]=V,v[G]=V+s(z),E(z,G),x[G]=c,w[G]=M)}}}}return{found:!1,distance:void 0,path:void 0,steps:L}}},Tt=nt({weight:function weight(e){return 1},directed:!1}),Lt={floydWarshall:function floydWarshall(e){for(var t=this.cy(),n=Tt(e),i=n.weight,a=n.directed,s=i,l=this.byGroup(),u=l.nodes,c=l.edges,h=u.length,d=h*h,p=function indexOf(e){return u.indexOf(e)},g=function atIndex(e){return u[e]},v=new Array(d),y=0;y<d;y++){var m=y%h,b=(y-m)/h;v[y]=b===m?0:1/0}for(var x=new Array(d),w=new Array(d),E=0;E<c.length;E++){var _=c[E],T=_.source()[0],L=_.target()[0];if(T!==L){var D=p(T),S=p(L),k=D*h+S,P=s(_);if(v[k]>P&&(v[k]=P,x[k]=S,w[k]=_),!a){var N=S*h+D;!a&&v[N]>P&&(v[N]=P,x[N]=D,w[N]=_)}}}for(var I=0;I<h;I++)for(var M=0;M<h;M++)for(var R=M*h+I,O=0;O<h;O++){var z=M*h+O,G=I*h+O;v[R]+v[G]<v[z]&&(v[z]=v[R]+v[G],x[z]=x[R])}var V=function indexOfArgEle(e){return p(function getArgEle(e){return(H(e)?t.filter(e):e)[0]}(e))},q={distance:function distance(e,t){var n=V(e),i=V(t);return v[n*h+i]},path:function path(e,n){var i=V(e),a=V(n),s=g(i);if(i===a)return s.collection();if(null==x[i*h+a])return t.collection();var l,path=t.collection(),u=i;for(path.merge(s);i!==a;)u=i,i=x[i*h+a],l=w[u*h+i],path.merge(l),path.merge(g(i));return path}};return q}},Dt=nt({weight:function weight(e){return 1},directed:!1,root:null}),At={bellmanFord:function bellmanFord(e){var t=this,n=Dt(e),i=n.weight,a=n.directed,s=n.root,l=i,u=this,c=this.cy(),h=this.byGroup(),d=h.edges,p=h.nodes,g=p.length,v=new st,y=!1,m=[];s=c.collection(s)[0],d.unmergeBy(function(e){return e.isLoop()});for(var b=d.length,x=function getInfo(e){var t=v.get(e.id());return t||(t={},v.set(e.id(),t)),t},w=function getNodeFromTo(e){return(H(e)?c.$(e):e)[0]},E=0;E<g;E++){var _=p[E],T=x(_);_.same(s)?T.dist=0:T.dist=1/0,T.pred=null,T.edge=null}for(var L=!1,D=function checkForEdgeReplacement(e,t,n,i,a,s){var l=i.dist+s;l<a.dist&&!n.same(i.edge)&&(a.dist=l,a.pred=e,a.edge=n,L=!0)},S=1;S<g;S++){L=!1;for(var k=0;k<b;k++){var P=d[k],N=P.source(),I=P.target(),M=l(P),R=x(N),O=x(I);D(N,0,P,R,O,M),a||D(I,0,P,O,R,M)}if(!L)break}if(L)for(var z=[],G=0;G<b;G++){var V=d[G],q=V.source(),Y=V.target(),X=l(V),U=x(q).dist,j=x(Y).dist;if(U+X<j||!a&&j+X<U){if(y||(Ze("Graph contains a negative weight cycle for Bellman-Ford"),y=!0),!1===e.findNegativeWeightCycles)break;var W=[];U+X<j&&W.push(q),!a&&j+X<U&&W.push(Y);for(var K=W.length,Z=0;Z<K;Z++){var Q=W[Z],J=[Q];J.push(x(Q).edge);for(var ee=x(Q).pred;-1===J.indexOf(ee);)J.push(ee),J.push(x(ee).edge),ee=x(ee).pred;for(var te=(J=J.slice(J.indexOf(ee)))[0].id(),ne=0,re=2;re<J.length;re+=2)J[re].id()<te&&(te=J[re].id(),ne=re);(J=J.slice(ne).concat(J.slice(0,ne))).push(J[0]);var ie=J.map(function(e){return e.id()}).join(",");-1===z.indexOf(ie)&&(m.push(u.spawn(J)),z.push(ie))}}}return{distanceTo:function distanceTo(e){return x(w(e)).dist},pathTo:function pathTo(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,i=[],a=w(e);;){if(null==a)return t.spawn();var l=x(a),c=l.edge,h=l.pred;if(i.unshift(a[0]),a.same(n)&&i.length>0)break;null!=c&&i.unshift(c),a=h}return u.spawn(i)},hasNegativeWeightCycle:y,negativeWeightCycles:m}}},St=Math.sqrt(2),kt=function collapse(e,t,n){0===n.length&&$e("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],a=i[1],s=i[2],l=t[a],u=t[s],c=n,h=c.length-1;h>=0;h--){var d=c[h],p=d[1],g=d[2];(t[p]===l&&t[g]===u||t[p]===u&&t[g]===l)&&c.splice(h,1)}for(var v=0;v<c.length;v++){var y=c[v];y[1]===u?(c[v]=y.slice(),c[v][1]=l):y[2]===u&&(c[v]=y.slice(),c[v][2]=l)}for(var m=0;m<t.length;m++)t[m]===u&&(t[m]=l);return c},Pt=function contractUntil(e,t,n,i){for(;n>i;){var a=Math.floor(Math.random()*t.length);t=kt(a,e,t),n--}return t},Nt={kargerStein:function kargerStein(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy(function(e){return e.isLoop()});var a=n.length,s=i.length,l=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),u=Math.floor(a/St);if(!(a<2)){for(var c=[],h=0;h<s;h++){var d=i[h];c.push([h,n.indexOf(d.source()),n.indexOf(d.target())])}for(var p=1/0,g=[],v=new Array(a),y=new Array(a),m=new Array(a),b=function copyNodesMap(e,t){for(var n=0;n<a;n++)t[n]=e[n]},x=0;x<=l;x++){for(var w=0;w<a;w++)y[w]=w;var E=Pt(y,c.slice(),a,u),_=E.slice();b(y,m);var T=Pt(y,E,u,2),L=Pt(m,_,u,2);T.length<=L.length&&T.length<p?(p=T.length,g=T,b(y,v)):L.length<=T.length&&L.length<p&&(p=L.length,g=L,b(m,v))}for(var D=this.spawn(g.map(function(e){return i[e[0]]})),S=this.spawn(),k=this.spawn(),P=v[0],N=0;N<v.length;N++){var I=v[N],M=n[N];I===P?S.merge(M):k.merge(M)}var R=function constructComponent(t){var n=e.spawn();return t.forEach(function(t){n.merge(t),t.connectedEdges().forEach(function(t){e.contains(t)&&!D.contains(t)&&n.merge(t)})}),n},O=[R(S),R(k)];return{cut:D,components:O,partition1:S,partition2:k}}$e("At least 2 nodes are required for Karger-Stein algorithm")}},It=function modelToRenderedPosition(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},Mt=function renderedToModelPosition(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},Rt=function array2point(e){return{x:e[0],y:e[1]}},Bt=function getAngleFromDisp(e,t){return Math.atan2(t,e)-Math.PI/2},Ot=Math.log2||function(e){return Math.log(e)/Math.log(2)},Ft=function signum(e){return e>0?1:e<0?-1:0},zt=function dist(e,t){return Math.sqrt(Gt(e,t))},Gt=function sqdist(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},Vt=function inPlaceSumNormalize(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var a=0;a<t;a++)e[a]=e[a]/n;return e},qt=function qbezierAt(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},Yt=function qbezierPtAt(e,t,n,i){return{x:qt(e.x,t.x,n.x,i),y:qt(e.y,t.y,n.y,i)}},Xt=function bound(e,t,n){return Math.max(e,Math.min(n,t))},Ut=function makeBoundingBox(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},Ht=function updateBoundingBox(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},jt=function expandBoundingBoxByPoint(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Wt=function expandBoundingBox(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},$t=function expandBoundingBoxSides(e){var t,n,i,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===s.length)t=n=i=a=s[0];else if(2===s.length)t=i=s[0],a=n=s[1];else if(4===s.length){var l=_slicedToArray(s,4);t=l[0],n=l[1],i=l[2],a=l[3]}return e.x1-=a,e.x2+=n,e.y1-=t,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Kt=function assignBoundingBox(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Zt=function boundingBoxesIntersect(e,t){return!(e.x1>t.x2)&&(!(t.x1>e.x2)&&(!(e.x2<t.x1)&&(!(t.x2<e.x1)&&(!(e.y2<t.y1)&&(!(t.y2<e.y1)&&(!(e.y1>t.y2)&&!(t.y1>e.y2)))))))},Qt=function inBoundingBox(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},Jt=function pointInBoundingBox(e,t){return Qt(e,t.x,t.y)},en=function boundingBoxInBoundingBox(e,t){return Qt(e,t.x1,t.y1)&&Qt(e,t.x2,t.y2)},tn=null!==(mt=Math.hypot)&&void 0!==mt?mt:function(e,t){return Math.sqrt(e*e+t*t)};function miterBox(e,t,n,i,a,s){var l=function inflatePolygon(e,t){if(e.length<3)throw new Error("Need at least 3 vertices");var n=function add(e,t){return{x:e.x+t.x,y:e.y+t.y}},i=function sub(e,t){return{x:e.x-t.x,y:e.y-t.y}},a=function scale(e,t){return{x:e.x*t,y:e.y*t}},s=function cross(e,t){return e.x*t.y-e.y*t.x},l=function normalize(e){var t=tn(e.x,e.y);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},u=function intersectLines(e,t,l,u){var c=i(t,e),h=i(u,l),d=s(c,h);if(Math.abs(d)<1e-9)return n(e,a(c,.5));var p=s(i(l,e),h)/d;return n(e,a(c,p))},c=e.map(function(e){return{x:e.x,y:e.y}});(function signedArea(e){for(var t=0,n=0;n<e.length;n++){var i=e[n],a=e[(n+1)%e.length];t+=i.x*a.y-a.x*i.y}return t/2})(c)<0&&c.reverse();for(var h=c.length,d=[],p=0;p<h;p++){var g=c[p],v=c[(p+1)%h],y=i(v,g),m=l({x:y.y,y:-y.x});d.push(m)}for(var b=d.map(function(e,i){return{p1:n(c[i],a(e,t)),p2:n(c[(i+1)%h],a(e,t))}}),x=[],w=0;w<h;w++){var E=b[(w-1+h)%h],_=b[w],T=u(E.p1,E.p2,_.p1,_.p2);x.push(T)}return x}(mn(e,t,n,i,a),s),u=Ut();return l.forEach(function(e){return jt(u,e.x,e.y)}),u}var nn=function roundRectangleIntersectLine(e,t,n,i,a,s,l){var u,c,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",d="auto"===h?Cn(a,s):h,p=a/2,g=s/2,v=(d=Math.min(d,p,g))!==p,y=d!==g;if(v){var m=i-g-l;if((u=yn(e,t,n,i,n-p+d-l,m,n+p-d+l,m,!1)).length>0)return u}if(y){var b=n+p+l;if((u=yn(e,t,n,i,b,i-g+d-l,b,i+g-d+l,!1)).length>0)return u}if(v){var x=i+g+l;if((u=yn(e,t,n,i,n-p+d-l,x,n+p-d+l,x,!1)).length>0)return u}if(y){var w=n-p-l;if((u=yn(e,t,n,i,w,i-g+d-l,w,i+g-d+l,!1)).length>0)return u}var E=n-p+d,_=i-g+d;if((c=gn(e,t,n,i,E,_,d+l)).length>0&&c[0]<=E&&c[1]<=_)return[c[0],c[1]];var T=n+p-d,L=i-g+d;if((c=gn(e,t,n,i,T,L,d+l)).length>0&&c[0]>=T&&c[1]<=L)return[c[0],c[1]];var D=n+p-d,S=i+g-d;if((c=gn(e,t,n,i,D,S,d+l)).length>0&&c[0]>=D&&c[1]>=S)return[c[0],c[1]];var k=n-p+d,P=i+g-d;return(c=gn(e,t,n,i,k,P,d+l)).length>0&&c[0]<=k&&c[1]>=P?[c[0],c[1]]:[]},rn=function inLineVicinity(e,t,n,i,a,s,l){var u=l,c=Math.min(n,a),h=Math.max(n,a),d=Math.min(i,s),p=Math.max(i,s);return c-u<=e&&e<=h+u&&d-u<=t&&t<=p+u},an=function inBezierVicinity(e,t,n,i,a,s,l,u,c){var h=Math.min(n,l,a)-c,d=Math.max(n,l,a)+c,p=Math.min(i,u,s)-c,g=Math.max(i,u,s)+c;return!(e<h||e>d||t<p||t>g)},sn=function sqdistToQuadraticBezier(e,t,n,i,a,s,l,u){var c=[];!function solveCubic(e,t,n,i,a){var s,l,u,c,h,d,p,g;0===e&&(e=1e-5),u=-27*(i/=e)+(t/=e)*(9*(n/=e)-t*t*2),s=(l=(3*n-t*t)/9)*l*l+(u/=54)*u,a[1]=0,p=t/3,s>0?(h=(h=u+Math.sqrt(s))<0?-Math.pow(-h,1/3):Math.pow(h,1/3),d=(d=u-Math.sqrt(s))<0?-Math.pow(-d,1/3):Math.pow(d,1/3),a[0]=-p+h+d,p+=(h+d)/2,a[4]=a[2]=-p,p=Math.sqrt(3)*(-d+h)/2,a[3]=p,a[5]=-p):(a[5]=a[3]=0,0===s?(g=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),a[0]=2*g-p,a[4]=a[2]=-(g+p)):(c=(l=-l)*l*l,c=Math.acos(u/Math.sqrt(c)),g=2*Math.sqrt(l),a[0]=-p+g*Math.cos(c/3),a[2]=-p+g*Math.cos((c+2*Math.PI)/3),a[4]=-p+g*Math.cos((c+4*Math.PI)/3)))}(1*n*n-4*n*a+2*n*l+4*a*a-4*a*l+l*l+i*i-4*i*s+2*i*u+4*s*s-4*s*u+u*u,9*n*a-3*n*n-3*n*l-6*a*a+3*a*l+9*i*s-3*i*i-3*i*u-6*s*s+3*s*u,3*n*n-6*n*a+n*l-n*e+2*a*a+2*a*e-l*e+3*i*i-6*i*s+i*u-i*t+2*s*s+2*s*t-u*t,1*n*a-n*n+n*e-a*e+i*s-i*i+i*t-s*t,c);for(var h=[],d=0;d<6;d+=2)Math.abs(c[d+1])<1e-7&&c[d]>=0&&c[d]<=1&&h.push(c[d]);h.push(1),h.push(0);for(var p,g,v,y=-1,m=0;m<h.length;m++)p=Math.pow(1-h[m],2)*n+2*(1-h[m])*h[m]*a+h[m]*h[m]*l,g=Math.pow(1-h[m],2)*i+2*(1-h[m])*h[m]*s+h[m]*h[m]*u,v=Math.pow(p-e,2)+Math.pow(g-t,2),y>=0?v<y&&(y=v):y=v;return y},ln=function sqdistToFiniteLine(e,t,n,i,a,s){var l=[e-n,t-i],u=[a-n,s-i],c=u[0]*u[0]+u[1]*u[1],h=l[0]*l[0]+l[1]*l[1],d=l[0]*u[0]+l[1]*u[1],p=d*d/c;return d<0?h:p>c?(e-a)*(e-a)+(t-s)*(t-s):h-p},un=function pointInsidePolygonPoints(e,t,n){for(var i,a,s,l,u=0,c=0;c<n.length/2;c++)if(i=n[2*c],a=n[2*c+1],c+1<n.length/2?(s=n[2*(c+1)],l=n[2*(c+1)+1]):(s=n[2*(c+1-n.length/2)],l=n[2*(c+1-n.length/2)+1]),i==e&&s==e);else{if(!(i>=e&&e>=s||i<=e&&e<=s))continue;(e-i)/(s-i)*(l-a)+a>t&&u++}return u%2!=0},cn=function pointInsidePolygon(e,t,n,i,a,s,l,u,c){var h,d=new Array(n.length);null!=u[0]?(h=Math.atan(u[1]/u[0]),u[0]<0?h+=Math.PI/2:h=-h-Math.PI/2):h=u;for(var p,g=Math.cos(-h),v=Math.sin(-h),y=0;y<d.length/2;y++)d[2*y]=s/2*(n[2*y]*g-n[2*y+1]*v),d[2*y+1]=l/2*(n[2*y+1]*g+n[2*y]*v),d[2*y]+=i,d[2*y+1]+=a;if(c>0){var m=dn(d,-c);p=hn(m)}else p=d;return un(e,t,p)},hn=function joinLines(e){for(var t,n,i,a,s,l,u,c,h=new Array(e.length/2),d=0;d<e.length/4;d++){t=e[4*d],n=e[4*d+1],i=e[4*d+2],a=e[4*d+3],d<e.length/4-1?(s=e[4*(d+1)],l=e[4*(d+1)+1],u=e[4*(d+1)+2],c=e[4*(d+1)+3]):(s=e[0],l=e[1],u=e[2],c=e[3]);var p=yn(t,n,i,a,s,l,u,c,!0);h[2*d]=p[0],h[2*d+1]=p[1]}return h},dn=function expandPolygon(e,t){for(var n,i,a,s,l=new Array(2*e.length),u=0;u<e.length/2;u++){n=e[2*u],i=e[2*u+1],u<e.length/2-1?(a=e[2*(u+1)],s=e[2*(u+1)+1]):(a=e[0],s=e[1]);var c=s-i,h=-(a-n),d=Math.sqrt(c*c+h*h),p=c/d,g=h/d;l[4*u]=n+p*t,l[4*u+1]=i+g*t,l[4*u+2]=a+p*t,l[4*u+3]=s+g*t}return l},pn=function checkInEllipse(e,t,n,i,a,s,l){return e-=a,t-=s,(e/=n/2+l)*e+(t/=i/2+l)*t<=1},gn=function intersectLineCircle(e,t,n,i,a,s,l){var u=[n-e,i-t],c=[e-a,t-s],h=u[0]*u[0]+u[1]*u[1],d=2*(c[0]*u[0]+c[1]*u[1]),p=d*d-4*h*(c[0]*c[0]+c[1]*c[1]-l*l);if(p<0)return[];var g=(-d+Math.sqrt(p))/(2*h),v=(-d-Math.sqrt(p))/(2*h),y=Math.min(g,v),m=Math.max(g,v),b=[];if(y>=0&&y<=1&&b.push(y),m>=0&&m<=1&&b.push(m),0===b.length)return[];var x=b[0]*u[0]+e,w=b[0]*u[1]+t;return b.length>1?b[0]==b[1]?[x,w]:[x,w,b[1]*u[0]+e,b[1]*u[1]+t]:[x,w]},vn=function midOfThree(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},yn=function finiteLinesIntersect(e,t,n,i,a,s,l,u,c){var h=e-a,d=n-e,p=l-a,g=t-s,v=i-t,y=u-s,m=p*g-y*h,b=d*g-v*h,x=y*d-p*v;if(0!==x){var w=m/x,E=b/x,_=-.001;return _<=w&&w<=1.001&&_<=E&&E<=1.001||c?[e+w*d,t+w*v]:[]}return 0===m||0===b?vn(e,n,l)===l?[l,u]:vn(e,n,a)===a?[a,s]:vn(a,l,n)===n?[n,i]:[]:[]},mn=function transformPoints(e,t,n,i,a){var s=[],l=i/2,u=a/2,c=t,h=n;s.push({x:c+l*e[0],y:h+u*e[1]});for(var d=1;d<e.length/2;d++)s.push({x:c+l*e[2*d],y:h+u*e[2*d+1]});return s},bn=function polygonIntersectLine(e,t,n,i,a,s,l,u){var c,h,d,p,g,v,y=[],m=new Array(n.length),b=!0;if(null==s&&(b=!1),b){for(var x=0;x<m.length/2;x++)m[2*x]=n[2*x]*s+i,m[2*x+1]=n[2*x+1]*l+a;if(u>0){var w=dn(m,-u);h=hn(w)}else h=m}else h=n;for(var E=0;E<h.length/2;E++)d=h[2*E],p=h[2*E+1],E<h.length/2-1?(g=h[2*(E+1)],v=h[2*(E+1)+1]):(g=h[0],v=h[1]),0!==(c=yn(e,t,i,a,d,p,g,v)).length&&y.push(c[0],c[1]);return y},xn=function shortenIntersection(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=(a-n)/a;return s<0&&(s=1e-5),[t[0]+s*i[0],t[1]+s*i[1]]},wn=function generateUnitNgonPointsFitToSquare(e,t){var n=_n(e,t);return n=En(n)},En=function fitPolygonToSquare(e){for(var t,n,i=e.length/2,a=1/0,s=1/0,l=-1/0,u=-1/0,c=0;c<i;c++)t=e[2*c],n=e[2*c+1],a=Math.min(a,t),l=Math.max(l,t),s=Math.min(s,n),u=Math.max(u,n);for(var h=2/(l-a),d=2/(u-s),p=0;p<i;p++)t=e[2*p]=e[2*p]*h,n=e[2*p+1]=e[2*p+1]*d,a=Math.min(a,t),l=Math.max(l,t),s=Math.min(s,n),u=Math.max(u,n);if(s<-1)for(var g=0;g<i;g++)n=e[2*g+1]=e[2*g+1]+(-1-s);return e},_n=function generateUnitNgonPoints(e,t){var n=1/e*2*Math.PI,i=e%2==0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var a,s=new Array(2*e),l=0;l<e;l++)a=l*n+i,s[2*l]=Math.cos(a),s[2*l+1]=Math.sin(-a);return s},Cn=function getRoundRectangleRadius(e,t){return Math.min(e/4,t/4,8)},Tn=function getRoundPolygonRadius(e,t){return Math.min(e/10,t/10,8)},Ln=function getBarrelCurveConstants(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function satPolygonIntersection(e,t){function getAxes(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],a=e[(n+1)%e.length],s={x:a.x-i.x,y:a.y-i.y},l={x:-s.y,y:s.x},u=Math.sqrt(l.x*l.x+l.y*l.y);t.push({x:l.x/u,y:l.y/u})}return t}function project(e,t){var n,i=1/0,a=-1/0,s=_createForOfIteratorHelper(e);try{for(s.s();!(n=s.n()).done;){var l=n.value,u=l.x*t.x+l.y*t.y;i=Math.min(i,u),a=Math.max(a,u)}}catch(e){s.e(e)}finally{s.f()}return{min:i,max:a}}function overlaps(e,t){return!(e.max<t.min||t.max<e.min)}var n,i=_createForOfIteratorHelper([].concat(_toConsumableArray(getAxes(e)),_toConsumableArray(getAxes(t))));try{for(i.s();!(n=i.n()).done;){var a=n.value;if(!overlaps(project(e,a),project(t,a)))return!1}}catch(e){i.e(e)}finally{i.f()}return!0}var Dn=nt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function weight(e){return 1}}),An={pageRank:function pageRank(e){for(var t=Dn(e),n=t.dampingFactor,i=t.precision,a=t.iterations,s=t.weight,l=this._private.cy,u=this.byGroup(),c=u.nodes,h=u.edges,d=c.length,p=d*d,g=h.length,v=new Array(p),y=new Array(d),m=(1-n)/d,b=0;b<d;b++){for(var x=0;x<d;x++){v[b*d+x]=0}y[b]=0}for(var w=0;w<g;w++){var E=h[w],_=E.data("source"),T=E.data("target");if(_!==T){var L=c.indexOfId(_),D=c.indexOfId(T),S=s(E);v[D*d+L]+=S,y[L]+=S}}for(var k=1/d+m,P=0;P<d;P++)if(0===y[P])for(var N=0;N<d;N++){v[N*d+P]=k}else for(var I=0;I<d;I++){var M=I*d+P;v[M]=v[M]/y[P]+m}for(var R,O=new Array(d),z=new Array(d),G=0;G<d;G++)O[G]=1;for(var V=0;V<a;V++){for(var q=0;q<d;q++)z[q]=0;for(var Y=0;Y<d;Y++)for(var X=0;X<d;X++){var U=Y*d+X;z[Y]+=v[U]*O[X]}Vt(z),R=O,O=z,z=R;for(var H=0,j=0;j<d;j++){var W=R[j]-O[j];H+=W*W}if(H<i)break}return{rank:function rank(e){return e=l.collection(e)[0],O[c.indexOf(e)]}}}},Sn=nt({root:null,weight:function weight(e){return 1},directed:!1,alpha:0}),kn={degreeCentralityNormalized:function degreeCentralityNormalized(e){e=Sn(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var a={},s={},l=0,u=0,c=0;c<i;c++){var h=n[c],d=h.id();e.root=h;var p=this.degreeCentrality(e);l<p.indegree&&(l=p.indegree),u<p.outdegree&&(u=p.outdegree),a[d]=p.indegree,s[d]=p.outdegree}return{indegree:function indegree(e){return 0==l?0:(H(e)&&(e=t.filter(e)),a[e.id()]/l)},outdegree:function outdegree(e){return 0===u?0:(H(e)&&(e=t.filter(e)),s[e.id()]/u)}}}for(var g={},v=0,y=0;y<i;y++){var m=n[y];e.root=m;var b=this.degreeCentrality(e);v<b.degree&&(v=b.degree),g[m.id()]=b.degree}return{degree:function degree(e){return 0===v?0:(H(e)&&(e=t.filter(e)),g[e.id()]/v)}}},degreeCentrality:function degreeCentrality(e){e=Sn(e);var t=this.cy(),n=this,i=e,a=i.root,s=i.weight,l=i.directed,u=i.alpha;if(a=t.collection(a)[0],l){for(var c=a.connectedEdges(),h=c.filter(function(e){return e.target().same(a)&&n.has(e)}),d=c.filter(function(e){return e.source().same(a)&&n.has(e)}),p=h.length,g=d.length,v=0,y=0,m=0;m<h.length;m++)v+=s(h[m]);for(var b=0;b<d.length;b++)y+=s(d[b]);return{indegree:Math.pow(p,1-u)*Math.pow(v,u),outdegree:Math.pow(g,1-u)*Math.pow(y,u)}}for(var x=a.connectedEdges().intersection(n),w=x.length,E=0,_=0;_<x.length;_++)E+=s(x[_]);return{degree:Math.pow(w,1-u)*Math.pow(E,u)}}};kn.dc=kn.degreeCentrality,kn.dcn=kn.degreeCentralityNormalised=kn.degreeCentralityNormalized;var Pn=nt({harmonic:!0,weight:function weight(){return 1},directed:!1,root:null}),Nn={closenessCentralityNormalized:function closenessCentralityNormalized(e){for(var t=Pn(e),n=t.harmonic,i=t.weight,a=t.directed,s=this.cy(),l={},u=0,c=this.nodes(),h=this.floydWarshall({weight:i,directed:a}),d=0;d<c.length;d++){for(var p=0,g=c[d],v=0;v<c.length;v++)if(d!==v){var y=h.distance(g,c[v]);p+=n?1/y:y}n||(p=1/p),u<p&&(u=p),l[g.id()]=p}return{closeness:function closeness(e){return 0==u?0:(e=H(e)?s.filter(e)[0].id():e.id(),l[e]/u)}}},closenessCentrality:function closenessCentrality(e){var t=Pn(e),n=t.root,i=t.weight,a=t.directed,s=t.harmonic;n=this.filter(n)[0];for(var l=this.dijkstra({root:n,weight:i,directed:a}),u=0,c=this.nodes(),h=0;h<c.length;h++){var d=c[h];if(!d.same(n)){var p=l.distanceTo(d);u+=s?1/p:p}}return s?u:1/u}};Nn.cc=Nn.closenessCentrality,Nn.ccn=Nn.closenessCentralityNormalised=Nn.closenessCentralityNormalized;var In=nt({weight:null,directed:!1}),Mn={betweennessCentrality:function betweennessCentrality(e){for(var t=In(e),n=t.directed,i=t.weight,a=null!=i,s=this.cy(),l=this.nodes(),u={},c={},h=0,d=function set(e,t){c[e]=t,t>h&&(h=t)},p=function get(e){return c[e]},g=0;g<l.length;g++){var v=l[g],y=v.id();u[y]=n?v.outgoers().nodes():v.openNeighborhood().nodes(),d(y,0)}for(var m=function _loop(){for(var e=l[b].id(),t=[],n={},c={},h={},g=new bt(function(e,t){return h[e]-h[t]}),v=0;v<l.length;v++){var y=l[v].id();n[y]=[],c[y]=0,h[y]=1/0}for(c[e]=1,h[e]=0,g.push(e);!g.empty();){var m=g.pop();if(t.push(m),a)for(var x=0;x<u[m].length;x++){var w=u[m][x],E=s.getElementById(m),_=void 0;_=E.edgesTo(w).length>0?E.edgesTo(w)[0]:w.edgesTo(E)[0];var T=i(_);w=w.id(),h[w]>h[m]+T&&(h[w]=h[m]+T,g.nodes.indexOf(w)<0?g.push(w):g.updateItem(w),c[w]=0,n[w]=[]),h[w]==h[m]+T&&(c[w]=c[w]+c[m],n[w].push(m))}else for(var L=0;L<u[m].length;L++){var D=u[m][L].id();h[D]==1/0&&(g.push(D),h[D]=h[m]+1),h[D]==h[m]+1&&(c[D]=c[D]+c[m],n[D].push(m))}}for(var S={},k=0;k<l.length;k++)S[l[k].id()]=0;for(;t.length>0;){for(var P=t.pop(),N=0;N<n[P].length;N++){var I=n[P][N];S[I]=S[I]+c[I]/c[P]*(1+S[P])}P!=l[b].id()&&d(P,p(P)+S[P])}},b=0;b<l.length;b++)m();var x={betweenness:function betweenness(e){var t=s.collection(e).id();return p(t)},betweennessNormalized:function betweennessNormalized(e){if(0==h)return 0;var t=s.collection(e).id();return p(t)/h}};return x.betweennessNormalised=x.betweennessNormalized,x}};Mn.bc=Mn.betweennessCentrality;var Rn=nt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),Bn=function getSimilarity(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},On=function normalize(e,t){for(var n,i=0;i<t;i++){n=0;for(var a=0;a<t;a++)n+=e[a*t+i];for(var s=0;s<t;s++)e[s*t+i]=e[s*t+i]/n}},Fn=function mmult(e,t,n){for(var i=new Array(n*n),a=0;a<n;a++){for(var s=0;s<n;s++)i[a*n+s]=0;for(var l=0;l<n;l++)for(var u=0;u<n;u++)i[a*n+u]+=e[a*n+l]*t[l*n+u]}return i},zn=function expand(e,t,n){for(var i=e.slice(0),a=1;a<n;a++)e=Fn(e,i,t);return e},Gn=function inflate(e,t,n){for(var i=new Array(t*t),a=0;a<t*t;a++)i[a]=Math.pow(e[a],n);return On(i,t),i},Vn=function hasConverged(e,t,n,i){for(var a=0;a<n;a++){if(Math.round(e[a]*Math.pow(10,i))/Math.pow(10,i)!==Math.round(t[a]*Math.pow(10,i))/Math.pow(10,i))return!1}return!0},qn=function isDuplicate(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},Yn=function markovClustering(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),a=function setOptions(e){return Rn(e)}(e),s={},l=0;l<t.length;l++)s[t[l].id()]=l;for(var u,c=t.length,h=c*c,d=new Array(h),p=0;p<h;p++)d[p]=0;for(var g=0;g<n.length;g++){var v=n[g],y=s[v.source().id()],m=s[v.target().id()],b=Bn(v,a.attributes);d[y*c+m]+=b,d[m*c+y]+=b}!function addLoops(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n}(d,c,a.multFactor),On(d,c);for(var x=!0,w=0;x&&w<a.maxIterations;)x=!1,u=zn(d,c,a.expandFactor),d=Gn(u,c,a.inflateFactor),Vn(d,u,h,4)||(x=!0),w++;var E=function assign(e,t,n,i){for(var a=[],s=0;s<t;s++){for(var l=[],u=0;u<t;u++)Math.round(1e3*e[s*t+u])/1e3>0&&l.push(n[u]);0!==l.length&&a.push(i.collection(l))}return a}(d,c,t,i);return E=function removeDuplicates(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&qn(e[t],e[n])&&e.splice(n,1);return e}(E),E},Xn={markovClustering:Yn,mcl:Yn},Un=function identity(e){return e},Hn=function absDiff(e,t){return Math.abs(t-e)},jn=function addAbsDiff(e,t,n){return e+Hn(t,n)},Wn=function addSquaredDiff(e,t,n){return e+Math.pow(n-t,2)},$n=function sqrt(e){return Math.sqrt(e)},Kn=function maxAbsDiff(e,t,n){return Math.max(e,Hn(t,n))},Zn=function getDistance(e,t,n,i,a){for(var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Un,l=i,u=0;u<e;u++)l=a(l,t(u),n(u));return s(l)},Qn={euclidean:function euclidean(e,t,n){return e>=2?Zn(e,t,n,0,Wn,$n):Zn(e,t,n,0,jn)},squaredEuclidean:function squaredEuclidean(e,t,n){return Zn(e,t,n,0,Wn)},manhattan:function manhattan(e,t,n){return Zn(e,t,n,0,jn)},max:function max(e,t,n){return Zn(e,t,n,-1/0,Kn)}};function clusteringDistance(e,t,n,i,a,s){var l;return l=j(e)?e:Qn[e]||Qn.euclidean,0===t&&j(e)?l(a,s):l(t,n,i,a,s)}Qn["squared-euclidean"]=Qn.squaredEuclidean,Qn.squaredeuclidean=Qn.squaredEuclidean;var Jn=nt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),er=function setOptions(e){return Jn(e)},tr=function getDist(e,t,n,i,a){var s="kMedoids"!==a?function(e){return n[e]}:function(e){return i[e](n)},l=n,u=t;return clusteringDistance(e,i.length,s,function getQ(e){return i[e](t)},l,u)},nr=function randomCentroids(e,t,n){for(var i=n.length,a=new Array(i),s=new Array(i),l=new Array(t),u=null,c=0;c<i;c++)a[c]=e.min(n[c]).value,s[c]=e.max(n[c]).value;for(var h=0;h<t;h++){u=[];for(var d=0;d<i;d++)u[d]=Math.random()*(s[d]-a[d])+a[d];l[h]=u}return l},rr=function classify(e,t,n,i,a){for(var s=1/0,l=0,u=0;u<t.length;u++){var c=tr(n,e,t[u],i,a);c<s&&(s=c,l=u)}return l},ir=function buildCluster(e,t,n){for(var i=[],a=null,s=0;s<t.length;s++)n[(a=t[s]).id()]===e&&i.push(a);return i},ar=function haveValuesConverged(e,t,n){return Math.abs(t-e)<=n},or=function haveMatricesConverged(e,t,n){for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++){if(Math.abs(e[i][a]-t[i][a])>n)return!1}return!0},sr=function seenBefore(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},lr=function randomMedoids(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var a=e[Math.floor(Math.random()*e.length)];sr(a,n,i);)a=e[Math.floor(Math.random()*e.length)];n[i]=a}else for(var s=0;s<t;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},ur=function findCost(e,t,n){for(var i=0,a=0;a<t.length;a++)i+=tr("manhattan",t[a],e,n,"kMedoids");return i},cr=function updateCentroids(e,t,n,i,a){for(var s,l,u=0;u<t.length;u++)for(var c=0;c<e.length;c++)i[u][c]=Math.pow(n[u][c],a.m);for(var h=0;h<e.length;h++)for(var d=0;d<a.attributes.length;d++){s=0,l=0;for(var p=0;p<t.length;p++)s+=i[p][h]*a.attributes[d](t[p]),l+=i[p][h];e[h][d]=s/l}},hr=function updateMembership(e,t,n,i,a){for(var s=0;s<e.length;s++)t[s]=e[s].slice();for(var l,u,c,h=2/(a.m-1),d=0;d<n.length;d++)for(var p=0;p<i.length;p++){l=0;for(var g=0;g<n.length;g++)u=tr(a.distance,i[p],n[d],a.attributes,"cmeans"),c=tr(a.distance,i[p],n[g],a.attributes,"cmeans"),l+=Math.pow(u/c,h);e[p][d]=1/l}},dr=function fuzzyCMeans(e){var t,n,i,a,s,l=this.cy(),u=this.nodes(),c=er(e);a=new Array(u.length);for(var h=0;h<u.length;h++)a[h]=new Array(c.k);i=new Array(u.length);for(var d=0;d<u.length;d++)i[d]=new Array(c.k);for(var p=0;p<u.length;p++){for(var g=0,v=0;v<c.k;v++)i[p][v]=Math.random(),g+=i[p][v];for(var y=0;y<c.k;y++)i[p][y]=i[p][y]/g}n=new Array(c.k);for(var m=0;m<c.k;m++)n[m]=new Array(c.attributes.length);s=new Array(u.length);for(var b=0;b<u.length;b++)s[b]=new Array(c.k);for(var x=!0,w=0;x&&w<c.maxIterations;)x=!1,cr(n,u,i,s,c),hr(i,a,n,u,c),or(i,a,c.sensitivityThreshold)||(x=!0),w++;return t=function assign(e,t,n,i){for(var a,s,l=new Array(n.k),u=0;u<l.length;u++)l[u]=[];for(var c=0;c<t.length;c++){a=-1/0,s=-1;for(var h=0;h<t[0].length;h++)t[c][h]>a&&(a=t[c][h],s=h);l[s].push(e[c])}for(var d=0;d<l.length;d++)l[d]=i.collection(l[d]);return l}(u,i,c,l),{clusters:t,degreeOfMembership:i}},pr={kMeans:function kMeans(e){var t,n=this.cy(),i=this.nodes(),a=null,s=er(e),l=new Array(s.k),u={};s.testMode?"number"==typeof s.testCentroids?(s.testCentroids,t=nr(i,s.k,s.attributes)):t="object"===_typeof(s.testCentroids)?s.testCentroids:nr(i,s.k,s.attributes):t=nr(i,s.k,s.attributes);for(var c=!0,h=0;c&&h<s.maxIterations;){for(var d=0;d<i.length;d++)u[(a=i[d]).id()]=rr(a,t,s.distance,s.attributes,"kMeans");c=!1;for(var p=0;p<s.k;p++){var g=ir(p,i,u);if(0!==g.length){for(var v=s.attributes.length,y=t[p],m=new Array(v),b=new Array(v),x=0;x<v;x++){b[x]=0;for(var w=0;w<g.length;w++)a=g[w],b[x]+=s.attributes[x](a);m[x]=b[x]/g.length,ar(m[x],y[x],s.sensitivityThreshold)||(c=!0)}t[p]=m,l[p]=n.collection(g)}}h++}return l},kMedoids:function kMedoids(e){var t,n,i=this.cy(),a=this.nodes(),s=null,l=er(e),u=new Array(l.k),c={},h=new Array(l.k);l.testMode?"number"==typeof l.testCentroids||(t="object"===_typeof(l.testCentroids)?l.testCentroids:lr(a,l.k)):t=lr(a,l.k);for(var d=!0,p=0;d&&p<l.maxIterations;){for(var g=0;g<a.length;g++)c[(s=a[g]).id()]=rr(s,t,l.distance,l.attributes,"kMedoids");d=!1;for(var v=0;v<t.length;v++){var y=ir(v,a,c);if(0!==y.length){h[v]=ur(t[v],y,l.attributes);for(var m=0;m<y.length;m++)(n=ur(y[m],y,l.attributes))<h[v]&&(h[v]=n,t[v]=y[m],d=!0);u[v]=i.collection(y)}}p++}return u},fuzzyCMeans:dr,fcm:dr},gr=nt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),fr={single:"min",complete:"max"},vr=function mergeClosest(e,t,n,i,a){for(var s,l=0,u=1/0,c=a.attributes,h=function getDist(e,t){return clusteringDistance(a.distance,c.length,function(t){return c[t](e)},function(e){return c[e](t)},e,t)},d=0;d<e.length;d++){var p=e[d].key,g=n[p][i[p]];g<u&&(l=p,u=g)}if("threshold"===a.mode&&u>=a.threshold||"dendrogram"===a.mode&&1===e.length)return!1;var v,y=t[l],m=t[i[l]];v="dendrogram"===a.mode?{left:y,right:m,key:y.key}:{value:y.value.concat(m.value),key:y.key},e[y.index]=v,e.splice(m.index,1),t[y.key]=v;for(var b=0;b<e.length;b++){var x=e[b];y.key===x.key?s=1/0:"min"===a.linkage?(s=n[y.key][x.key],n[y.key][x.key]>n[m.key][x.key]&&(s=n[m.key][x.key])):"max"===a.linkage?(s=n[y.key][x.key],n[y.key][x.key]<n[m.key][x.key]&&(s=n[m.key][x.key])):s="mean"===a.linkage?(n[y.key][x.key]*y.size+n[m.key][x.key]*m.size)/(y.size+m.size):"dendrogram"===a.mode?h(x.value,y.value):h(x.value[0],y.value[0]),n[y.key][x.key]=n[x.key][y.key]=s}for(var w=0;w<e.length;w++){var E=e[w].key;if(i[E]===y.key||i[E]===m.key){for(var _=E,T=0;T<e.length;T++){var L=e[T].key;n[E][L]<n[E][_]&&(_=L)}i[E]=_}e[w].index=w}return y.key=m.key=y.index=m.index=null,!0},yr=function getAllChildren(e,t,n){e&&(e.value?t.push(e.value):(e.left&&yr(e.left,t),e.right&&yr(e.right,t)))},mr=function buildDendrogram(e,t){if(!e)return"";if(e.left&&e.right){var n=mr(e.left,t),i=mr(e.right,t),a=t.add({group:"nodes",data:{id:n+","+i}});return t.add({group:"edges",data:{source:n,target:a.id()}}),t.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}return e.value?e.value.id():void 0},br=function buildClustersFromTree(e,t,n){if(!e)return[];var i=[],a=[],s=[];return 0===t?(e.left&&yr(e.left,i),e.right&&yr(e.right,a),s=i.concat(a),[n.collection(s)]):1===t?e.value?[n.collection(e.value)]:(e.left&&yr(e.left,i),e.right&&yr(e.right,a),[n.collection(i),n.collection(a)]):e.value?[n.collection(e.value)]:(e.left&&(i=br(e.left,t-1,n)),e.right&&(a=br(e.right,t-1,n)),i.concat(a))},xr=function hierarchicalClustering(e){for(var t=this.cy(),n=this.nodes(),i=function setOptions(e){var t=gr(e),n=fr[t.linkage];return null!=n&&(t.linkage=n),t}(e),a=i.attributes,s=function getDist(e,t){return clusteringDistance(i.distance,a.length,function(t){return a[t](e)},function(e){return a[e](t)},e,t)},l=[],u=[],c=[],h=[],d=0;d<n.length;d++){var p={value:"dendrogram"===i.mode?n[d]:[n[d]],key:d,index:d};l[d]=p,h[d]=p,u[d]=[],c[d]=0}for(var g=0;g<l.length;g++)for(var v=0;v<=g;v++){var y=void 0;y="dendrogram"===i.mode?g===v?1/0:s(l[g].value,l[v].value):g===v?1/0:s(l[g].value[0],l[v].value[0]),u[g][v]=y,u[v][g]=y,y<u[g][c[g]]&&(c[g]=v)}for(var m,b=vr(l,h,u,c,i);b;)b=vr(l,h,u,c,i);return"dendrogram"===i.mode?(m=br(l[0],i.dendrogramDepth,t),i.addDendrogram&&mr(l[0],t)):(m=new Array(l.length),l.forEach(function(e,n){e.key=e.index=null,m[n]=t.collection(e.value)})),m},wr={hierarchicalClustering:xr,hca:xr},Er=nt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),_r=function getSimilarity(e,t,n,i){var a=function attr(e,t){return i[t](e)};return-clusteringDistance(e,i.length,function(e){return a(t,e)},function(e){return a(n,e)},t,n)},Cr=function getPreference(e,t){var n=null;return n="median"===t?function median(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t)):e=e.slice(t,n);for(var s=0,l=e.length-1;l>=0;l--){var u=e[l];a?isFinite(u)||(e[l]=-1/0,s++):e.splice(l,1)}i&&e.sort(function(e,t){return e-t});var c=e.length,h=Math.floor(c/2);return c%2!=0?e[h+1+s]:(e[h-1+s]+e[h+s])/2}(e):"mean"===t?function mean(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=0,a=0,s=t;s<n;s++){var l=e[s];isFinite(l)&&(i+=l,a++)}return i/a}(e):"min"===t?function min(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,min=1/0,i=t;i<n;i++){var a=e[i];isFinite(a)&&(min=Math.min(a,min))}return min}(e):"max"===t?function max(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,max=-1/0,i=t;i<n;i++){var a=e[i];isFinite(a)&&(max=Math.max(a,max))}return max}(e):t,n},Tr=function assignClusters(e,t,n){for(var i=[],a=0;a<e;a++){for(var s=-1,l=-1/0,u=0;u<n.length;u++){var c=n[u];t[a*e+c]>l&&(s=c,l=t[a*e+c])}s>0&&i.push(s)}for(var h=0;h<n.length;h++)i[n[h]]=n[h];return i},Lr=function affinityPropagation(e){for(var t,n,i,a,s,l,u=this.cy(),c=this.nodes(),h=function setOptions(e){var t=e.damping,n=e.preference;.5<=t&&t<1||$e("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(e){return e===n})||Z(n)||$e("Preference must be one of [".concat(i.map(function(e){return"'".concat(e,"'")}).join(", "),"] or a number.  Got: ").concat(n)),Er(e)}(e),d={},p=0;p<c.length;p++)d[c[p].id()]=p;n=(t=c.length)*t,i=new Array(n);for(var g=0;g<n;g++)i[g]=-1/0;for(var v=0;v<t;v++)for(var y=0;y<t;y++)v!==y&&(i[v*t+y]=_r(h.distance,c[v],c[y],h.attributes));a=Cr(i,h.preference);for(var m=0;m<t;m++)i[m*t+m]=a;s=new Array(n);for(var b=0;b<n;b++)s[b]=0;l=new Array(n);for(var x=0;x<n;x++)l[x]=0;for(var w=new Array(t),E=new Array(t),_=new Array(t),T=0;T<t;T++)w[T]=0,E[T]=0,_[T]=0;for(var L,D=new Array(t*h.minIterations),S=0;S<D.length;S++)D[S]=0;for(L=0;L<h.maxIterations;L++){for(var k=0;k<t;k++){for(var P=-1/0,N=-1/0,I=-1,M=0,R=0;R<t;R++)w[R]=s[k*t+R],(M=l[k*t+R]+i[k*t+R])>=P?(N=P,P=M,I=R):M>N&&(N=M);for(var O=0;O<t;O++)s[k*t+O]=(1-h.damping)*(i[k*t+O]-P)+h.damping*w[O];s[k*t+I]=(1-h.damping)*(i[k*t+I]-N)+h.damping*w[I]}for(var z=0;z<t;z++){for(var G=0,V=0;V<t;V++)w[V]=l[V*t+z],E[V]=Math.max(0,s[V*t+z]),G+=E[V];G-=E[z],E[z]=s[z*t+z],G+=E[z];for(var q=0;q<t;q++)l[q*t+z]=(1-h.damping)*Math.min(0,G-E[q])+h.damping*w[q];l[z*t+z]=(1-h.damping)*(G-E[z])+h.damping*w[z]}for(var Y=0,X=0;X<t;X++){var U=l[X*t+X]+s[X*t+X]>0?1:0;D[L%h.minIterations*t+X]=U,Y+=U}if(Y>0&&(L>=h.minIterations-1||L==h.maxIterations-1)){for(var H=0,j=0;j<t;j++){_[j]=0;for(var W=0;W<h.minIterations;W++)_[j]+=D[W*t+j];0!==_[j]&&_[j]!==h.minIterations||H++}if(H===t)break}}for(var K=function findExemplars(e,t,n){for(var i=[],a=0;a<e;a++)t[a*e+a]+n[a*e+a]>0&&i.push(a);return i}(t,s,l),Q=function assign(e,t,n){for(var i=Tr(e,t,n),a=0;a<n.length;a++){for(var s=[],l=0;l<i.length;l++)i[l]===n[a]&&s.push(l);for(var u=-1,c=-1/0,h=0;h<s.length;h++){for(var d=0,p=0;p<s.length;p++)d+=t[s[p]*e+s[h]];d>c&&(u=h,c=d)}n[a]=s[u]}return Tr(e,t,n)}(t,i,K),J={},ee=0;ee<K.length;ee++)J[K[ee]]=[];for(var te=0;te<c.length;te++){var ne=Q[d[c[te].id()]];null!=ne&&J[ne].push(c[te])}for(var re=new Array(K.length),ie=0;ie<K.length;ie++)re[ie]=u.collection(J[K[ie]]);return re},Dr={affinityPropagation:Lr,ap:Lr},Ar=nt({root:void 0,directed:!1}),Sr={hierholzer:function hierholzer(e){if(!K(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n,i,a,s=Ar(e),l=s.root,u=s.directed,c=this,h=!1;l&&(a=H(l)?this.filter(l)[0].id():l[0].id());var d={},p={};u?c.forEach(function(e){var t=e.id();if(e.isNode()){var a=e.indegree(!0),s=e.outdegree(!0),l=a-s,u=s-a;1==l?n?h=!0:n=t:1==u?i?h=!0:i=t:(u>1||l>1)&&(h=!0),d[t]=[],e.outgoers().forEach(function(e){e.isEdge()&&d[t].push(e.id())})}else p[t]=[void 0,e.target().id()]}):c.forEach(function(e){var t=e.id();e.isNode()?(e.degree(!0)%2&&(n?i?h=!0:i=t:n=t),d[t]=[],e.connectedEdges().forEach(function(e){return d[t].push(e.id())})):p[t]=[e.source().id(),e.target().id()]});var g={found:!1,trail:void 0};if(h)return g;if(i&&n)if(u){if(a&&i!=a)return g;a=i}else{if(a&&i!=a&&n!=a)return g;a||(a=i)}else a||(a=c[0].id());var v=function walk(e){for(var t,n,i,a=e,s=[e];d[a].length;)t=d[a].shift(),n=p[t][0],a!=(i=p[t][1])?(d[i]=d[i].filter(function(e){return e!=t}),a=i):u||a==n||(d[n]=d[n].filter(function(e){return e!=t}),a=n),s.unshift(t),s.unshift(a);return s},y=[],m=[];for(m=v(a);1!=m.length;)0==d[m[0]].length?(y.unshift(c.getElementById(m.shift())),y.unshift(c.getElementById(m.shift()))):m=v(m.shift()).concat(m);for(var b in y.unshift(c.getElementById(m.shift())),d)if(d[b].length)return g;return g.found=!0,g.trail=this.spawn(y,!0),g}},kr=function hopcroftTarjanBiconnected(){var e=this,t={},n=0,i=0,a=[],s=[],l={},u=function biconnectedSearch(c,h,d){c===d&&(i+=1),t[h]={id:n,low:n++,cutVertex:!1};var p,g,v,y,m=e.getElementById(h).connectedEdges().intersection(e);0===m.size()?a.push(e.spawn(e.getElementById(h))):m.forEach(function(n){p=n.source().id(),g=n.target().id(),(v=p===h?g:p)!==d&&(y=n.id(),l[y]||(l[y]=!0,s.push({x:h,y:v,edge:n})),v in t?t[h].low=Math.min(t[h].low,t[v].id):(u(c,v,h),t[h].low=Math.min(t[h].low,t[v].low),t[h].id<=t[v].low&&(t[h].cutVertex=!0,function buildComponent(n,i){for(var l=s.length-1,u=[],c=e.spawn();s[l].x!=n||s[l].y!=i;)u.push(s.pop().edge),l--;u.push(s.pop().edge),u.forEach(function(n){var i=n.connectedNodes().intersection(e);c.merge(n),i.forEach(function(n){var i=n.id(),a=n.connectedEdges().intersection(e);c.merge(n),t[i].cutVertex?c.merge(a.filter(function(e){return e.isLoop()})):c.merge(a)})}),a.push(c)}(h,v))))})};e.forEach(function(e){if(e.isNode()){var n=e.id();n in t||(i=0,u(n,n),t[n].cutVertex=i>1)}});var c=Object.keys(t).filter(function(e){return t[e].cutVertex}).map(function(t){return e.getElementById(t)});return{cut:e.spawn(c),components:a}},Pr=function tarjanStronglyConnected(){var e=this,t={},n=0,i=[],a=[],s=e.spawn(e),l=function stronglyConnectedSearch(u){if(a.push(u),t[u]={index:n,low:n++,explored:!1},e.getElementById(u).connectedEdges().intersection(e).forEach(function(e){var n=e.target().id();n!==u&&(n in t||l(n),t[n].explored||(t[u].low=Math.min(t[u].low,t[n].low)))}),t[u].index===t[u].low){for(var c=e.spawn();;){var h=a.pop();if(c.merge(e.getElementById(h)),t[h].low=t[u].index,t[h].explored=!0,h===u)break}var d=c.edgesWith(c),p=c.merge(d);i.push(p),s=s.difference(p)}};return e.forEach(function(e){if(e.isNode()){var n=e.id();n in t||l(n)}}),{cut:s,components:i}},Nr={};[dt,wt,Et,Ct,Lt,At,Nt,An,kn,Nn,Mn,Xn,pr,wr,Dr,Sr,{hopcroftTarjanBiconnected:kr,htbc:kr,htb:kr,hopcroftTarjanBiconnectedComponents:kr},{tarjanStronglyConnected:Pr,tsc:Pr,tscc:Pr,tarjanStronglyConnectedComponents:Pr}].forEach(function(e){me(Nr,e)});var Ir=function api(e){if(!(this instanceof Ir))return new Ir(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Ir.prototype={fulfill:function fulfill(e){return Mr(this,1,"fulfillValue",e)},reject:function reject(e){return Mr(this,2,"rejectReason",e)},then:function then(e,t){var n=this,i=new Ir;return n.onFulfilled.push(Or(e,i,"fulfill")),n.onRejected.push(Or(t,i,"reject")),Rr(n),i.proxy}};var Mr=function deliver(e,t,n,i){return 0===e.state&&(e.state=t,e[n]=i,Rr(e)),e},Rr=function execute(e){1===e.state?Br(e,"onFulfilled",e.fulfillValue):2===e.state&&Br(e,"onRejected",e.rejectReason)},Br=function execute_handlers(e,t,n){if(0!==e[t].length){var i=e[t];e[t]=[];var a=function func(){for(var e=0;e<i.length;e++)i[e](n)};"function"==typeof setImmediate?setImmediate(a):setTimeout(a,0)}},Or=function resolver(e,t,n){return function(i){if("function"!=typeof e)t[n].call(t,i);else{var a;try{a=e(i)}catch(e){return void t.reject(e)}Fr(t,a)}}},Fr=function resolve(e,t){if(e!==t&&e.proxy!==t){var n;if("object"===_typeof(t)&&null!==t||"function"==typeof t)try{n=t.then}catch(t){return void e.reject(t)}if("function"!=typeof n)e.fulfill(t);else{var i=!1;try{n.call(t,function(n){i||(i=!0,n===t?e.reject(new TypeError("circular thenable chain")):Fr(e,n))},function(t){i||(i=!0,e.reject(t))})}catch(t){i||e.reject(t)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};Ir.all=function(e){return new Ir(function(t,n){for(var i=new Array(e.length),a=0,s=function fulfill(n,s){i[n]=s,++a===e.length&&t(i)},l=0;l<e.length;l++)(function(t){var i=e[t];null!=i&&null!=i.then?i.then(function(e){s(t,e)},function(e){n(e)}):s(t,i)})(l)})},Ir.resolve=function(e){return new Ir(function(t,n){t(e)})},Ir.reject=function(e){return new Ir(function(t,n){n(e)})};var zr="undefined"!=typeof Promise?Promise:Ir,Gr=function Animation(e,t,n){var i=ne(e),a=!i,s=this._private=me({duration:1e3},t,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&j(s.complete)&&s.completes.push(s.complete),a){var l=e.position();s.startPosition=s.startPosition||{x:l.x,y:l.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(i){var u=e.pan();s.startPan={x:u.x,y:u.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},Vr=Gr.prototype;me(Vr,{instanceString:function instanceString(){return"animation"},hook:function hook(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),J(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function play(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function playing(){return this._private.playing},apply:function apply(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function applying(){return this._private.applying},pause:function pause(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function stop(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function rewind(){return this.progress(0)},fastforward:function fastforward(){return this.progress(1)},time:function time(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function progress(e){var t=this._private,n=t.playing;return void 0===e?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function completed(){return 1===this._private.progress},reverse:function reverse(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function swap(t,n){var i=e[t];null!=i&&(e[t]=e[n],e[n]=i)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var a=e.style[i],s=a.name,l=e.startStyle[s];e.startStyle[s]=a,e.style[i]=l}return t&&this.play(),this},promise:function promise(e){var t,n=this._private;if("frame"===e)t=n.frames;else t=n.completes;return new zr(function(e,n){t.push(function(){e()})})}}),Vr.complete=Vr.completed,Vr.run=Vr.play,Vr.running=Vr.playing;var qr,Yr,Xr,Ur,Hr,jr,Wr,$r,Kr,Zr,Qr,Jr,ei,ti,ni,ri,ii,ai,oi,si,li,ui,ci,hi,di,pi,gi,fi,vi,yi,mi,bi,xi,wi,Ei,_i,Ci,Ti,Li,Di,Ai,Si,ki,Pi,Ni,Ii,Mi,Ri,Bi,Oi,Fi,zi,Gi,Vi,qi,Yi,Xi,Ui,Hi,ji,Wi,$i,Ki,Zi,Qi,Ji,ea,ta,na,ra,ia,aa,oa,sa,la,ua,ca,ha,da,pa,ga,fa,va,ya,ma,ba,xa={animated:function animated(){return function animatedImpl(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return!1;var n=t[0];return n?n._private.animation.current.length>0:void 0}},clearQueue:function clearQueue(){return function clearQueueImpl(){var e=this,t=void 0!==e.length?e:[e];if(!(this._private.cy||this).styleEnabled())return this;for(var n=0;n<t.length;n++){t[n]._private.animation.queue=[]}return this}},delay:function delay(){return function delayImpl(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function delayAnimation(){return function delayAnimationImpl(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function animation(){return function animationImpl(e,t){var n=this,i=void 0!==n.length,a=i?n:[n],s=this._private.cy||this,l=!i,u=!l;if(!s.styleEnabled())return this;var c=s.style();if(e=me({},e,t),0===Object.keys(e).length)return new Gr(a[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(u&&(e.style=c.getPropsList(e.style||e.css),e.css=void 0),u&&null!=e.renderedPosition){var h=e.renderedPosition,d=s.pan(),p=s.zoom();e.position=Mt(h,p,d)}if(l&&null!=e.panBy){var g=e.panBy,v=s.pan();e.pan={x:v.x+g.x,y:v.y+g.y}}var y=e.center||e.centre;if(l&&null!=y){var m=s.getCenterPan(y.eles,e.zoom);null!=m&&(e.pan=m)}if(l&&null!=e.fit){var b=e.fit,x=s.getFitViewport(b.eles||b.boundingBox,b.padding);null!=x&&(e.pan=x.pan,e.zoom=x.zoom)}if(l&&K(e.zoom)){var w=s.getZoomedViewport(e.zoom);null!=w?(w.zoomed&&(e.zoom=w.zoom),w.panned&&(e.pan=w.pan)):e.zoom=null}return new Gr(a[0],e)}},animate:function animate(){return function animateImpl(e,t){var n=this,i=void 0!==n.length?n:[n];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=me({},e,t));for(var a=0;a<i.length;a++){var s=i[a],l=s.animated()&&(void 0===e.queue||e.queue);s.animation(e,l?{queue:!0}:void 0).play()}return this}},stop:function stop(){return function stopImpl(e,t){var n=this,i=void 0!==n.length?n:[n],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var s=0;s<i.length;s++){for(var l=i[s]._private,u=l.animation.current,c=0;c<u.length;c++){var h=u[c]._private;t&&(h.duration=0)}e&&(l.animation.queue=[]),t||(l.animation.current=[])}return a.notify("draw"),this}}};function requireIsArray(){if(Yr)return qr;Yr=1;var e=Array.isArray;return qr=e}function require_isMasked(){if(Zr)return Kr;Zr=1;var e,t=function require_coreJsData(){if($r)return Wr;$r=1;var e=require_root()["__core-js_shared__"];return Wr=e}(),n=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return Kr=function isMasked(e){return!!n&&n in e}}function require_baseIsNative(){if(ti)return ei;ti=1;var e=function requireIsFunction(){if(jr)return Hr;jr=1;var e=require_baseGetTag(),t=requireIsObject();return Hr=function isFunction(n){if(!t(n))return!1;var i=e(n);return"[object Function]"==i||"[object GeneratorFunction]"==i||"[object AsyncFunction]"==i||"[object Proxy]"==i}}(),t=require_isMasked(),n=requireIsObject(),i=function require_toSource(){if(Jr)return Qr;Jr=1;var e=Function.prototype.toString;return Qr=function toSource(t){if(null!=t){try{return e.call(t)}catch(e){}try{return t+""}catch(e){}}return""}}(),a=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,u=s.toString,c=l.hasOwnProperty,h=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return ei=function baseIsNative(s){return!(!n(s)||t(s))&&(e(s)?h:a).test(i(s))}}function require_getNative(){if(ai)return ii;ai=1;var e=require_baseIsNative(),t=function require_getValue(){return ri||(ri=1,ni=function getValue(e,t){return null==e?void 0:e[t]}),ni}();return ii=function getNative(n,i){var a=t(n,i);return e(a)?a:void 0},ii}function require_nativeCreate(){if(si)return oi;si=1;var e=require_getNative()(Object,"create");return oi=e}function require_Hash(){if(bi)return mi;bi=1;var e=function require_hashClear(){if(ui)return li;ui=1;var e=require_nativeCreate();return li=function hashClear(){this.__data__=e?e(null):{},this.size=0}}(),t=function require_hashDelete(){return hi?ci:(hi=1,ci=function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t})}(),n=function require_hashGet(){if(pi)return di;pi=1;var e=require_nativeCreate(),t=Object.prototype.hasOwnProperty;return di=function hashGet(n){var i=this.__data__;if(e){var a=i[n];return"__lodash_hash_undefined__"===a?void 0:a}return t.call(i,n)?i[n]:void 0},di}(),i=function require_hashHas(){if(fi)return gi;fi=1;var e=require_nativeCreate(),t=Object.prototype.hasOwnProperty;return gi=function hashHas(n){var i=this.__data__;return e?void 0!==i[n]:t.call(i,n)},gi}(),a=function require_hashSet(){if(yi)return vi;yi=1;var e=require_nativeCreate();return vi=function hashSet(t,n){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=e&&void 0===n?"__lodash_hash_undefined__":n,this},vi}();function Hash(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}return Hash.prototype.clear=e,Hash.prototype.delete=t,Hash.prototype.get=n,Hash.prototype.has=i,Hash.prototype.set=a,mi=Hash}function requireEq(){if(_i)return Ei;return _i=1,Ei=function eq(e,t){return e===t||e!=e&&t!=t}}function require_assocIndexOf(){if(Ti)return Ci;Ti=1;var e=requireEq();return Ci=function assocIndexOf(t,n){for(var i=t.length;i--;)if(e(t[i][0],n))return i;return-1},Ci}function require_ListCache(){if(Ri)return Mi;Ri=1;var e=function require_listCacheClear(){return wi?xi:(wi=1,xi=function listCacheClear(){this.__data__=[],this.size=0})}(),t=function require_listCacheDelete(){if(Di)return Li;Di=1;var e=require_assocIndexOf(),t=Array.prototype.splice;return Li=function listCacheDelete(n){var i=this.__data__,a=e(i,n);return!(a<0||(a==i.length-1?i.pop():t.call(i,a,1),--this.size,0))},Li}(),n=function require_listCacheGet(){if(Si)return Ai;Si=1;var e=require_assocIndexOf();return Ai=function listCacheGet(t){var n=this.__data__,i=e(n,t);return i<0?void 0:n[i][1]},Ai}(),i=function require_listCacheHas(){if(Pi)return ki;Pi=1;var e=require_assocIndexOf();return ki=function listCacheHas(t){return e(this.__data__,t)>-1}}(),a=function require_listCacheSet(){if(Ii)return Ni;Ii=1;var e=require_assocIndexOf();return Ni=function listCacheSet(t,n){var i=this.__data__,a=e(i,t);return a<0?(++this.size,i.push([t,n])):i[a][1]=n,this},Ni}();function ListCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}return ListCache.prototype.clear=e,ListCache.prototype.delete=t,ListCache.prototype.get=n,ListCache.prototype.has=i,ListCache.prototype.set=a,Mi=ListCache}function require_mapCacheClear(){if(zi)return Fi;zi=1;var e=require_Hash(),t=require_ListCache(),n=function require_Map(){if(Oi)return Bi;Oi=1;var e=require_getNative()(require_root(),"Map");return Bi=e}();return Fi=function mapCacheClear(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}}function require_getMapData(){if(Yi)return qi;Yi=1;var e=function require_isKeyable(){return Vi?Gi:(Vi=1,Gi=function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e})}();return qi=function getMapData(t,n){var i=t.__data__;return e(n)?i["string"==typeof n?"string":"hash"]:i.map},qi}function require_MapCache(){if(Ji)return Qi;Ji=1;var e=require_mapCacheClear(),t=function require_mapCacheDelete(){if(Ui)return Xi;Ui=1;var e=require_getMapData();return Xi=function mapCacheDelete(t){var n=e(this,t).delete(t);return this.size-=n?1:0,n}}(),n=function require_mapCacheGet(){if(ji)return Hi;ji=1;var e=require_getMapData();return Hi=function mapCacheGet(t){return e(this,t).get(t)}}(),i=function require_mapCacheHas(){if($i)return Wi;$i=1;var e=require_getMapData();return Wi=function mapCacheHas(t){return e(this,t).has(t)}}(),a=function require_mapCacheSet(){if(Zi)return Ki;Zi=1;var e=require_getMapData();return Ki=function mapCacheSet(t,n){var i=e(this,t),a=i.size;return i.set(t,n),this.size+=i.size==a?0:1,this},Ki}();function MapCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}return MapCache.prototype.clear=e,MapCache.prototype.delete=t,MapCache.prototype.get=n,MapCache.prototype.has=i,MapCache.prototype.set=a,Qi=MapCache}function require_memoizeCapped(){if(ra)return na;ra=1;var e=function requireMemoize(){if(ta)return ea;ta=1;var e=require_MapCache();function memoize(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var memoized=function(){var e=arguments,i=n?n.apply(this,e):e[0],a=memoized.cache;if(a.has(i))return a.get(i);var s=t.apply(this,e);return memoized.cache=a.set(i,s)||a,s};return memoized.cache=new(memoize.Cache||e),memoized}return memoize.Cache=e,ea=memoize}();return na=function memoizeCapped(t){var n=e(t,function(e){return 500===i.size&&i.clear(),e}),i=n.cache;return n},na}function require_stringToPath(){if(aa)return ia;aa=1;var e=require_memoizeCapped(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=e(function(e){var i=[];return 46===e.charCodeAt(0)&&i.push(""),e.replace(t,function(e,t,a,s){i.push(a?s.replace(n,"$1"):t||e)}),i});return ia=i}function require_arrayMap(){if(sa)return oa;return sa=1,oa=function arrayMap(e,t){for(var n=-1,i=null==e?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a},oa}function requireToString(){if(ha)return ca;ha=1;var e=function require_baseToString(){if(ua)return la;ua=1;var e=require_Symbol(),t=require_arrayMap(),n=requireIsArray(),i=requireIsSymbol(),a=e?e.prototype:void 0,s=a?a.toString:void 0;return la=function baseToString(e){if("string"==typeof e)return e;if(n(e))return t(e,baseToString)+"";if(i(e))return s?s.call(e):"";var a=e+"";return"0"==a&&1/e==-1/0?"-0":a},la}();return ca=function toString(t){return null==t?"":e(t)}}function require_castPath(){if(pa)return da;pa=1;var e=requireIsArray(),t=function require_isKey(){if(Ur)return Xr;Ur=1;var e=requireIsArray(),t=requireIsSymbol(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;return Xr=function isKey(a,s){if(e(a))return!1;var l=typeof a;return!("number"!=l&&"symbol"!=l&&"boolean"!=l&&null!=a&&!t(a))||i.test(a)||!n.test(a)||null!=s&&a in Object(s)},Xr}(),n=require_stringToPath(),i=requireToString();return da=function castPath(a,s){return e(a)?a:t(a,s)?[a]:n(i(a))},da}function require_toKey(){if(fa)return ga;fa=1;var e=requireIsSymbol();return ga=function toKey(t){if("string"==typeof t||e(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}}var wa,Ea,_a,Ca,Ta,La,Da,Aa,Sa,ka,Pa,Na,Ia=function requireGet(){if(ba)return ma;ba=1;var e=function require_baseGet(){if(ya)return va;ya=1;var e=require_castPath(),t=require_toKey();return va=function baseGet(n,i){for(var a=0,s=(i=e(i,n)).length;null!=n&&a<s;)n=n[t(i[a++])];return a&&a==s?n:void 0},va}();return ma=function get(t,n,i){var a=null==t?void 0:e(t,n);return void 0===a?i:a},ma}(),Ma=getDefaultExportFromCjs(Ia);function require_baseAssignValue(){if(Ca)return _a;Ca=1;var e=function require_defineProperty(){if(Ea)return wa;Ea=1;var e=require_getNative(),t=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();return wa=t}();return _a=function baseAssignValue(t,n,i){"__proto__"==n&&e?e(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i},_a}function require_baseSet(){if(ka)return Sa;ka=1;var e=function require_assignValue(){if(La)return Ta;La=1;var e=require_baseAssignValue(),t=requireEq(),n=Object.prototype.hasOwnProperty;return Ta=function assignValue(i,a,s){var l=i[a];n.call(i,a)&&t(l,s)&&(void 0!==s||a in i)||e(i,a,s)},Ta}(),t=require_castPath(),n=function require_isIndex(){if(Aa)return Da;Aa=1;var e=/^(?:0|[1-9]\d*)$/;return Da=function isIndex(t,n){var i=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&e.test(t))&&t>-1&&t%1==0&&t<n}}(),i=requireIsObject(),a=require_toKey();return Sa=function baseSet(s,l,u,c){if(!i(s))return s;for(var h=-1,d=(l=t(l,s)).length,p=d-1,g=s;null!=g&&++h<d;){var v=a(l[h]),y=u;if("__proto__"===v||"constructor"===v||"prototype"===v)return s;if(h!=p){var m=g[v];void 0===(y=c?c(m,v,g):void 0)&&(y=i(m)?m:n(l[h+1])?[]:{})}e(g,v,y),g=g[v]}return s},Sa}var Ra,Ba,Oa,Fa,za=function requireSet(){if(Na)return Pa;Na=1;var e=require_baseSet();return Pa=function set(t,n,i){return null==t?t:e(t,n,i)},Pa}(),Ga=getDefaultExportFromCjs(za);var Va=function requireToPath(){if(Fa)return Oa;Fa=1;var e=require_arrayMap(),t=function require_copyArray(){return Ba||(Ba=1,Ra=function copyArray(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}),Ra}(),n=requireIsArray(),i=requireIsSymbol(),a=require_stringToPath(),s=require_toKey(),l=requireToString();return Oa=function toPath(u){return n(u)?e(u,s):i(u)?[u]:t(a(l(u)))}}(),qa=getDefaultExportFromCjs(Va),Ya={data:function data(e){return e=me({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function beforeGet(e){},beforeSet:function beforeSet(e,t){},onSet:function onSet(e){},canSet:function canSet(e){return!0}},e),function dataImpl(t,n){var i=e,a=this,s=void 0!==a.length,l=s?a:[a],u=s?a[0]:a;if(H(t)){var c,h=-1!==t.indexOf(".")&&qa(t);if(i.allowGetting&&void 0===n)return u&&(i.beforeGet(u),c=h&&void 0===u._private[i.field][t]?Ma(u._private[i.field],h):u._private[i.field][t]),c;if(i.allowSetting&&void 0!==n&&!i.immutableKeys[t]){var d=_defineProperty$1({},t,n);i.beforeSet(a,d);for(var p=0,g=l.length;p<g;p++){var v=l[p];i.canSet(v)&&(h&&void 0===u._private[i.field][t]?Ga(v._private[i.field],h,n):v._private[i.field][t]=n)}i.updateStyle&&a.updateStyle(),i.onSet(a),i.settingTriggersEvent&&a[i.triggerFnName](i.settingEvent)}}else if(i.allowSetting&&K(t)){var y,m,b=t,x=Object.keys(b);i.beforeSet(a,b);for(var w=0;w<x.length;w++){if(m=b[y=x[w]],!i.immutableKeys[y])for(var E=0;E<l.length;E++){var _=l[E];i.canSet(_)&&(_._private[i.field][y]=m)}}i.updateStyle&&a.updateStyle(),i.onSet(a),i.settingTriggersEvent&&a[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&j(t)){var T=t;a.on(i.bindingEvent,T)}else if(i.allowGetting&&void 0===t){var L;return u&&(i.beforeGet(u),L=u._private[i.field]),L}return a}},removeData:function removeData(e){return e=me({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function removeDataImpl(t){var n=e,i=this,a=void 0!==i.length?i:[i];if(H(t)){for(var s=t.split(/\s+/),l=s.length,u=0;u<l;u++){var c=s[u];if(!ie(c))if(!n.immutableKeys[c])for(var h=0,d=a.length;h<d;h++)a[h]._private[n.field][c]=void 0}n.triggerEvent&&i[n.triggerFnName](n.event)}else if(void 0===t){for(var p=0,g=a.length;p<g;p++)for(var v=a[p]._private[n.field],y=Object.keys(v),m=0;m<y.length;m++){var b=y[m];!n.immutableKeys[b]&&(v[b]=void 0)}n.triggerEvent&&i[n.triggerFnName](n.event)}return i}}},Xa={eventAliasesOn:function eventAliasesOn(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(e,t){var n=this,i=Array.prototype.slice.call(arguments,0);return new zr(function(e,t){var a=i.concat([function callback(t){n.off.apply(n,s),e(t)}]),s=a.concat([]);n.on.apply(n,a)})}}},Ua={};[xa,Ya,Xa].forEach(function(e){me(Ua,e)});var Ha={animate:Ua.animate(),animation:Ua.animation(),animated:Ua.animated(),clearQueue:Ua.clearQueue(),delay:Ua.delay(),delayAnimation:Ua.delayAnimation(),stop:Ua.stop()},ja={classes:function classes(e){var t=this;if(void 0===e){var n=[];return t[0]._private.classes.forEach(function(e){return n.push(e)}),n}W(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],a=new ut(e),s=0;s<t.length;s++){for(var l=t[s],u=l._private,c=u.classes,h=!1,d=0;d<e.length;d++){var p=e[d];if(!c.has(p)){h=!0;break}}h||(h=c.size!==e.length),h&&(u.classes=a,i.push(l))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function addClass(e){return this.toggleClass(e,!0)},hasClass:function hasClass(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function toggleClass(e,t){W(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=void 0===t,a=[],s=0,l=n.length;s<l;s++)for(var u=n[s],c=u._private.classes,h=!1,d=0;d<e.length;d++){var p=e[d],g=c.has(p),v=!1;t||i&&!g?(c.add(p),v=!0):(!t||i&&g)&&(c.delete(p),v=!0),!h&&v&&(a.push(u),h=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},removeClass:function removeClass(e){return this.toggleClass(e,!1)},flashClass:function flashClass(e,t){var n=this;if(null==t)t=250;else if(0===t)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};ja.className=ja.classNames=ja.classes;var Wa={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:de,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Wa.variable="(?:[\\w-.]|(?:\\\\"+Wa.metaChar+"))+",Wa.className="(?:[\\w-]|(?:\\\\"+Wa.metaChar+"))+",Wa.value=Wa.string+"|"+Wa.number,Wa.id=Wa.variable,function(){var e,t,n;for(e=Wa.comparatorOp.split("|"),n=0;n<e.length;n++)t=e[n],Wa.comparatorOp+="|@"+t;for(e=Wa.comparatorOp.split("|"),n=0;n<e.length;n++)(t=e[n]).indexOf("!")>=0||"="!==t&&(Wa.comparatorOp+="|\\!"+t)}();var $a=0,Ka=1,Za=2,Qa=3,Ja=4,eo=5,to=6,no=7,ro=8,io=9,ao=10,oo=11,so=12,lo=13,uo=14,co=15,ho=16,po=17,go=18,fo=19,vo=20,yo=[{selector:":selected",matches:function matches(e){return e.selected()}},{selector:":unselected",matches:function matches(e){return!e.selected()}},{selector:":selectable",matches:function matches(e){return e.selectable()}},{selector:":unselectable",matches:function matches(e){return!e.selectable()}},{selector:":locked",matches:function matches(e){return e.locked()}},{selector:":unlocked",matches:function matches(e){return!e.locked()}},{selector:":visible",matches:function matches(e){return e.visible()}},{selector:":hidden",matches:function matches(e){return!e.visible()}},{selector:":transparent",matches:function matches(e){return e.transparent()}},{selector:":grabbed",matches:function matches(e){return e.grabbed()}},{selector:":free",matches:function matches(e){return!e.grabbed()}},{selector:":removed",matches:function matches(e){return e.removed()}},{selector:":inside",matches:function matches(e){return!e.removed()}},{selector:":grabbable",matches:function matches(e){return e.grabbable()}},{selector:":ungrabbable",matches:function matches(e){return!e.grabbable()}},{selector:":animated",matches:function matches(e){return e.animated()}},{selector:":unanimated",matches:function matches(e){return!e.animated()}},{selector:":parent",matches:function matches(e){return e.isParent()}},{selector:":childless",matches:function matches(e){return e.isChildless()}},{selector:":child",matches:function matches(e){return e.isChild()}},{selector:":orphan",matches:function matches(e){return e.isOrphan()}},{selector:":nonorphan",matches:function matches(e){return e.isChild()}},{selector:":compound",matches:function matches(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function matches(e){return e.isLoop()}},{selector:":simple",matches:function matches(e){return e.isSimple()}},{selector:":active",matches:function matches(e){return e.active()}},{selector:":inactive",matches:function matches(e){return!e.active()}},{selector:":backgrounding",matches:function matches(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function matches(e){return!e.backgrounding()}}].sort(function(e,t){return function descending(e,t){return-1*ye(e,t)}(e.selector,t.selector)}),mo=function(){for(var e,t={},n=0;n<yo.length;n++)t[(e=yo[n]).selector]=e.matches;return t}(),bo="("+yo.map(function(e){return e.selector}).join("|")+")",xo=function cleanMetaChars(e){return e.replace(new RegExp("\\\\("+Wa.metaChar+")","g"),function(e,t){return t})},wo=function replaceLastQuery(e,t,n){e[e.length-1]=n},Eo=[{name:"group",query:!0,regex:"("+Wa.group+")",populate:function populate(e,t,n){var i=_slicedToArray(n,1)[0];t.checks.push({type:$a,value:"*"===i?i:i+"s"})}},{name:"state",query:!0,regex:bo,populate:function populate(e,t,n){var i=_slicedToArray(n,1)[0];t.checks.push({type:no,value:i})}},{name:"id",query:!0,regex:"\\#("+Wa.id+")",populate:function populate(e,t,n){var i=_slicedToArray(n,1)[0];t.checks.push({type:ro,value:xo(i)})}},{name:"className",query:!0,regex:"\\.("+Wa.className+")",populate:function populate(e,t,n){var i=_slicedToArray(n,1)[0];t.checks.push({type:io,value:xo(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Wa.variable+")\\s*\\]",populate:function populate(e,t,n){var i=_slicedToArray(n,1)[0];t.checks.push({type:Ja,field:xo(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Wa.variable+")\\s*("+Wa.comparatorOp+")\\s*("+Wa.value+")\\s*\\]",populate:function populate(e,t,n){var i=_slicedToArray(n,3),a=i[0],s=i[1],l=i[2];l=null!=new RegExp("^"+Wa.string+"$").exec(l)?l.substring(1,l.length-1):parseFloat(l),t.checks.push({type:Qa,field:xo(a),operator:s,value:l})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Wa.boolOp+")\\s*("+Wa.variable+")\\s*\\]",populate:function populate(e,t,n){var i=_slicedToArray(n,2),a=i[0],s=i[1];t.checks.push({type:eo,field:xo(s),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Wa.meta+")\\s*("+Wa.comparatorOp+")\\s*("+Wa.number+")\\s*\\]\\]",populate:function populate(e,t,n){var i=_slicedToArray(n,3),a=i[0],s=i[1],l=i[2];t.checks.push({type:to,field:xo(a),operator:s,value:parseFloat(l)})}},{name:"nextQuery",separator:!0,regex:Wa.separator,populate:function populate(e,t){var n=e.currentSubject,i=e.edgeCount,a=e.compoundCount,s=e[e.length-1];return null!=n&&(s.subject=n,e.currentSubject=null),s.edgeCount=i,s.compoundCount=a,e.edgeCount=0,e.compoundCount=0,e[e.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:Wa.directedEdge,populate:function populate(e,t){if(null==e.currentSubject){var n={checks:[]},i=t,a={checks:[]};return n.checks.push({type:oo,source:i,target:a}),wo(e,0,n),e.edgeCount++,a}var s={checks:[]},l=t,u={checks:[]};return s.checks.push({type:so,source:l,target:u}),wo(e,0,s),e.edgeCount++,u}},{name:"undirectedEdge",separator:!0,regex:Wa.undirectedEdge,populate:function populate(e,t){if(null==e.currentSubject){var n={checks:[]},i=t,a={checks:[]};return n.checks.push({type:ao,nodes:[i,a]}),wo(e,0,n),e.edgeCount++,a}var s={checks:[]},l=t,u={checks:[]};return s.checks.push({type:uo,node:l,neighbor:u}),wo(e,0,s),u}},{name:"child",separator:!0,regex:Wa.child,populate:function populate(e,t){if(null==e.currentSubject){var n={checks:[]},i={checks:[]},a=e[e.length-1];return n.checks.push({type:co,parent:a,child:i}),wo(e,0,n),e.compoundCount++,i}if(e.currentSubject===t){var s={checks:[]},l=e[e.length-1],u={checks:[]},c={checks:[]},h={checks:[]},d={checks:[]};return s.checks.push({type:fo,left:l,right:u,subject:c}),c.checks=t.checks,t.checks=[{type:vo}],d.checks.push({type:vo}),u.checks.push({type:po,parent:d,child:h}),wo(e,0,s),e.currentSubject=c,e.compoundCount++,h}var p={checks:[]},g={checks:[]},v=[{type:po,parent:p,child:g}];return p.checks=t.checks,t.checks=v,e.compoundCount++,g}},{name:"descendant",separator:!0,regex:Wa.descendant,populate:function populate(e,t){if(null==e.currentSubject){var n={checks:[]},i={checks:[]},a=e[e.length-1];return n.checks.push({type:ho,ancestor:a,descendant:i}),wo(e,0,n),e.compoundCount++,i}if(e.currentSubject===t){var s={checks:[]},l=e[e.length-1],u={checks:[]},c={checks:[]},h={checks:[]},d={checks:[]};return s.checks.push({type:fo,left:l,right:u,subject:c}),c.checks=t.checks,t.checks=[{type:vo}],d.checks.push({type:vo}),u.checks.push({type:go,ancestor:d,descendant:h}),wo(e,0,s),e.currentSubject=c,e.compoundCount++,h}var p={checks:[]},g={checks:[]},v=[{type:go,ancestor:p,descendant:g}];return p.checks=t.checks,t.checks=v,e.compoundCount++,g}},{name:"subject",modifier:!0,regex:Wa.subject,populate:function populate(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return Ze("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1].checks[0],i=null==n?null:n.type;i===oo?n.type=lo:i===ao&&(n.type=uo,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];Eo.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var _o=function consumeExpr(e){for(var t,n,i,a=0;a<Eo.length;a++){var s=Eo[a],l=s.name,u=e.match(s.regexObj);if(null!=u){n=u,t=s,i=l;var c=u[0];e=e.substring(c.length);break}}return{expr:t,match:n,name:i,remaining:e}},Co={parse:function parse(e){var t=this,n=t.inputText=e,i=t[0]={checks:[]};for(t.length=1,n=function consumeWhitespace(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e}(n);;){var a=_o(n);if(null==a.expr)return Ze("The selector `"+e+"`is invalid"),!1;var s=a.match.slice(1),l=a.expr.populate(t,i,s);if(!1===l)return!1;if(null!=l&&(i=l),(n=a.remaining).match(/^\s*$/))break}var u=t[t.length-1];null!=t.currentSubject&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var c=0;c<t.length;c++){var h=t[c];if(h.compoundCount>0&&h.edgeCount>0)return Ze("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(h.edgeCount>1)return Ze("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===h.edgeCount&&Ze("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function toString(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function clean(e){return null==e?"":e},t=function cleanVal(t){return H(t)?'"'+t+'"':e(t)},n=function space(e){return" "+e+" "},i=function checkToString(i,s){var l=i.type,u=i.value;switch(l){case $a:var c=e(u);return c.substring(0,c.length-1);case Qa:var h=i.field,d=i.operator;return"["+h+n(e(d))+t(u)+"]";case eo:var p=i.operator,g=i.field;return"["+e(p)+g+"]";case Ja:return"["+i.field+"]";case to:var v=i.operator;return"[["+i.field+n(e(v))+t(u)+"]]";case no:return u;case ro:return"#"+u;case io:return"."+u;case po:case co:return a(i.parent,s)+n(">")+a(i.child,s);case go:case ho:return a(i.ancestor,s)+" "+a(i.descendant,s);case fo:var y=a(i.left,s),m=a(i.subject,s),b=a(i.right,s);return y+(y.length>0?" ":"")+m+b;case vo:return""}},a=function queryToString(e,t){return e.checks.reduce(function(n,a,s){return n+(t===e&&0===s?"$":"")+i(a,t)},"")},s="",l=0;l<this.length;l++){var u=this[l];s+=a(u,u.subject),this.length>1&&l<this.length-1&&(s+=", ")}return this.toStringCache=s,s}},To=function valCmp(e,t,n){var i,a,s,l=H(e),u=Z(e),c=H(n),h=!1,d=!1,p=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),d=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),h=!0),(l||c||h)&&(a=l||u?""+e:"",s=""+n),h&&(e=a=a.toLowerCase(),n=s=s.toLowerCase()),t){case"*=":i=a.indexOf(s)>=0;break;case"$=":i=a.indexOf(s,a.length-s.length)>=0;break;case"^=":i=0===a.indexOf(s);break;case"=":i=e===n;break;case">":p=!0,i=e>n;break;case">=":p=!0,i=e>=n;break;case"<":p=!0,i=e<n;break;case"<=":p=!0,i=e<=n;break;default:i=!1}return!d||null==e&&p||(i=!i),i},Lo=function data(e,t){return e.data(t)},Do=[],Ao=function matches(e,t){return e.checks.every(function(e){return Do[e.type](e,t)})};Do[$a]=function(e,t){var n=e.value;return"*"===n||n===t.group()},Do[no]=function(e,t){return function stateSelectorMatches(e,t){return mo[e](t)}(e.value,t)},Do[ro]=function(e,t){var n=e.value;return t.id()===n},Do[io]=function(e,t){var n=e.value;return t.hasClass(n)},Do[to]=function(e,t){var n=e.field,i=e.operator,a=e.value;return To(function meta(e,t){return e[t]()}(t,n),i,a)},Do[Qa]=function(e,t){var n=e.field,i=e.operator,a=e.value;return To(Lo(t,n),i,a)},Do[eo]=function(e,t){var n=e.field,i=e.operator;return function boolCmp(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}}(Lo(t,n),i)},Do[Ja]=function(e,t){var n=e.field;return e.operator,function existCmp(e){return void 0!==e}(Lo(t,n))},Do[ao]=function(e,t){var n=e.nodes[0],i=e.nodes[1],a=t.source(),s=t.target();return Ao(n,a)&&Ao(i,s)||Ao(i,a)&&Ao(n,s)},Do[uo]=function(e,t){return Ao(e.node,t)&&t.neighborhood().some(function(t){return t.isNode()&&Ao(e.neighbor,t)})},Do[oo]=function(e,t){return Ao(e.source,t.source())&&Ao(e.target,t.target())},Do[so]=function(e,t){return Ao(e.source,t)&&t.outgoers().some(function(t){return t.isNode()&&Ao(e.target,t)})},Do[lo]=function(e,t){return Ao(e.target,t)&&t.incomers().some(function(t){return t.isNode()&&Ao(e.source,t)})},Do[co]=function(e,t){return Ao(e.child,t)&&Ao(e.parent,t.parent())},Do[po]=function(e,t){return Ao(e.parent,t)&&t.children().some(function(t){return Ao(e.child,t)})},Do[ho]=function(e,t){return Ao(e.descendant,t)&&t.ancestors().some(function(t){return Ao(e.ancestor,t)})},Do[go]=function(e,t){return Ao(e.ancestor,t)&&t.descendants().some(function(t){return Ao(e.descendant,t)})},Do[fo]=function(e,t){return Ao(e.subject,t)&&Ao(e.left,t)&&Ao(e.right,t)},Do[vo]=function(){return!0},Do[Ka]=function(e,t){return e.value.has(t)},Do[Za]=function(e,t){return(0,e.value)(t)};var So={matches:function matches(e){for(var t=0;t<this.length;t++){var n=this[t];if(Ao(n,e))return!0}return!1},filter:function filter(e){var t=this;if(1===t.length&&1===t[0].checks.length&&t[0].checks[0].type===ro)return e.getElementById(t[0].checks[0].value).collection();var n=function selectorFunction(e){for(var n=0;n<t.length;n++){var i=t[n];if(Ao(i,e))return!0}return!1};return null==t.text()&&(n=function selectorFunction(){return!0}),e.filter(n)}},ko=function Selector(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||H(e)&&e.match(/^\s*$/)||(J(e)?this.addQuery({checks:[{type:Ka,value:e.collection()}]}):j(e)?this.addQuery({checks:[{type:Za,value:e}]}):H(e)?this.parse(e)||(this.invalid=!0):$e("A selector must be created from a string; found "))},Po=ko.prototype;[Co,So].forEach(function(e){return me(Po,e)}),Po.text=function(){return this.inputText},Po.size=function(){return this.length},Po.eq=function(e){return this[e]},Po.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},Po.addQuery=function(e){this[this.length++]=e},Po.selector=Po.toString;var No={allAre:function allAre(e){var t=new ko(e);return this.every(function(e){return t.matches(e)})},is:function is(e){var t=new ko(e);return this.some(function(e){return t.matches(e)})},some:function some(e,t){for(var n=0;n<this.length;n++){if(t?e.apply(t,[this[n],n,this]):e(this[n],n,this))return!0}return!1},every:function every(e,t){for(var n=0;n<this.length;n++){if(!(t?e.apply(t,[this[n],n,this]):e(this[n],n,this)))return!1}return!0},same:function same(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every(function(t){return e.hasElementWithId(t.id())}))},anySame:function anySame(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function allAreNeighbors(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(e){return t.hasElementWithId(e.id())})},contains:function contains(e){e=this.cy().collection(e);var t=this;return e.every(function(e){return t.hasElementWithId(e.id())})}};No.allAreNeighbours=No.allAreNeighbors,No.has=No.contains,No.equal=No.equals=No.same;var Io,Mo,Ro=function cache(e,t){return function traversalCache(n,i,a,s){var l,u=n,c=this;if(null==u?l="":J(u)&&1===u.length&&(l=u.id()),1===c.length&&l){var h=c[0]._private,d=h.traversalCache=h.traversalCache||{},p=d[t]=d[t]||[],g=Fe(l),v=p[g];return v||(p[g]=e.call(c,n,i,a,s))}return e.call(c,n,i,a,s)}},Bo={parent:function parent(e){var t=[];if(1===this.length){var parent=this[0]._private.parent;if(parent)return parent}for(var n=0;n<this.length;n++){var i=this[n]._private.parent;i&&t.push(i)}return this.spawn(t,!0).filter(e)},parents:function parents(e){for(var parents=[],t=this.parent();t.nonempty();){for(var n=0;n<t.length;n++){var i=t[n];parents.push(i)}t=t.parent()}return this.spawn(parents,!0).filter(e)},commonAncestors:function commonAncestors(e){for(var t,n=0;n<this.length;n++){var i=this[n].parents();t=(t=t||i).intersect(i)}return t.filter(e)},orphans:function orphans(e){return this.stdFilter(function(e){return e.isOrphan()}).filter(e)},nonorphans:function nonorphans(e){return this.stdFilter(function(e){return e.isChild()}).filter(e)},children:Ro(function(e){for(var t=[],n=0;n<this.length;n++)for(var i=this[n]._private.children,a=0;a<i.length;a++)t.push(i[a]);return this.spawn(t,!0).filter(e)},"children"),siblings:function siblings(e){return this.parent().children().not(this).filter(e)},isParent:function isParent(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function isChildless(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function isChild(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function isOrphan(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function descendants(e){var t=[];return function add(e){for(var n=0;n<e.length;n++){var i=e[n];t.push(i),i.children().nonempty()&&add(i.children())}}(this.children()),this.spawn(t,!0).filter(e)}};function forEachCompound(e,t,n,i){for(var a=[],s=new ut,l=e.cy().hasCompoundNodes(),u=0;u<e.length;u++){var c=e[u];n?a.push(c):l&&i(a,s,c)}for(;a.length>0;){var h=a.shift();t(h),s.add(h.id()),l&&i(a,s,h)}return e}function addChildren(e,t,n){if(n.isParent())for(var i=n._private.children,a=0;a<i.length;a++){var s=i[a];t.has(s.id())||e.push(s)}}function addParent(e,t,n){if(n.isChild()){var i=n._private.parent;t.has(i.id())||e.push(i)}}function addParentAndChildren(e,t,n){addParent(e,t,n),addChildren(e,t,n)}Bo.forEachDown=function(e){return forEachCompound(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addChildren)},Bo.forEachUp=function(e){return forEachCompound(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addParent)},Bo.forEachUpAndDown=function(e){return forEachCompound(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],addParentAndChildren)},Bo.ancestors=Bo.parents,(Io=Mo={data:Ua.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ua.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ua.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ua.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ua.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ua.removeData({field:"rscratch",triggerEvent:!1}),id:function id(){var e=this[0];if(e)return e._private.data.id}}).attr=Io.data,Io.removeAttr=Io.removeData;var Oo,Fo,zo=Mo,Go={};function defineDegreeFunction(e){return function(t){var n=this;if(void 0===t&&(t=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var i=0,a=n[0],s=a._private.edges,l=0;l<s.length;l++){var u=s[l];!t&&u.isLoop()||(i+=e(a,u))}return i}}}function defineDegreeBoundsFunction(e,t){return function(n){for(var i,a=this.nodes(),s=0;s<a.length;s++){var l=a[s][e](n);void 0===l||void 0!==i&&!t(l,i)||(i=l)}return i}}me(Go,{degree:defineDegreeFunction(function(e,t){return t.source().same(t.target())?2:1}),indegree:defineDegreeFunction(function(e,t){return t.target().same(e)?1:0}),outdegree:defineDegreeFunction(function(e,t){return t.source().same(e)?1:0})}),me(Go,{minDegree:defineDegreeBoundsFunction("degree",function(e,t){return e<t}),maxDegree:defineDegreeBoundsFunction("degree",function(e,t){return e>t}),minIndegree:defineDegreeBoundsFunction("indegree",function(e,t){return e<t}),maxIndegree:defineDegreeBoundsFunction("indegree",function(e,t){return e>t}),minOutdegree:defineDegreeBoundsFunction("outdegree",function(e,t){return e<t}),maxOutdegree:defineDegreeBoundsFunction("outdegree",function(e,t){return e>t})}),me(Go,{totalDegree:function totalDegree(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var Vo=function beforePositionSet(e,t,n){for(var i=0;i<e.length;i++){var a=e[i];if(!a.locked()){var s=a._private.position,l={x:null!=t.x?t.x-s.x:0,y:null!=t.y?t.y-s.y:0};!a.isParent()||0===l.x&&0===l.y||a.children().shift(l,n),a.dirtyBoundingBoxCache()}}},qo={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function beforeGet(e){e.updateCompoundBounds()},beforeSet:function beforeSet(e,t){Vo(e,t,!1)},onSet:function onSet(e){e.dirtyCompoundBoundsCache()},canSet:function canSet(e){return!e.locked()}};Oo=Fo={position:Ua.data(qo),silentPosition:Ua.data(me({},qo,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function beforeSet(e,t){Vo(e,t,!0)},onSet:function onSet(e){e.dirtyCompoundBoundsCache()}})),positions:function positions(e,t){if(K(e))t?this.silentPosition(e):this.position(e);else if(j(e)){var n=e,i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var s,l=this[a];(s=n(l,a))&&(t?l.silentPosition(s):l.position(s))}i.endBatch()}return this},silentPositions:function silentPositions(e){return this.positions(e,!0)},shift:function shift(e,t,n){var i;if(K(e)?(i={x:Z(e.x)?e.x:0,y:Z(e.y)?e.y:0},n=t):H(e)&&Z(t)&&((i={x:0,y:0})[e]=t),null!=i){var a=this.cy();a.startBatch();for(var s=0;s<this.length;s++){var l=this[s];if(!(a.hasCompoundNodes()&&l.isChild()&&l.ancestors().anySame(this))){var u=l.position(),c={x:u.x+i.x,y:u.y+i.y};n?l.silentPosition(c):l.position(c)}}a.endBatch()}return this},silentShift:function silentShift(e,t){return K(e)?this.shift(e,!0):H(e)&&Z(t)&&this.shift(e,t,!0),this},renderedPosition:function renderedPosition(e,t){var n=this[0],i=this.cy(),a=i.zoom(),s=i.pan(),l=K(e)?e:void 0,u=void 0!==l||void 0!==t&&H(e);if(n&&n.isNode()){if(!u){var c=n.position();return l=It(c,a,s),void 0===e?l:l[e]}for(var h=0;h<this.length;h++){var d=this[h];void 0!==t?d.position(e,(t-s[e])/a):void 0!==l&&d.position(Mt(l,a,s))}}else if(!u)return;return this},relativePosition:function relativePosition(e,t){var n=this[0],i=this.cy(),a=K(e)?e:void 0,s=void 0!==a||void 0!==t&&H(e),l=i.hasCompoundNodes();if(n&&n.isNode()){if(!s){var u=n.position(),c=l?n.parent():null,h=c&&c.length>0,d=h;h&&(c=c[0]);var p=d?c.position():{x:0,y:0};return a={x:u.x-p.x,y:u.y-p.y},void 0===e?a:a[e]}for(var g=0;g<this.length;g++){var v=this[g],y=l?v.parent():null,m=y&&y.length>0,b=m;m&&(y=y[0]);var x=b?y.position():{x:0,y:0};void 0!==t?v.position(e,t+x[e]):void 0!==a&&v.position({x:a.x+x.x,y:a.y+x.y})}}else if(!s)return;return this}},Oo.modelPosition=Oo.point=Oo.position,Oo.modelPositions=Oo.points=Oo.positions,Oo.renderedPoint=Oo.renderedPosition,Oo.relativePoint=Oo.relativePosition;var Yo,Xo,Uo=Fo;Yo=Xo={},Xo.renderedBoundingBox=function(e){var t=this.boundingBox(e),n=this.cy(),i=n.zoom(),a=n.pan(),s=t.x1*i+a.x,l=t.x2*i+a.x,u=t.y1*i+a.y,c=t.y2*i+a.y;return{x1:s,x2:l,y1:u,y2:c,w:l-s,h:c-u}},Xo.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,e||t.emitAndNotify("bounds")}}),this):this},Xo.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function update(e){if(e.isParent()){var t=e._private,n=e.children(),i="include"===e.pstyle("compound-sizing-wrt-labels").value,a={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},s=n.boundingBox({includeLabels:i,includeOverlays:!1,useCache:!1}),l=t.position;0!==s.w&&0!==s.h||((s={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=l.x-s.w/2,s.x2=l.x+s.w/2,s.y1=l.y-s.h/2,s.y2=l.y+s.h/2);var u=a.width.left.value;"px"===a.width.left.units&&a.width.val>0&&(u=100*u/a.width.val);var c=a.width.right.value;"px"===a.width.right.units&&a.width.val>0&&(c=100*c/a.width.val);var h=a.height.top.value;"px"===a.height.top.units&&a.height.val>0&&(h=100*h/a.height.val);var d=a.height.bottom.value;"px"===a.height.bottom.units&&a.height.val>0&&(d=100*d/a.height.val);var p=computeBiasValues(a.width.val-s.w,u,c),g=p.biasDiff,v=p.biasComplementDiff,y=computeBiasValues(a.height.val-s.h,h,d),m=y.biasDiff,b=y.biasComplementDiff;t.autoPadding=function computePaddingValues(e,t,n,i){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(i){case"width":return e>0?n.pfValue*e:0;case"height":return t>0?n.pfValue*t:0;case"average":return e>0&&t>0?n.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?n.pfValue*t:n.pfValue*e:0;case"max":return e>0&&t>0?e>t?n.pfValue*e:n.pfValue*t:0;default:return 0}}(s.w,s.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(s.w,a.width.val),l.x=(-g+s.x1+s.x2+v)/2,t.autoHeight=Math.max(s.h,a.height.val),l.y=(-m+s.y1+s.y2+b)/2}function computeBiasValues(e,t,n){var i=0,a=0,s=t+n;return e>0&&s>0&&(i=t/s*e,a=n/s*e),{biasDiff:i,biasComplementDiff:a}}}for(var n=0;n<this.length;n++){var i=this[n],a=i._private;a.compoundBoundsClean&&!e||(update(i),t.batching()||(a.compoundBoundsClean=!0))}return this};var Ho=function noninf(e){return e===1/0||e===-1/0?0:e},jo=function updateBounds(e,t,n,i,a){i-t!==0&&a-n!==0&&null!=t&&null!=n&&null!=i&&null!=a&&(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Wo=function updateBoundsFromBox(e,t){return null==t?e:jo(e,t.x1,t.y1,t.x2,t.y2)},$o=function prefixedProperty(e,t,n){return at(e,t,n)},Ko=function updateBoundsFromArrow(e,t,n){if(!t.cy().headless()){var i,a,s=t._private,l=s.rstyle,u=l.arrowWidth/2;if("none"!==t.pstyle(n+"-arrow-shape").value){"source"===n?(i=l.srcX,a=l.srcY):"target"===n?(i=l.tgtX,a=l.tgtY):(i=l.midX,a=l.midY);var c=s.arrowBounds=s.arrowBounds||{},h=c[n]=c[n]||{};h.x1=i-u,h.y1=a-u,h.x2=i+u,h.y2=a+u,h.w=h.x2-h.x1,h.h=h.y2-h.y1,Wt(h,1),jo(e,h.x1,h.y1,h.x2,h.y2)}}},Zo=function updateBoundsFromLabel(e,t,n){if(!t.cy().headless()){var i;i=n?n+"-":"";var a=t._private,s=a.rstyle;if(t.pstyle(i+"label").strValue){var l,u,c,h,d=t.pstyle("text-halign"),p=t.pstyle("text-valign"),g=$o(s,"labelWidth",n),v=$o(s,"labelHeight",n),y=$o(s,"labelX",n),m=$o(s,"labelY",n),b=t.pstyle(i+"text-margin-x").pfValue,x=t.pstyle(i+"text-margin-y").pfValue,w=t.isEdge(),E=t.pstyle(i+"text-rotation"),_=t.pstyle("text-outline-width").pfValue,T=t.pstyle("text-border-width").pfValue/2,L=t.pstyle("text-background-padding").pfValue,D=v,S=g,k=S/2,P=D/2;if(w)l=y-k,u=y+k,c=m-P,h=m+P;else{switch(d.value){case"left":l=y-S,u=y;break;case"center":l=y-k,u=y+k;break;case"right":l=y,u=y+S}switch(p.value){case"top":c=m-D,h=m;break;case"center":c=m-P,h=m+P;break;case"bottom":c=m,h=m+D}}var N=b-Math.max(_,T)-L-2,I=b+Math.max(_,T)+L+2,M=x-Math.max(_,T)-L-2,R=x+Math.max(_,T)+L+2;l+=N,u+=I,c+=M,h+=R;var O=n||"main",z=a.labelBounds,G=z[O]=z[O]||{};G.x1=l,G.y1=c,G.x2=u,G.y2=h,G.w=u-l,G.h=h-c,G.leftPad=N,G.rightPad=I,G.topPad=M,G.botPad=R;var V=w&&"autorotate"===E.strValue,q=null!=E.pfValue&&0!==E.pfValue;if(V||q){var Y=V?$o(a.rstyle,"labelAngle",n):E.pfValue,X=Math.cos(Y),U=Math.sin(Y),H=(l+u)/2,j=(c+h)/2;if(!w){switch(d.value){case"left":H=u;break;case"right":H=l}switch(p.value){case"top":j=h;break;case"bottom":j=c}}var W=function rotate(e,t){return{x:(e-=H)*X-(t-=j)*U+H,y:e*U+t*X+j}},K=W(l,c),Z=W(l,h),Q=W(u,c),J=W(u,h);l=Math.min(K.x,Z.x,Q.x,J.x),u=Math.max(K.x,Z.x,Q.x,J.x),c=Math.min(K.y,Z.y,Q.y,J.y),h=Math.max(K.y,Z.y,Q.y,J.y)}var ee=O+"Rot",te=z[ee]=z[ee]||{};te.x1=l,te.y1=c,te.x2=u,te.y2=h,te.w=u-l,te.h=h-c,jo(e,l,c,u,h),jo(a.labelBounds.all,l,c,u,h)}return e}},Qo=function updateBoundsFromOutline(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value+t.pstyle("outline-offset").value;Jo(e,t,n,i,"outside",i/2)}},Jo=function updateBoundsFromMiter(e,t,n,i,a,s){if(!(0===n||i<=0||"inside"===a)){var l=t.cy(),u=t.pstyle("shape").value,c=l.renderer().nodeShapes[u],h=t.position(),d=h.x,p=h.y,g=t.width(),v=t.height();if(c.hasMiterBounds){"center"===a&&(i/=2);var y=c.miterBounds(d,p,g,v,i);Wo(e,y)}else null!=s&&s>0&&$t(e,[s,s,s,s])}},es=function boundingBoxImpl(e,t){var n,i,a,s,l,u,c=e._private.cy,h=c.styleEnabled(),d=c.headless(),p=Ut(),g=e._private,v=e.isNode(),y=e.isEdge(),m=g.rstyle,b=v&&h?e.pstyle("bounds-expansion").pfValue:[0],x=function isDisplayed(e){return"none"!==e.pstyle("display").value},w=!h||x(e)&&(!y||x(e.source())&&x(e.target()));if(w){var E=0;h&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(E=e.pstyle("overlay-padding").value);var _=0;h&&t.includeUnderlays&&0!==e.pstyle("underlay-opacity").value&&(_=e.pstyle("underlay-padding").value);var T=Math.max(E,_),L=0;if(h&&(L=e.pstyle("width").pfValue/2),v&&t.includeNodes){var D=e.position();l=D.x,u=D.y;var S=e.outerWidth()/2,k=e.outerHeight()/2;jo(p,n=l-S,a=u-k,i=l+S,s=u+k),h&&Qo(p,e),h&&t.includeOutlines&&!d&&Qo(p,e),h&&function updateBoundsFromMiterBorder(e,t){if(!t.cy().headless()){var n=t.pstyle("border-opacity").value,i=t.pstyle("border-width").pfValue,a=t.pstyle("border-position").value;Jo(e,t,n,i,a)}}(p,e)}else if(y&&t.includeEdges)if(h&&!d){var P=e.pstyle("curve-style").strValue;if(n=Math.min(m.srcX,m.midX,m.tgtX),i=Math.max(m.srcX,m.midX,m.tgtX),a=Math.min(m.srcY,m.midY,m.tgtY),s=Math.max(m.srcY,m.midY,m.tgtY),jo(p,n-=L,a-=L,i+=L,s+=L),"haystack"===P){var N=m.haystackPts;if(N&&2===N.length){if(n=N[0].x,a=N[0].y,n>(i=N[1].x)){var I=n;n=i,i=I}if(a>(s=N[1].y)){var M=a;a=s,s=M}jo(p,n-L,a-L,i+L,s+L)}}else if("bezier"===P||"unbundled-bezier"===P||he(P,"segments")||he(P,"taxi")){var R;switch(P){case"bezier":case"unbundled-bezier":R=m.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":R=m.linePts}if(null!=R)for(var O=0;O<R.length;O++){var z=R[O];n=z.x-L,i=z.x+L,a=z.y-L,s=z.y+L,jo(p,n,a,i,s)}}}else{var G=e.source().position(),V=e.target().position();if((n=G.x)>(i=V.x)){var q=n;n=i,i=q}if((a=G.y)>(s=V.y)){var Y=a;a=s,s=Y}jo(p,n-=L,a-=L,i+=L,s+=L)}if(h&&t.includeEdges&&y&&(Ko(p,e,"mid-source"),Ko(p,e,"mid-target"),Ko(p,e,"source"),Ko(p,e,"target")),h)if("yes"===e.pstyle("ghost").value){var X=e.pstyle("ghost-offset-x").pfValue,U=e.pstyle("ghost-offset-y").pfValue;jo(p,p.x1+X,p.y1+U,p.x2+X,p.y2+U)}var H=g.bodyBounds=g.bodyBounds||{};Kt(H,p),$t(H,b),Wt(H,1),h&&(n=p.x1,i=p.x2,a=p.y1,s=p.y2,jo(p,n-T,a-T,i+T,s+T));var j=g.overlayBounds=g.overlayBounds||{};Kt(j,p),$t(j,b),Wt(j,1);var W=g.labelBounds=g.labelBounds||{};null!=W.all?function clearBoundingBox(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0}(W.all):W.all=Ut(),h&&t.includeLabels&&(t.includeMainLabels&&Zo(p,e,null),y&&(t.includeSourceLabels&&Zo(p,e,"source"),t.includeTargetLabels&&Zo(p,e,"target")))}return p.x1=Ho(p.x1),p.y1=Ho(p.y1),p.x2=Ho(p.x2),p.y2=Ho(p.y2),p.w=Ho(p.x2-p.x1),p.h=Ho(p.y2-p.y1),p.w>0&&p.h>0&&w&&($t(p,b),Wt(p,1)),p},ts=function getKey(e){var t=0,n=function tf(e){return(e?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines)},ns=function getBoundingBoxPosKey(e){var t=function r(e){return Math.round(e)};if(e.isEdge()){var n=e.source().position(),i=e.target().position();return Oe([t(n.x),t(n.y),t(i.x),t(i.y)])}var a=e.position();return Oe([t(a.x),t(a.y)])},rs=function cachedBoundingBoxImpl(e,t){var n,i=e._private,a=e.isEdge(),s=(null==t?os:ts(t))===os;if(null==i.bbCache?(n=es(e,as),i.bbCache=n,i.bbCachePosKey=ns(e)):n=i.bbCache,!s){var l=e.isNode();n=Ut(),(t.includeNodes&&l||t.includeEdges&&!l)&&(t.includeOverlays?Wo(n,i.overlayBounds):Wo(n,i.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!a||t.includeSourceLabels&&t.includeTargetLabels)?Wo(n,i.labelBounds.all):(t.includeMainLabels&&Wo(n,i.labelBounds.mainRot),t.includeSourceLabels&&Wo(n,i.labelBounds.sourceRot),t.includeTargetLabels&&Wo(n,i.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},as={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},os=ts(as),ss=nt(as);Xo.boundingBox=function(e){var t,n=void 0===e||void 0===e.useCache||!0===e.useCache,i=oe(function(e){var t=e._private;return null==t.bbCache||t.styleDirty||t.bbCachePosKey!==ns(e)},function(e){return e.id()});if(n&&1===this.length&&!i(this[0]))e=void 0===e?as:ss(e),t=rs(this[0],e);else{t=Ut();var a=ss(e=e||as),s=this,l=s.cy().styleEnabled();this.edges().forEach(i),this.nodes().forEach(i),l&&this.recalculateRenderedStyle(n),this.updateCompoundBounds(!n);for(var u=0;u<s.length;u++){var c=s[u];i(c)&&c.dirtyBoundingBoxCache(),Wo(t,rs(c,a))}}return t.x1=Ho(t.x1),t.y1=Ho(t.y1),t.x2=Ho(t.x2),t.y2=Ho(t.y2),t.w=Ho(t.x2-t.x1),t.h=Ho(t.y2-t.y1),t},Xo.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Xo.boundingBoxAt=function(e){var t=this.nodes(),n=this.cy(),i=n.hasCompoundNodes(),a=n.collection();if(i&&(a=t.filter(function(e){return e.isParent()}),t=t.not(a)),K(e)){var s=e;e=function fn(){return s}}n.startBatch(),t.forEach(function storeOldPos(t,n){return t._private.bbAtOldPos=e(t,n)}).silentPositions(e),i&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=function copyBoundingBox(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}}(this.boundingBox({useCache:!1}));return t.silentPositions(function getOldPos(e){return e._private.bbAtOldPos}),i&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),n.endBatch(),l},Yo.boundingbox=Yo.bb=Yo.boundingBox,Yo.renderedBoundingbox=Yo.renderedBoundingBox;var ls,us,cs=Xo;ls=us={};var hs=function defineDimFns(e){e.uppercaseName=ce(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=ce(e.outerName),ls[e.name]=function dimImpl(){var t=this[0],n=t._private,i=n.cy._private.styleEnabled;if(t){if(i){if(t.isParent())return t.updateCompoundBounds(),n[e.autoName]||0;var a=t.pstyle(e.name);return"label"===a.strValue?(t.recalculateRenderedStyle(),n.rstyle[e.labelName]||0):a.pfValue}return 1}},ls["outer"+e.uppercaseName]=function outerDimImpl(){var t=this[0],n=t._private.cy._private.styleEnabled;if(t){if(n){var i=t[e.name](),a=t.pstyle("border-position").value;return i+("center"===a?t.pstyle("border-width").pfValue:"outside"===a?2*t.pstyle("border-width").pfValue:0)+2*t.padding()}return 1}},ls["rendered"+e.uppercaseName]=function renderedDimImpl(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},ls["rendered"+e.uppercaseOuterName]=function renderedOuterDimImpl(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};hs({name:"width"}),hs({name:"height"}),us.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),void 0!==t.autoPadding?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue},us.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},us.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var ds=us,ps={controlPoints:{get:function controlPoints(e){return e.renderer().getControlPoints(e)},mult:!0},segmentPoints:{get:function segmentPoints(e){return e.renderer().getSegmentPoints(e)},mult:!0},sourceEndpoint:{get:function sourceEndpoint(e){return e.renderer().getSourceEndpoint(e)}},targetEndpoint:{get:function targetEndpoint(e){return e.renderer().getTargetEndpoint(e)}},midpoint:{get:function midpoint(e){return e.renderer().getEdgeMidpoint(e)}}},gs=Object.keys(ps).reduce(function(e,t){var n=ps[t],i=function renderedName(e){return"rendered"+e[0].toUpperCase()+e.substr(1)}(t);return e[t]=function(){return function ifEdge(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)}(this,n.get)},n.mult?e[i]=function(){return function ifEdgeRenderedPositions(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),i=n.pan(),a=n.zoom();return t(e).map(function(e){return It(e,a,i)})}}(this,n.get)}:e[i]=function(){return function ifEdgeRenderedPosition(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return It(t(e),n.zoom(),n.pan())}}(this,n.get)},e},{}),fs=me({},Uo,cs,ds,gs),vs=function Event(e,t){this.recycle(e,t)};function returnFalse(){return!1}function returnTrue(){return!0}vs.prototype={instanceString:function instanceString(){return"event"},recycle:function recycle(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=returnFalse,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?returnTrue:returnFalse):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,i=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*i+a.x,y:n.y*i+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function preventDefault(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function stopPropagation(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function stopImmediatePropagation(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var ys=/^([^.]+)(\.(?:[^.]+))?$/,bs={qualifierCompare:function qualifierCompare(e,t){return e===t},eventMatches:function eventMatches(){return!0},addEventFields:function addEventFields(){},callbackContext:function callbackContext(e){return e},beforeEmit:function beforeEmit(){},afterEmit:function afterEmit(){},bubble:function bubble(){return!1},parent:function parent(){return null},context:null},xs=Object.keys(bs),ws={};function Emitter(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ws,t=arguments.length>1?arguments[1]:void 0,n=0;n<xs.length;n++){var i=xs[n];this[i]=e[i]||bs[i]}this.context=t||this.context,this.listeners=[],this.emitting=0}var Es=Emitter.prototype,_s=function forEachEvent(e,t,n,i,a,s,l){j(i)&&(a=i,i=null),l&&(s=null==s?l:me({},s,l));for(var u=W(n)?n:n.split(/\s+/),c=0;c<u.length;c++){var h=u[c];if(!ie(h)){var d=h.match(ys);if(d)if(!1===t(e,h,d[1],d[2]?d[2]:null,i,a,s))break}}},Cs=function makeEventObj(e,t){return e.addEventFields(e.context,t),new vs(t.type,t)},Ts=function forEachEventObj(e,t,n){if(function event(e){return"event"===U(e)}(n))t(e,n);else if(K(n))t(e,Cs(e,n));else for(var i=W(n)?n:n.split(/\s+/),a=0;a<i.length;a++){var s=i[a];if(!ie(s)){var l=s.match(ys);if(l){var u=l[1],c=l[2]?l[2]:null;t(e,Cs(e,{type:u,namespace:c,target:e.context}))}}}};Es.on=Es.addListener=function(e,t,n,i,a){return _s(this,function(e,t,n,i,a,s,l){j(s)&&e.listeners.push({event:t,callback:s,type:n,namespace:i,qualifier:a,conf:l})},e,t,n,i,a),this},Es.one=function(e,t,n,i){return this.on(e,t,n,i,{one:!0})},Es.removeListener=Es.off=function(e,t,n,i){var a=this;0!==this.emitting&&(this.listeners=function copyArray(e){return e.slice()}(this.listeners));for(var s=this.listeners,l=function _loop(l){var u=s[l];_s(a,function(t,n,i,a,c,h){if((u.type===i||"*"===e)&&(!a&&".*"!==u.namespace||u.namespace===a)&&(!c||t.qualifierCompare(u.qualifier,c))&&(!h||u.callback===h))return s.splice(l,1),!1},e,t,n,i)},u=s.length-1;u>=0;u--)l(u);return this},Es.removeAllListeners=function(){return this.removeListener("*")},Es.emit=Es.trigger=function(e,t,n){var i=this.listeners,a=i.length;return this.emitting++,W(t)||(t=[t]),Ts(this,function(e,s){null!=n&&(i=[{event:s.event,type:s.type,namespace:s.namespace,callback:n}],a=i.length);for(var l=function _loop2(){var n=i[u];if(n.type===s.type&&(!n.namespace||n.namespace===s.namespace||".*"===n.namespace)&&e.eventMatches(e.context,n,s)){var a=[s];null!=t&&function push(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}}(a,t),e.beforeEmit(e.context,n,s),n.conf&&n.conf.one&&(e.listeners=e.listeners.filter(function(e){return e!==n}));var l=e.callbackContext(e.context,n,s),c=n.callback.apply(l,a);e.afterEmit(e.context,n,s),!1===c&&(s.stopPropagation(),s.preventDefault())}},u=0;u<a;u++)l();e.bubble(e.context)&&!s.isPropagationStopped()&&e.parent(e.context).emit(s,t)},e),this.emitting--,this};var Ls={qualifierCompare:function qualifierCompare(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function eventMatches(e,t,n){var i=t.qualifier;return null==i||e!==n.target&&ee(n.target)&&i.matches(n.target)},addEventFields:function addEventFields(e,t){t.cy=e.cy(),t.target=e},callbackContext:function callbackContext(e,t,n){return null!=t.qualifier?n.target:e},beforeEmit:function beforeEmit(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function bubble(){return!0},parent:function parent(e){return e.isChild()?e.parent():e.cy()}},Ds=function argSelector(e){return H(e)?new ko(e):e},As={createEmitter:function createEmitter(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new Emitter(Ls,t))}return this},emitter:function emitter(){return this._private.emitter},on:function on(e,t,n){for(var i=Ds(t),a=0;a<this.length;a++){this[a].emitter().on(e,i,n)}return this},removeListener:function removeListener(e,t,n){for(var i=Ds(t),a=0;a<this.length;a++){this[a].emitter().removeListener(e,i,n)}return this},removeAllListeners:function removeAllListeners(){for(var e=0;e<this.length;e++){this[e].emitter().removeAllListeners()}return this},one:function one(e,t,n){for(var i=Ds(t),a=0;a<this.length;a++){this[a].emitter().one(e,i,n)}return this},once:function once(e,t,n){for(var i=Ds(t),a=0;a<this.length;a++){this[a].emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function emit(e,t){for(var n=0;n<this.length;n++){this[n].emitter().emit(e,t)}return this},emitAndNotify:function emitAndNotify(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};Ua.eventAliasesOn(As);var Ss={nodes:function nodes(e){return this.filter(function(e){return e.isNode()}).filter(e)},edges:function edges(e){return this.filter(function(e){return e.isEdge()}).filter(e)},byGroup:function byGroup(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function filter(e,t){if(void 0===e)return this;if(H(e)||J(e))return new ko(e).filter(this);if(j(e)){for(var n=this.spawn(),i=this,a=0;a<i.length;a++){var s=i[a];(t?e.apply(t,[s,a,i]):e(s,a,i))&&n.push(s)}return n}return this.spawn()},not:function not(e){if(e){H(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var i=this[n];e.has(i)||t.push(i)}return t}return this},absoluteComplement:function absoluteComplement(){return this.cy().mutableElements().not(this)},intersect:function intersect(e){if(H(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),i=e,a=this.length<e.length,s=a?this:i,l=a?i:this,u=0;u<s.length;u++){var c=s[u];l.has(c)&&n.push(c)}return n},xor:function xor(e){var t=this._private.cy;H(e)&&(e=t.$(e));var n=this.spawn(),i=e,a=function add(e,t){for(var i=0;i<e.length;i++){var a=e[i],s=a._private.data.id;t.hasElementWithId(s)||n.push(a)}};return a(this,i),a(i,this),n},diff:function diff(e){var t=this._private.cy;H(e)&&(e=t.$(e));var n=this.spawn(),i=this.spawn(),a=this.spawn(),s=e,l=function add(e,t,n){for(var i=0;i<e.length;i++){var s=e[i],l=s._private.data.id;t.hasElementWithId(l)?a.merge(s):n.push(s)}};return l(this,s,n),l(s,this,i),{left:n,right:i,both:a}},add:function add(e){var t=this._private.cy;if(!e)return this;if(H(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=this.spawnSelf(),a=0;a<e.length;a++){var s=e[a],add=!this.has(s);add&&i.push(s)}return i},merge:function merge(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&H(e)){var i=e;e=n.mutableElements().filter(i)}for(var a=t.map,s=0;s<e.length;s++){var l=e[s],u=l._private.data.id;if(!a.has(u)){var c=this.length++;this[c]=l,a.set(u,{ele:l,index:c})}}return this},unmergeAt:function unmergeAt(e){var t=this[e].id(),n=this._private.map;this[e]=void 0,n.delete(t);var i=e===this.length-1;if(this.length>1&&!i){var a=this.length-1,s=this[a],l=s._private.data.id;this[a]=void 0,this[e]=s,n.set(l,{ele:s,index:e})}return this.length--,this},unmergeOne:function unmergeOne(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map.get(n);if(!i)return this;var a=i.index;return this.unmergeAt(a),this},unmerge:function unmerge(e){var t=this._private.cy;if(!e)return this;if(e&&H(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function unmergeBy(e){for(var t=this.length-1;t>=0;t--){e(this[t])&&this.unmergeAt(t)}return this},map:function map(e,t){for(var n=[],i=this,a=0;a<i.length;a++){var s=i[a],l=t?e.apply(t,[s,a,i]):e(s,a,i);n.push(l)}return n},reduce:function reduce(e,t){for(var n=t,i=this,a=0;a<i.length;a++)n=e(n,i[a],a,i);return n},max:function max(e,t){for(var n,max=-1/0,i=this,a=0;a<i.length;a++){var s=i[a],l=t?e.apply(t,[s,a,i]):e(s,a,i);l>max&&(max=l,n=s)}return{value:max,ele:n}},min:function min(e,t){for(var n,min=1/0,i=this,a=0;a<i.length;a++){var s=i[a],l=t?e.apply(t,[s,a,i]):e(s,a,i);l<min&&(min=l,n=s)}return{value:min,ele:n}}},ks=Ss;ks.u=ks["|"]=ks["+"]=ks.union=ks.or=ks.add,ks["\\"]=ks["!"]=ks["-"]=ks.difference=ks.relativeComplement=ks.subtract=ks.not,ks.n=ks["&"]=ks["."]=ks.and=ks.intersection=ks.intersect,ks["^"]=ks["(+)"]=ks["(-)"]=ks.symmetricDifference=ks.symdiff=ks.xor,ks.fnFilter=ks.filterFn=ks.stdFilter=ks.filter,ks.complement=ks.abscomp=ks.absoluteComplement;var Ps=function zIndexSort(e,t){var n=e.cy().hasCompoundNodes();function getDepth(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?n?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?Xe:0}var i=getDepth(e)-getDepth(t);if(0!==i)return i;function getEleDepth(e){return"auto"===e.pstyle("z-index-compare").value&&e.isNode()?1:0}var a=getEleDepth(e)-getEleDepth(t);if(0!==a)return a;var s=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==s?s:e.poolIndex()-t.poolIndex()},Ns={forEach:function forEach(e,t){if(j(e))for(var n=this.length,i=0;i<n;i++){var a=this[i];if(!1===(t?e.apply(t,[a,i,this]):e(a,i,this)))break}return this},toArray:function toArray(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function slice(e,t){var n=[],i=this.length;null==t&&(t=i),null==e&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var a=e;a>=0&&a<t&&a<i;a++)n.push(this[a]);return this.spawn(n)},size:function size(){return this.length},eq:function eq(e){return this[e]||this.spawn()},first:function first(){return this[0]||this.spawn()},last:function last(){return this[this.length-1]||this.spawn()},empty:function empty(){return 0===this.length},nonempty:function nonempty(){return!this.empty()},sort:function sort(e){if(!j(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function sortByZIndex(){return this.sort(Ps)},zDepth:function zDepth(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var n=t.data.parent?e.parents().size():0;return e.isParent()?n:Xe-1}var i=t.source,a=t.target,s=i.zDepth(),l=a.zDepth();return Math.max(s,l,0)}}};Ns.each=Ns.forEach;!function defineSymbolIterator(){var e="undefined";("undefined"==typeof Symbol?"undefined":_typeof(Symbol))!=e&&_typeof(Symbol.iterator)!=e&&(Ns[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},n=0,i=this.length;return _defineProperty$1({next:function next(){return n<i?t.value=e[n++]:(t.value=void 0,t.done=!0),t}},Symbol.iterator,function(){return this})})}();var Is=nt({nodeDimensionsIncludeLabels:!1}),Ms={layoutDimensions:function layoutDimensions(e){var t;if(e=Is(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return 0!==t.w&&0!==t.h||(t.w=t.h=1),t},layoutPositions:function layoutPositions(e,t,n){var i=this.nodes().filter(function(e){return!e.isParent()}),a=this.cy(),s=t.eles,l=function getMemoizeKey(e){return e.id()},u=oe(n,l);e.emit({type:"layoutstart",layout:e}),e.animations=[];var c=t.spacingFactor&&1!==t.spacingFactor,h=function spacingBb(){if(!c)return null;for(var e=Ut(),t=0;t<i.length;t++){var n=i[t],a=u(n,t);jt(e,a.x,a.y)}return e}(),d=oe(function(e,n){var i=u(e,n);c&&(i=function calculateSpacing(e,t,n){var i=t.x1+t.w/2,a=t.y1+t.h/2;return{x:i+(n.x-i)*e,y:a+(n.y-a)*e}}(Math.abs(t.spacingFactor),h,i));return null!=t.transform&&(i=t.transform(e,i)),i},l);if(t.animate){for(var p=0;p<i.length;p++){var g=i[p],v=d(g,p);if(null==t.animateFilter||t.animateFilter(g,p)){var y=g.animation({position:v,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}else g.position(v)}if(t.fit){var m=a.animation({fit:{boundingBox:s.boundingBoxAt(d),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else if(void 0!==t.zoom&&void 0!==t.pan){var b=a.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(b)}e.animations.forEach(function(e){return e.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),zr.all(e.animations.map(function(e){return e.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(d),t.fit&&a.fit(t.eles,t.padding),null!=t.zoom&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function layout(e){return this.cy().makeLayout(me({},e,{eles:this}))}};function styleCache(e,t,n){var i,a=n._private,s=a.styleCache=a.styleCache||[];return null!=(i=s[e])?i:i=s[e]=t(n)}function cacheStyleFunction(e,t){return e=Fe(e),function cachedStyleFunction(n){return styleCache(e,t,n)}}function cachePrototypeStyleFunction(e,t){e=Fe(e);var n=function selfFn(e){return t.call(e)};return function cachedPrototypeStyleFunction(){var t=this[0];if(t)return styleCache(e,n,t)}}Ms.createLayout=Ms.makeLayout=Ms.layout;var Rs={recalculateRenderedStyle:function recalculateRenderedStyle(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function dirtyStyleCache(){var e,t=this.cy(),n=function dirty(e){return e._private.styleCache=null};t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(n)):this.forEach(function(e){n(e),e.connectedEdges().forEach(n)});return this},updateStyle:function updateStyle(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var n=this;e=!(!e&&void 0!==e),t.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var i=n;return e?i.emitAndNotify("style"):i.emit("style"),n.forEach(function(e){return e._private.styleDirty=!0}),this},cleanStyle:function cleanStyle(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function parsedStyle(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],i=n.cy();if(i.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,i.style().apply(n));var a=n._private.style[e];return null!=a?a:t?i.style().getDefaultProperty(e):null}},numericStyle:function numericStyle(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function numericStyleUnits(e){var t=this[0];if(t.cy().styleEnabled())return t?t.pstyle(e).units:void 0},renderedStyle:function renderedStyle(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];return n?t.style().getRenderedStyle(n,e):void 0},style:function style(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,style=n.style();if(K(e)){var a=e;style.applyBypass(this,a,i),this.emitAndNotify("style")}else if(H(e)){if(void 0===t){var s=this[0];return s?style.getStylePropertyValue(s,e):void 0}style.applyBypass(this,e,t,i),this.emitAndNotify("style")}else if(void 0===e){var l=this[0];return l?style.getRawStyle(l):void 0}return this},removeStyle:function removeStyle(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,i=t.style(),a=this;if(void 0===e)for(var s=0;s<a.length;s++){var l=a[s];i.removeAllBypasses(l,n)}else{e=e.split(/\s+/);for(var u=0;u<a.length;u++){var c=a[u];i.removeBypasses(c,e,n)}}return this.emitAndNotify("style"),this},show:function show(){return this.css("display","element"),this},hide:function hide(){return this.css("display","none"),this},effectiveOpacity:function effectiveOpacity(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,a=n.pstyle("opacity").value;if(!t)return a;var s=i.data.parent?n.parents():null;if(s)for(var l=0;l<s.length;l++){a*=s[l].pstyle("opacity").value}return a}},transparent:function transparent(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e.pstyle("opacity").value:void 0},backgrounding:function backgrounding(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function checkCompound(e,t){var n=e._private.data.parent?e.parents():null;if(n)for(var i=0;i<n.length;i++){if(!t(n[i]))return!1}return!0}function defineDerivedStateFunction(e){var t=e.ok,n=e.edgeOkViaNode||e.ok,i=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var a=this[0],s=e.hasCompoundNodes();if(a){var l=a._private;if(!t(a))return!1;if(a.isNode())return!s||checkCompound(a,i);var u=l.source,c=l.target;return n(u)&&(!s||checkCompound(u,n))&&(u===c||n(c)&&(!s||checkCompound(c,n)))}}}var Bs=cacheStyleFunction("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});Rs.takesUpSpace=cachePrototypeStyleFunction("takesUpSpace",defineDerivedStateFunction({ok:Bs}));var Os=cacheStyleFunction("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&Bs(e)}),Fs=cacheStyleFunction("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&Bs(e)});Rs.interactive=cachePrototypeStyleFunction("interactive",defineDerivedStateFunction({ok:Os,parentOk:Fs,edgeOkViaNode:Bs})),Rs.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var zs=cacheStyleFunction("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&Bs(e)}),Gs=Bs;Rs.visible=cachePrototypeStyleFunction("visible",defineDerivedStateFunction({ok:zs,edgeOkViaNode:Gs})),Rs.hidden=function(){var e=this[0];if(e)return!e.visible()},Rs.isBundledBezier=cachePrototypeStyleFunction("isBundledBezier",function(){return!!this.cy().styleEnabled()&&(!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace())}),Rs.bypass=Rs.css=Rs.style,Rs.renderedCss=Rs.renderedStyle,Rs.removeBypass=Rs.removeCss=Rs.removeStyle,Rs.pstyle=Rs.parsedStyle;var Vs={};function defineSwitchFunction(e){return function(){var t=arguments,n=[];if(2===t.length){var i=t[0],a=t[1];this.on(e.event,i,a)}else if(1===t.length&&j(t[0])){var s=t[0];this.on(e.event,s)}else if(0===t.length||1===t.length&&W(t[0])){for(var l=1===t.length?t[0]:null,u=0;u<this.length;u++){var c=this[u],h=!e.ableField||c._private[e.ableField],d=c._private[e.field]!=e.value;if(e.overrideAble){var p=e.overrideAble(c);if(void 0!==p&&(h=p,!p))return this}h&&(c._private[e.field]=e.value,d&&n.push(c))}var g=this.spawn(n);g.updateStyle(),g.emit(e.event),l&&g.emit(l)}return this}}function defineSwitchSet(e){Vs[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var n=e.overrideField(t);if(void 0!==n)return n}return t._private[e.field]}},Vs[e.on]=defineSwitchFunction({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),Vs[e.off]=defineSwitchFunction({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}defineSwitchSet({field:"locked",overrideField:function overrideField(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),defineSwitchSet({field:"grabbable",overrideField:function overrideField(e){return!e.cy().autoungrabify()&&!e.pannable()&&void 0},on:"grabify",off:"ungrabify"}),defineSwitchSet({field:"selected",ableField:"selectable",overrideAble:function overrideAble(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),defineSwitchSet({field:"selectable",overrideField:function overrideField(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),Vs.deselect=Vs.unselect,Vs.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},defineSwitchSet({field:"active",on:"activate",off:"unactivate"}),defineSwitchSet({field:"pannable",on:"panify",off:"unpanify"}),Vs.inactive=function(){var e=this[0];if(e)return!e._private.active};var qs={},Ys=function defineDagExtremity(e){return function dagExtremityImpl(t){for(var n=[],i=0;i<this.length;i++){var a=this[i];if(a.isNode()){for(var s=!1,l=a.connectedEdges(),u=0;u<l.length;u++){var c=l[u],h=c.source(),d=c.target();if(e.noIncomingEdges&&d===a&&h!==a||e.noOutgoingEdges&&h===a&&d!==a){s=!0;break}}s||n.push(a)}}return this.spawn(n,!0).filter(t)}},Xs=function defineDagOneHop(e){return function(t){for(var n=[],i=0;i<this.length;i++){var a=this[i];if(a.isNode())for(var s=a.connectedEdges(),l=0;l<s.length;l++){var u=s[l],c=u.source(),h=u.target();e.outgoing&&c===a?(n.push(u),n.push(h)):e.incoming&&h===a&&(n.push(u),n.push(c))}}return this.spawn(n,!0).filter(t)}},Us=function defineDagAllHops(e){return function(t){for(var n=this,i=[],a={};;){var s=e.outgoing?n.outgoers():n.incomers();if(0===s.length)break;for(var l=!1,u=0;u<s.length;u++){var c=s[u],h=c.id();a[h]||(a[h]=!0,i.push(c),l=!0)}if(!l)break;n=s}return this.spawn(i,!0).filter(t)}};function defineSourceFunction(e){return function sourceImpl(t){for(var n=[],i=0;i<this.length;i++){var a=this[i]._private[e.attr];a&&n.push(a)}return this.spawn(n,!0).filter(t)}}function defineEdgesWithFunction(e){return function edgesWithImpl(t){var n=[],i=this._private.cy,a=e||{};H(t)&&(t=i.$(t));for(var s=0;s<t.length;s++)for(var l=t[s]._private.edges,u=0;u<l.length;u++){var c=l[u],h=c._private.data,d=this.hasElementWithId(h.source)&&t.hasElementWithId(h.target),p=t.hasElementWithId(h.source)&&this.hasElementWithId(h.target);if(d||p){if(a.thisIsSrc||a.thisIsTgt){if(a.thisIsSrc&&!d)continue;if(a.thisIsTgt&&!p)continue}n.push(c)}}return this.spawn(n,!0)}}function defineParallelEdgesFunction(e){return e=me({},{codirected:!1},e),function parallelEdgesImpl(t){for(var n=[],i=this.edges(),a=e,s=0;s<i.length;s++)for(var l=i[s]._private,u=l.source,c=u._private.data.id,h=l.data.target,d=u._private.edges,p=0;p<d.length;p++){var g=d[p],v=g._private.data,y=v.target,m=v.source,b=y===h&&m===c,x=c===y&&h===m;(a.codirected&&b||!a.codirected&&(b||x))&&n.push(g)}return this.spawn(n,!0).filter(t)}}qs.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},me(qs,{roots:Ys({noIncomingEdges:!0}),leaves:Ys({noOutgoingEdges:!0}),outgoers:Ro(Xs({outgoing:!0}),"outgoers"),successors:Us({outgoing:!0}),incomers:Ro(Xs({incoming:!0}),"incomers"),predecessors:Us({})}),me(qs,{neighborhood:Ro(function(e){for(var t=[],n=this.nodes(),i=0;i<n.length;i++)for(var a=n[i],s=a.connectedEdges(),l=0;l<s.length;l++){var u=s[l],c=u.source(),h=u.target(),d=a===c?h:c;d.length>0&&t.push(d[0]),t.push(u[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function closedNeighborhood(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function openNeighborhood(e){return this.neighborhood(e)}}),qs.neighbourhood=qs.neighborhood,qs.closedNeighbourhood=qs.closedNeighborhood,qs.openNeighbourhood=qs.openNeighborhood,me(qs,{source:Ro(function sourceImpl(e){var t,n=this[0];return n&&(t=n._private.source||n.cy().collection()),t&&e?t.filter(e):t},"source"),target:Ro(function targetImpl(e){var t,n=this[0];return n&&(t=n._private.target||n.cy().collection()),t&&e?t.filter(e):t},"target"),sources:defineSourceFunction({attr:"source"}),targets:defineSourceFunction({attr:"target"})}),me(qs,{edgesWith:Ro(defineEdgesWithFunction(),"edgesWith"),edgesTo:Ro(defineEdgesWithFunction({thisIsSrc:!0}),"edgesTo")}),me(qs,{connectedEdges:Ro(function(e){for(var t=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode())for(var a=i._private.edges,s=0;s<a.length;s++){var l=a[s];t.push(l)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:Ro(function(e){for(var t=[],n=0;n<this.length;n++){var i=this[n];i.isEdge()&&(t.push(i.source()[0]),t.push(i.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:Ro(defineParallelEdgesFunction(),"parallelEdges"),codirectedEdges:Ro(defineParallelEdgesFunction({codirected:!0}),"codirectedEdges")}),me(qs,{components:function components(e){var t=this,n=t.cy(),i=n.collection(),a=null==e?t.nodes():e.nodes(),components=[];null!=e&&a.empty()&&(a=e.sources());var s=function visitInComponent(e,t){i.merge(e),a.unmerge(e),t.merge(e)};if(a.empty())return t.spawn();var l=function _loop(){var e=n.collection();components.push(e);var i=a[0];s(i,e),t.bfs({directed:!1,roots:i,visit:function visit(t){return s(t,e)}}),e.forEach(function(n){n.connectedEdges().forEach(function(n){t.has(n)&&e.has(n.source())&&e.has(n.target())&&e.merge(n)})})};do{l()}while(a.length>0);return components},component:function component(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),qs.componentsOf=qs.components;var Hs=function Collection(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e){var a=new st,s=!1;if(t){if(t.length>0&&K(t[0])&&!ee(t[0])){s=!0;for(var l=[],u=new ut,c=0,h=t.length;c<h;c++){var d=t[c];null==d.data&&(d.data={});var p=d.data;if(null==p.id)p.id=Je();else if(e.hasElementWithId(p.id)||u.has(p.id))continue;var g=new ct(e,d,!1);l.push(g),u.add(p.id)}t=l}}else t=[];this.length=0;for(var v=0,y=t.length;v<y;v++){var m=t[v][0];if(null!=m){var b=m._private.data.id;n&&a.has(b)||(n&&a.set(b,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(e){this.lazyMap=e},rebuildMap:function rebuildMap(){for(var e=this.lazyMap=new st,t=this.eles,n=0;n<t.length;n++){var i=t[n];e.set(i.id(),{index:n,ele:i})}}},n&&(this._private.map=a),s&&!i&&this.restore()}else $e("A collection must have a reference to the core")},js=ct.prototype=Hs.prototype=Object.create(Array.prototype);js.instanceString=function(){return"collection"},js.spawn=function(e,t){return new Hs(this.cy(),e,t)},js.spawnSelf=function(){return this.spawn(this)},js.cy=function(){return this._private.cy},js.renderer=function(){return this._private.cy.renderer()},js.element=function(){return this[0]},js.collection=function(){return te(this)?this:new Hs(this._private.cy,[this])},js.unique=function(){return new Hs(this._private.cy,this,!0)},js.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},js.getElementById=function(e){e=""+e;var t=this._private.cy,n=this._private.map.get(e);return n?n.ele:new Hs(t)},js.$id=js.getElementById,js.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},js.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},js.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},js.json=function(e){var t=this.element(),n=this.cy();if(null==t&&e)return this;if(null!=t){var i=t._private;if(K(e)){if(n.startBatch(),e.data){t.data(e.data);var a=i.data;if(t.isEdge()){var s=!1,l={},u=e.data.source,c=e.data.target;null!=u&&u!=a.source&&(l.source=""+u,s=!0),null!=c&&c!=a.target&&(l.target=""+c,s=!0),s&&(t=t.move(l))}else{var h="parent"in e.data,d=e.data.parent;!h||null==d&&null==a.parent||d==a.parent||(void 0===d&&(d=null),null!=d&&(d=""+d),t=t.move({parent:d}))}}e.position&&t.position(e.position);var p=function checkSwitch(n,a,s){var l=e[n];null!=l&&l!==i[n]&&(l?t[a]():t[s]())};return p("removed","remove","restore"),p("selected","select","unselect"),p("selectable","selectify","unselectify"),p("locked","lock","unlock"),p("grabbable","grabify","ungrabify"),p("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),n.endBatch(),this}if(void 0===e){var g={data:Qe(i.data),position:Qe(i.position),group:i.group,removed:i.removed,selected:i.selected,selectable:i.selectable,locked:i.locked,grabbable:i.grabbable,pannable:i.pannable,classes:(null,"")},v=0;return i.classes.forEach(function(e){return g.classes+=0===v++?e:" "+e}),g}}},js.jsons=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].json();e.push(n)}return e},js.clone=function(){for(var e=this.cy(),t=[],n=0;n<this.length;n++){var i=this[n].json(),a=new ct(e,i,!1);t.push(a)}return new Hs(e,t)},js.copy=js.clone,js.restore=function(){for(var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=this,s=a.cy(),l=s._private,u=[],c=[],h=0,d=a.length;h<d;h++){var p=a[h];i&&!p.removed()||(p.isNode()?u.push(p):c.push(p))}e=u.concat(c);var g=function removeFromElements(){e.splice(t,1),t--};for(t=0;t<e.length;t++){var v=e[t],y=v._private,m=y.data;if(v.clearTraversalCache(),i||y.removed)if(void 0===m.id)m.id=Je();else if(Z(m.id))m.id=""+m.id;else{if(ie(m.id)||!H(m.id)){$e("Can not create element with invalid string ID `"+m.id+"`"),g();continue}if(s.hasElementWithId(m.id)){$e("Can not create second element with ID `"+m.id+"`"),g();continue}}else;var b=m.id;if(v.isNode()){var x=y.position;null==x.x&&(x.x=0),null==x.y&&(x.y=0)}if(v.isEdge()){for(var w=v,E=["source","target"],_=E.length,T=!1,L=0;L<_;L++){var D=E[L],S=m[D];Z(S)&&(S=m[D]=""+m[D]),null==S||""===S?($e("Can not create edge `"+b+"` with unspecified "+D),T=!0):s.hasElementWithId(S)||($e("Can not create edge `"+b+"` with nonexistant "+D+" `"+S+"`"),T=!0)}if(T){g();continue}var k=s.getElementById(m.source),P=s.getElementById(m.target);k.same(P)?k._private.edges.push(w):(k._private.edges.push(w),P._private.edges.push(w)),w._private.source=k,w._private.target=P}y.map=new st,y.map.set(b,{ele:v,index:0}),y.removed=!1,i&&s.addToPool(v)}for(var N=0;N<u.length;N++){var I=u[N],M=I._private.data;Z(M.parent)&&(M.parent=""+M.parent);var R=M.parent;if(null!=R||I._private.parent){var O=I._private.parent?s.collection().merge(I._private.parent):s.getElementById(R);if(O.empty())M.parent=void 0;else if(O[0].removed())Ze("Node added with missing parent, reference to parent removed"),M.parent=void 0,I._private.parent=null;else{for(var z=!1,G=O;!G.empty();){if(I.same(G)){z=!0,M.parent=void 0;break}G=G.parent()}z||(O[0]._private.children.push(I),I._private.parent=O[0],l.hasCompoundNodes=!0)}}}if(e.length>0){for(var V=e.length===a.length?a:new Hs(s,e),q=0;q<V.length;q++){var Y=V[q];Y.isNode()||(Y.parallelEdges().clearTraversalCache(),Y.source().clearTraversalCache(),Y.target().clearTraversalCache())}(l.hasCompoundNodes?s.collection().merge(V).merge(V.connectedNodes()).merge(V.parent()):V).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?V.emitAndNotify("add"):i&&V.emit("add")}return a},js.removed=function(){var e=this[0];return e&&e._private.removed},js.inside=function(){var e=this[0];return e&&!e._private.removed},js.remove=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=[],a={},s=n._private.cy;function add(e){var n=a[e.id()];t&&e.removed()||n||(a[e.id()]=!0,e.isNode()?(i.push(e),function addConnectedEdges(e){for(var t=e._private.edges,n=0;n<t.length;n++)add(t[n])}(e),function addChildren(e){for(var t=e._private.children,n=0;n<t.length;n++)add(t[n])}(e)):i.unshift(e))}for(var l=0,u=n.length;l<u;l++){add(n[l])}function removeEdgeRef(e,t){var n=e._private.edges;rt(n,t),e.clearTraversalCache()}function removeParallelRef(e){e.clearTraversalCache()}var c=[];function removeChildRef(e,t){t=t[0];var n=(e=e[0])._private.children,i=e.id();rt(n,t),t._private.parent=null,c.ids[i]||(c.ids[i]=!0,c.push(e))}c.ids={},n.dirtyCompoundBoundsCache(),t&&s.removeFromPool(i);for(var h=0;h<i.length;h++){var d=i[h];if(d.isEdge()){var p=d.source()[0],g=d.target()[0];removeEdgeRef(p,d),removeEdgeRef(g,d);for(var v=d.parallelEdges(),y=0;y<v.length;y++){var m=v[y];removeParallelRef(m),m.isBundledBezier()&&m.dirtyBoundingBoxCache()}}else{var b=d.parent();0!==b.length&&removeChildRef(b,d)}t&&(d._private.removed=!0)}var x=s._private.elements;s._private.hasCompoundNodes=!1;for(var w=0;w<x.length;w++){if(x[w].isParent()){s._private.hasCompoundNodes=!0;break}}var E=new Hs(this.cy(),i);E.size()>0&&(e?E.emitAndNotify("remove"):t&&E.emit("remove"));for(var _=0;_<c.length;_++){var T=c[_];t&&T.removed()||T.updateStyle()}return E},js.move=function(e){var t=this._private.cy,n=this,i=!1,a=!1,s=function toString(e){return null==e?e:""+e};if(void 0!==e.source||void 0!==e.target){var l=s(e.source),u=s(e.target),c=null!=l&&t.hasElementWithId(l),h=null!=u&&t.hasElementWithId(u);(c||h)&&(t.batch(function(){n.remove(i,a),n.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var t=n[e],s=t._private.data;t.isEdge()&&(c&&(s.source=l),h&&(s.target=u))}n.restore(i,a)}),n.emitAndNotify("move"))}else if(void 0!==e.parent){var d=s(e.parent);if(null===d||t.hasElementWithId(d)){var p=null===d?void 0:d;t.batch(function(){var e=n.remove(i,a);e.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var s=n[t],l=s._private.data;s.isNode()&&(l.parent=p)}e.restore(i,a)}),n.emitAndNotify("move")}}return this},[Nr,Ha,ja,No,Bo,zo,Go,fs,As,Ss,{isNode:function isNode(){return"nodes"===this.group()},isEdge:function isEdge(){return"edges"===this.group()},isLoop:function isLoop(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function isSimple(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function group(){var e=this[0];if(e)return e._private.group}},Ns,Ms,Rs,Vs,qs].forEach(function(e){me(js,e)});var Ws={add:function add(e){var t,n=this;if(J(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var a=[],s=0;s<i.length;s++){var l=i[s];a.push(l.json())}t=new Hs(n,a)}}else if(W(e)){t=new Hs(n,e)}else if(K(e)&&(W(e.nodes)||W(e.edges))){for(var u=e,c=[],h=["nodes","edges"],d=0,p=h.length;d<p;d++){var g=h[d],v=u[g];if(W(v))for(var y=0,m=v.length;y<m;y++){var b=me({group:g},v[y]);c.push(b)}}t=new Hs(n,c)}else{t=new ct(n,e).collection()}return t},remove:function remove(e){if(J(e));else if(H(e)){var t=e;e=this.$(t)}return e.remove()}};function generateCubicBezier(e,t,n,i){var a=.1,s="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var l=0;l<4;++l)if("number"!=typeof arguments[l]||isNaN(arguments[l])||!isFinite(arguments[l]))return!1;e=Math.min(e,1),n=Math.min(n,1),e=Math.max(e,0),n=Math.max(n,0);var u=s?new Float32Array(11):new Array(11);function A(e,t){return 1-3*t+3*e}function B(e,t){return 3*t-6*e}function C(e){return 3*e}function calcBezier(e,t,n){return((A(t,n)*e+B(t,n))*e+C(t))*e}function getSlope(e,t,n){return 3*A(t,n)*e*e+2*B(t,n)*e+C(t)}function getTForX(t){for(var i=0,s=1;10!==s&&u[s]<=t;++s)i+=a;--s;var l=i+(t-u[s])/(u[s+1]-u[s])*a,c=getSlope(l,e,n);return c>=.001?function newtonRaphsonIterate(t,i){for(var a=0;a<4;++a){var s=getSlope(i,e,n);if(0===s)return i;i-=(calcBezier(i,e,n)-t)/s}return i}(t,l):0===c?l:function binarySubdivide(t,i,a){var s,l,u=0;do{(s=calcBezier(l=i+(a-i)/2,e,n)-t)>0?a=l:i=l}while(Math.abs(s)>1e-7&&++u<10);return l}(t,i,i+a)}var c=!1;function precompute(){c=!0,e===t&&n===i||function calcSampleValues(){for(var t=0;t<11;++t)u[t]=calcBezier(t*a,e,n)}()}var h=function f(a){return c||precompute(),e===t&&n===i?a:0===a?0:1===a?1:calcBezier(getTForX(a),t,i)};h.getControlPoints=function(){return[{x:e,y:t},{x:n,y:i}]};var d="generateBezier("+[e,t,n,i]+")";return h.toString=function(){return d},h}var $s=function(){function springAccelerationForState(e){return-e.tension*e.x-e.friction*e.v}function springEvaluateStateWithDerivative(e,t,n){var i={x:e.x+n.dx*t,v:e.v+n.dv*t,tension:e.tension,friction:e.friction};return{dx:i.v,dv:springAccelerationForState(i)}}function springIntegrateState(e,t){var n={dx:e.v,dv:springAccelerationForState(e)},i=springEvaluateStateWithDerivative(e,.5*t,n),a=springEvaluateStateWithDerivative(e,.5*t,i),s=springEvaluateStateWithDerivative(e,t,a),l=1/6*(n.dx+2*(i.dx+a.dx)+s.dx),u=1/6*(n.dv+2*(i.dv+a.dv)+s.dv);return e.x=e.x+l*t,e.v=e.v+u*t,e}return function springRK4Factory(e,t,n){var i,a,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,h=1e-4;for(e=parseFloat(e)||500,t=parseFloat(t)||20,n=n||null,l.tension=e,l.friction=t,a=(i=null!==n)?(c=springRK4Factory(e,t))/n*.016:.016;s=springIntegrateState(s||l,a),u.push(1+s.x),c+=16,Math.abs(s.x)>h&&Math.abs(s.v)>h;);return i?function(e){return u[e*(u.length-1)|0]}:c}}(),Ks=function cubicBezier(e,t,n,i){var a=generateCubicBezier(e,t,n,i);return function(e,t,n){return e+(t-e)*a(n)}},Zs={linear:function linear(e,t,n){return e+(t-e)*n},ease:Ks(.25,.1,.25,1),"ease-in":Ks(.42,0,1,1),"ease-out":Ks(0,0,.58,1),"ease-in-out":Ks(.42,0,.58,1),"ease-in-sine":Ks(.47,0,.745,.715),"ease-out-sine":Ks(.39,.575,.565,1),"ease-in-out-sine":Ks(.445,.05,.55,.95),"ease-in-quad":Ks(.55,.085,.68,.53),"ease-out-quad":Ks(.25,.46,.45,.94),"ease-in-out-quad":Ks(.455,.03,.515,.955),"ease-in-cubic":Ks(.55,.055,.675,.19),"ease-out-cubic":Ks(.215,.61,.355,1),"ease-in-out-cubic":Ks(.645,.045,.355,1),"ease-in-quart":Ks(.895,.03,.685,.22),"ease-out-quart":Ks(.165,.84,.44,1),"ease-in-out-quart":Ks(.77,0,.175,1),"ease-in-quint":Ks(.755,.05,.855,.06),"ease-out-quint":Ks(.23,1,.32,1),"ease-in-out-quint":Ks(.86,0,.07,1),"ease-in-expo":Ks(.95,.05,.795,.035),"ease-out-expo":Ks(.19,1,.22,1),"ease-in-out-expo":Ks(1,0,0,1),"ease-in-circ":Ks(.6,.04,.98,.335),"ease-out-circ":Ks(.075,.82,.165,1),"ease-in-out-circ":Ks(.785,.135,.15,.86),spring:function spring(e,t,n){if(0===n)return Zs.linear;var spring=$s(e,t,n);return function(e,t,n){return e+(t-e)*spring(n)}},"cubic-bezier":Ks};function getEasedValue(e,t,n,i,a){if(1===i)return n;if(t===n)return n;var s=a(t,n,i);return null==e||((e.roundValue||e.color)&&(s=Math.round(s)),void 0!==e.min&&(s=Math.max(s,e.min)),void 0!==e.max&&(s=Math.min(s,e.max))),s}function getValue(e,t){return null!=e.pfValue||null!=e.value?null==e.pfValue||null!=t&&"%"===t.type.units?e.value:e.pfValue:e}function ease(e,t,n,i,a){var s=null!=a?a.type:null;n<0?n=0:n>1&&(n=1);var l=getValue(e,a),u=getValue(t,a);if(Z(l)&&Z(u))return getEasedValue(s,l,u,n,i);if(W(l)&&W(u)){for(var c=[],h=0;h<u.length;h++){var d=l[h],p=u[h];if(null!=d&&null!=p){var g=getEasedValue(s,d,p,n,i);c.push(g)}else c.push(p)}return c}}function step$1(e,t,n,i){var a=!i,s=e._private,l=t._private,u=l.easing,c=l.startTime,h=(i?e:e.cy()).style();if(!l.easingImpl)if(null==u)l.easingImpl=Zs.linear;else{var d,p,g;if(H(u))d=h.parse("transition-timing-function",u).value;else d=u;H(d)?(p=d,g=[]):(p=d[1],g=d.slice(2).map(function(e){return+e})),g.length>0?("spring"===p&&g.push(l.duration),l.easingImpl=Zs[p].apply(null,g)):l.easingImpl=Zs[p]}var v,y=l.easingImpl;if(v=0===l.duration?1:(n-c)/l.duration,l.applying&&(v=l.progress),v<0?v=0:v>1&&(v=1),null==l.delay){var m=l.startPosition,b=l.position;if(b&&a&&!e.locked()){var x={};valid(m.x,b.x)&&(x.x=ease(m.x,b.x,v,y)),valid(m.y,b.y)&&(x.y=ease(m.y,b.y,v,y)),e.position(x)}var w=l.startPan,E=l.pan,_=s.pan,T=null!=E&&i;T&&(valid(w.x,E.x)&&(_.x=ease(w.x,E.x,v,y)),valid(w.y,E.y)&&(_.y=ease(w.y,E.y,v,y)),e.emit("pan"));var L=l.startZoom,D=l.zoom,S=null!=D&&i;S&&(valid(L,D)&&(s.zoom=Xt(s.minZoom,ease(L,D,v,y),s.maxZoom)),e.emit("zoom")),(T||S)&&e.emit("viewport");var k=l.style;if(k&&k.length>0&&a){for(var P=0;P<k.length;P++){var N=k[P],I=N.name,M=N,R=l.startStyle[I],O=ease(R,M,v,y,h.properties[R.name]);h.overrideBypass(e,I,O)}e.emit("style")}}return l.progress=v,v}function valid(e,t){return null!=e&&null!=t&&(!(!Z(e)||!Z(t))||!(!e||!t))}function startAnimation(e,t,n,i){var a=t._private;a.started=!0,a.startTime=n-a.progress*a.duration}function stepAll(e,t){var n=t._private.aniEles,i=[];function stepOne(t,n){var a=t._private,s=a.animation.current,l=a.animation.queue,u=!1;if(0===s.length){var c=l.shift();c&&s.push(c)}for(var h=function callbacks(e){for(var t=e.length-1;t>=0;t--){(0,e[t])()}e.splice(0,e.length)},d=s.length-1;d>=0;d--){var p=s[d],g=p._private;g.stopped?(s.splice(d,1),g.hooked=!1,g.playing=!1,g.started=!1,h(g.frames)):(g.playing||g.applying)&&(g.playing&&g.applying&&(g.applying=!1),g.started||startAnimation(0,p,e),step$1(t,p,e,n),g.applying&&(g.applying=!1),h(g.frames),null!=g.step&&g.step(e),p.completed()&&(s.splice(d,1),g.hooked=!1,g.playing=!1,g.started=!1,h(g.completes)),u=!0)}return n||0!==s.length||0!==l.length||i.push(t),u}for(var a=!1,s=0;s<n.length;s++){var l=stepOne(n[s]);a=a||l}var u=stepOne(t,!0);(a||u)&&(n.length>0?t.notify("draw",n):t.notify("draw")),n.unmerge(i),t.emit("step")}var Qs={animate:Ua.animate(),animation:Ua.animation(),animated:Ua.animated(),clearQueue:Ua.clearQueue(),delay:Ua.delay(),delayAnimation:Ua.delayAnimation(),stop:Ua.stop(),addToAnimationPool:function addToAnimationPool(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function stopAnimationLoop(){this._private.animationsRunning=!1},startAnimationLoop:function startAnimationLoop(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender(function rendererAnimationStep(t,n){stepAll(n,e)},t.beforeRenderPriorities.animations):function headlessStep(){e._private.animationsRunning&&Ae(function animationStep(t){stepAll(t,e),headlessStep()})}()}}},Js={qualifierCompare:function qualifierCompare(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function eventMatches(e,t,n){var i=t.qualifier;return null==i||e!==n.target&&ee(n.target)&&i.matches(n.target)},addEventFields:function addEventFields(e,t){t.cy=e,t.target=e},callbackContext:function callbackContext(e,t,n){return null!=t.qualifier?n.target:e}},el=function argSelector(e){return H(e)?new ko(e):e},tl={createEmitter:function createEmitter(){var e=this._private;return e.emitter||(e.emitter=new Emitter(Js,this)),this},emitter:function emitter(){return this._private.emitter},on:function on(e,t,n){return this.emitter().on(e,el(t),n),this},removeListener:function removeListener(e,t,n){return this.emitter().removeListener(e,el(t),n),this},removeAllListeners:function removeAllListeners(){return this.emitter().removeAllListeners(),this},one:function one(e,t,n){return this.emitter().one(e,el(t),n),this},once:function once(e,t,n){return this.emitter().one(e,el(t),n),this},emit:function emit(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function emitAndNotify(e,t){return this.emit(e),this.notify(e,t),this}};Ua.eventAliasesOn(tl);var nl={png:function png(e){return e=e||{},this._private.renderer.png(e)},jpg:function jpg(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};nl.jpeg=nl.jpg;var rl={layout:function layout(e){var t=this;if(null!=e)if(null!=e.name){var n=e.name,i=t.extension("layout",n);if(null!=i){var a;a=H(e.eles)?t.$(e.eles):null!=e.eles?e.eles:t.$();var layout=new i(me({},e,{cy:t,eles:a}));return layout}$e("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else $e("A `name` must be specified to make a layout");else $e("Layout options must be specified to make a layout")}};rl.createLayout=rl.makeLayout=rl.layout;var il={notify:function notify(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();null!=t&&i.merge(t)}else if(n.notificationsEnabled){var a=this.renderer();!this.destroyed()&&a&&a.notify(e,t)}},notifications:function notifications(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function noNotifications(e){this.notifications(!1),e(),this.notifications(!0)},batching:function batching(){return this._private.batchCount>0},startBatch:function startBatch(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function endBatch(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)})}return this},batch:function batch(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function batchData(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],s=e[a];t.getElementById(a).data(s)}})}},al=nt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),ol={renderTo:function renderTo(e,t,n,i){return this._private.renderer.renderTo(e,t,n,i),this},renderer:function renderer(){return this._private.renderer},forceRender:function forceRender(){return this.notify("draw"),this},resize:function resize(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function initRenderer(e){var t=this,n=t.extension("renderer",e.name);if(null!=n){void 0!==e.wheelSensitivity&&Ze("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=al(e);i.cy=t,t._private.renderer=new n(i),this.notify("init")}else $e("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function destroyRenderer(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]})},onRender:function onRender(e){return this.on("render",e)},offRender:function offRender(e){return this.off("render",e)}};ol.invalidateDimensions=ol.resize;var sl={collection:function collection(e,t){return H(e)?this.$(e):J(e)?e.collection():W(e)?(t||(t={}),new Hs(this,e,t.unique,t.removed)):new Hs(this)},nodes:function nodes(e){var nodes=this.$(function(e){return e.isNode()});return e?nodes.filter(e):nodes},edges:function edges(e){var edges=this.$(function(e){return e.isEdge()});return e?edges.filter(e):edges},$:function $(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function mutableElements(){return this._private.elements}};sl.elements=sl.filter=sl.$;var ll={},ul="t";ll.apply=function(e){for(var t=this,n=t._private.cy.collection(),i=0;i<e.length;i++){var a=e[i],s=t.getContextMeta(a);if(!s.empty){var l=t.getContextStyle(s),u=t.applyContextStyle(s,l,a);a._private.appliedInitStyle?t.updateTransitions(a,u.diffProps):a._private.appliedInitStyle=!0,t.updateStyleHints(a)&&n.push(a)}}return n},ll.getPropertiesDiff=function(e,t){var n=this,i=n._private.propDiffs=n._private.propDiffs||{},a=e+"-"+t,s=i[a];if(s)return s;for(var l=[],u={},c=0;c<n.length;c++){var h=n[c],d=e[c]===ul,p=t[c]===ul,g=d!==p,v=h.mappedProperties.length>0;if(g||p&&v){var y=void 0;g&&v||g?y=h.properties:v&&(y=h.mappedProperties);for(var m=0;m<y.length;m++){for(var b=y[m],x=b.name,w=!1,E=c+1;E<n.length;E++){var _=n[E];if(t[E]===ul&&(w=null!=_.properties[b.name]))break}u[x]||w||(u[x]=!0,l.push(x))}}}return i[a]=l,l},ll.getContextMeta=function(e){for(var t,n=this,i="",a=e._private.styleCxtKey||"",s=0;s<n.length;s++){var l=n[s];i+=l.selector&&l.selector.matches(e)?ul:"f"}return t=n.getPropertiesDiff(a,i),e._private.styleCxtKey=i,{key:i,diffPropNames:t,empty:0===t.length}},ll.getContextStyle=function(e){var t=e.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[t])return n[t];for(var i={_private:{key:t}},a=0;a<this.length;a++){var s=this[a];if(t[a]===ul)for(var l=0;l<s.properties.length;l++){var u=s.properties[l];i[u.name]=u}}return n[t]=i,i},ll.applyContextStyle=function(e,t,n){for(var i=e.diffPropNames,a={},s=this.types,l=0;l<i.length;l++){var u=i[l],c=t[u],h=n.pstyle(u);if(!c){if(!h)continue;c=h.bypass?{name:u,deleteBypassed:!0}:{name:u,delete:!0}}if(h!==c){if(c.mapped===s.fn&&null!=h&&null!=h.mapping&&h.mapping.value===c.value){var d=h.mapping;if((d.fnValue=c.value(n))===d.prevFnValue)continue}var p=a[u]={prev:h};this.applyParsedProperty(n,c),p.next=n.pstyle(u),p.next&&p.next.bypass&&(p.next=p.next.bypassed)}}return{diffProps:a}},ll.updateStyleHints=function(e){var t=e._private,n=this,i=n.propertyGroupNames,a=n.propertyGroupKeys,s=function propHash(e,t,i){return n.getPropertiesHash(e,t,i)},l=t.styleKey;if(e.removed())return!1;var u="nodes"===t.group,c=e._private.style;i=Object.keys(c);for(var h=0;h<a.length;h++){var d=a[h];t.styleKeys[d]=[ke,Pe]}for(var p=function updateGrKey1(e,n){return t.styleKeys[n][0]=Ie(e,t.styleKeys[n][0])},g=function updateGrKey2(e,n){return t.styleKeys[n][1]=Me(e,t.styleKeys[n][1])},v=function updateGrKey(e,t){p(e,t),g(e,t)},y=function updateGrKeyWStr(e,t){for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);p(i,t),g(i,t)}},m=function cleanNum(e){return-128<e&&e<128&&Math.floor(e)!==e?2e9-(1024*e|0):e},b=0;b<i.length;b++){var x=i[b],w=c[x];if(null!=w){var E=this.properties[x],_=E.type,T=E.groupKey,L=void 0;null!=E.hashOverride?L=E.hashOverride(e,w):null!=w.pfValue&&(L=w.pfValue);var D=null==E.enums?w.value:null,S=null!=L,k=S||null!=D,P=w.units;if(_.number&&k&&!_.multiple)v(m(S?L:D),T),S||null==P||y(P,T);else y(w.strValue,T)}}for(var N=[ke,Pe],I=0;I<a.length;I++){var M=a[I],R=t.styleKeys[M];N[0]=Ie(R[0],N[0]),N[1]=Me(R[1],N[1])}t.styleKey=function combineHashes(e,t){return 2097152*e+t}(N[0],N[1]);var O=t.styleKeys;t.labelDimsKey=Re(O.labelDimensions);var z=s(e,["label"],O.labelDimensions);if(t.labelKey=Re(z),t.labelStyleKey=Re(Be(O.commonLabel,z)),!u){var G=s(e,["source-label"],O.labelDimensions);t.sourceLabelKey=Re(G),t.sourceLabelStyleKey=Re(Be(O.commonLabel,G));var V=s(e,["target-label"],O.labelDimensions);t.targetLabelKey=Re(V),t.targetLabelStyleKey=Re(Be(O.commonLabel,V))}if(u){var q=t.styleKeys,Y=q.nodeBody,X=q.nodeBorder,U=q.nodeOutline,H=q.backgroundImage,j=q.compound,W=q.pie,K=q.stripe,Z=[Y,X,U,H,j,W,K].filter(function(e){return null!=e}).reduce(Be,[ke,Pe]);t.nodeKey=Re(Z),t.hasPie=null!=W&&W[0]!==ke&&W[1]!==Pe,t.hasStripe=null!=K&&K[0]!==ke&&K[1]!==Pe}return l!==t.styleKey},ll.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null,t.hasStripe=null},ll.applyParsedProperty=function(e,t){var n,i=this,a=t,s=e._private.style,l=i.types,u=i.properties[a.name].type,c=a.bypass,h=s[a.name],d=h&&h.bypass,p=e._private,g="mapping",v=function getVal(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},y=function checkTriggers(){var t=v(h),n=v(a);i.checkTriggers(e,a.name,t,n)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(a=t=this.parse(t.name,"bezier",c)),a.delete)return s[a.name]=void 0,y(),!0;if(a.deleteBypassed)return h?!!h.bypass&&(h.bypassed=void 0,y(),!0):(y(),!0);if(a.deleteBypass)return h?!!h.bypass&&(s[a.name]=h.bypassed,y(),!0):(y(),!0);var m=function printMappingErr(){Ze("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+a.name+"` with data field `"+a.field+"`); try a `["+a.field+"]` selector to limit scope to elements with `"+a.field+"` defined")};switch(a.mapped){case l.mapData:for(var b,x=a.field.split("."),w=p.data,E=0;E<x.length&&w;E++){w=w[x[E]]}if(null==w)return m(),!1;if(!Z(w))return Ze("Do not use continuous mappers without specifying numeric data (i.e. `"+a.field+": "+w+"` for `"+e.id()+"` is non-numeric)"),!1;var _=a.fieldMax-a.fieldMin;if((b=0===_?0:(w-a.fieldMin)/_)<0?b=0:b>1&&(b=1),u.color){var T=a.valueMin[0],L=a.valueMax[0],D=a.valueMin[1],S=a.valueMax[1],k=a.valueMin[2],P=a.valueMax[2],N=null==a.valueMin[3]?1:a.valueMin[3],I=null==a.valueMax[3]?1:a.valueMax[3],M=[Math.round(T+(L-T)*b),Math.round(D+(S-D)*b),Math.round(k+(P-k)*b),Math.round(N+(I-N)*b)];n={bypass:a.bypass,name:a.name,value:M,strValue:"rgb("+M[0]+", "+M[1]+", "+M[2]+")"}}else{if(!u.number)return!1;var R=a.valueMin+(a.valueMax-a.valueMin)*b;n=this.parse(a.name,R,a.bypass,g)}if(!n)return m(),!1;n.mapping=a,a=n;break;case l.data:for(var O=a.field.split("."),z=p.data,G=0;G<O.length&&z;G++){z=z[O[G]]}if(null!=z&&(n=this.parse(a.name,z,a.bypass,g)),!n)return m(),!1;n.mapping=a,a=n;break;case l.fn:var V=a.value,q=null!=a.fnValue?a.fnValue:V(e);if(a.prevFnValue=q,null==q)return Ze("Custom function mappers may not return null (i.e. `"+a.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(n=this.parse(a.name,q,a.bypass,g)))return Ze("Custom function mappers may not return invalid values for the property type (i.e. `"+a.name+"` for ele `"+e.id()+"` is invalid)"),!1;n.mapping=Qe(a),a=n;break;case void 0:break;default:return!1}return c?(a.bypassed=d?h.bypassed:h,s[a.name]=a):d?h.bypassed=a:s[a.name]=a,y(),!0},ll.cleanElements=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(this.clearStyleHints(i),i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),t)for(var a=i._private.style,s=Object.keys(a),l=0;l<s.length;l++){var u=s[l],c=a[u];null!=c&&(c.bypass?c.bypassed=null:a[u]=null)}else i._private.style={}}},ll.update=function(){this._private.cy.mutableElements().updateStyle()},ll.updateTransitions=function(e,t){var n=this,i=e._private,a=e.pstyle("transition-property").value,s=e.pstyle("transition-duration").pfValue,l=e.pstyle("transition-delay").pfValue;if(a.length>0&&s>0){for(var u={},c=!1,h=0;h<a.length;h++){var d=a[h],p=e.pstyle(d),g=t[d];if(g){var v=g.prev,y=null!=g.next?g.next:p,m=!1,b=void 0,x=1e-6;v&&(Z(v.pfValue)&&Z(y.pfValue)?(m=y.pfValue-v.pfValue,b=v.pfValue+x*m):Z(v.value)&&Z(y.value)?(m=y.value-v.value,b=v.value+x*m):W(v.value)&&W(y.value)&&(m=v.value[0]!==y.value[0]||v.value[1]!==y.value[1]||v.value[2]!==y.value[2],b=v.strValue),m&&(u[d]=y.strValue,this.applyBypass(e,d,b),c=!0))}}if(!c)return;i.transitioning=!0,new zr(function(t){l>0?e.delayAnimation(l).play().promise().then(t):t()}).then(function(){return e.animation({style:u,duration:s,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(e,a),e.emitAndNotify("style"),i.transitioning=!1})}else i.transitioning&&(this.removeBypasses(e,a),e.emitAndNotify("style"),i.transitioning=!1)},ll.checkTrigger=function(e,t,n,i,a,s){var l=this.properties[t],u=a(l);e.removed()||null!=u&&u(n,i,e)&&s(l)},ll.checkZOrderTrigger=function(e,t,n,i){var a=this;this.checkTrigger(e,t,n,i,function(e){return e.triggersZOrder},function(){a._private.cy.notify("zorder",e)})},ll.checkBoundsTrigger=function(e,t,n,i){this.checkTrigger(e,t,n,i,function(e){return e.triggersBounds},function(t){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()})},ll.checkConnectedEdgesBoundsTrigger=function(e,t,n,i){this.checkTrigger(e,t,n,i,function(e){return e.triggersBoundsOfConnectedEdges},function(t){e.connectedEdges().forEach(function(e){e.dirtyBoundingBoxCache()})})},ll.checkParallelEdgesBoundsTrigger=function(e,t,n,i){this.checkTrigger(e,t,n,i,function(e){return e.triggersBoundsOfParallelEdges},function(t){e.parallelEdges().forEach(function(e){e.dirtyBoundingBoxCache()})})},ll.checkTriggers=function(e,t,n,i){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,n,i),this.checkBoundsTrigger(e,t,n,i),this.checkConnectedEdgesBoundsTrigger(e,t,n,i),this.checkParallelEdgesBoundsTrigger(e,t,n,i)};var cl={applyBypass:function(e,t,n,i){var a=[];if("*"===t||"**"===t){if(void 0!==n)for(var s=0;s<this.properties.length;s++){var l=this.properties[s].name,u=this.parse(l,n,!0);u&&a.push(u)}}else if(H(t)){var c=this.parse(t,n,!0);c&&a.push(c)}else{if(!K(t))return!1;var h=t;i=n;for(var d=Object.keys(h),p=0;p<d.length;p++){var g=d[p],v=h[g];if(void 0===v&&(v=h[le(g)]),void 0!==v){var y=this.parse(g,v,!0);y&&a.push(y)}}}if(0===a.length)return!1;for(var m=!1,b=0;b<e.length;b++){for(var x=e[b],w={},E=void 0,_=0;_<a.length;_++){var T=a[_];if(i){var L=x.pstyle(T.name);E=w[T.name]={prev:L}}m=this.applyParsedProperty(x,Qe(T))||m,i&&(E.next=x.pstyle(T.name))}m&&this.updateStyleHints(x),i&&this.updateTransitions(x,w,true)}return m},overrideBypass:function(e,t,n){t=se(t);for(var i=0;i<e.length;i++){var a=e[i],s=a._private.style[t],l=this.properties[t].type,u=l.color,c=l.mutiple,h=s?null!=s.pfValue?s.pfValue:s.value:null;s&&s.bypass?(s.value=n,null!=s.pfValue&&(s.pfValue=n),s.strValue=u?"rgb("+n.join(",")+")":c?n.join(" "):""+n,this.updateStyleHints(a)):this.applyBypass(a,t,n),this.checkTriggers(a,t,h,n)}},removeAllBypasses:function(e,t){return this.removeBypasses(e,this.propertyNames,t)},removeBypasses:function(e,t,n){for(var i=0;i<e.length;i++){for(var a=e[i],s={},l=0;l<t.length;l++){var u=t[l],c=this.properties[u],h=a.pstyle(c.name);if(h&&h.bypass){var d=this.parse(u,"",!0),p=s[c.name]={prev:h};this.applyParsedProperty(a,d),p.next=a.pstyle(c.name)}}this.updateStyleHints(a),n&&this.updateTransitions(a,s,true)}}},hl={getEmSizeInPixels:function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},containerCss:function(e){var t=this._private.cy,n=t.container(),i=t.window();if(i&&n&&i.getComputedStyle)return i.getComputedStyle(n).getPropertyValue(e)}},dl={getRenderedStyle:function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},getRawStyle:function(e,t){var n=this;if(e=e[0]){for(var i={},a=0;a<n.properties.length;a++){var s=n.properties[a],l=n.getStylePropertyValue(e,s.name,t);null!=l&&(i[s.name]=l,i[le(s.name)]=l)}return i}},getIndexedStyle:function(e,t,n,i){var a=e.pstyle(t)[n][i];return null!=a?a:e.cy().style().getDefaultProperty(t)[n][0]},getStylePropertyValue:function(e,t,n){if(e=e[0]){var i=this.properties[t];i.alias&&(i=i.pointsTo);var a=i.type,s=e.pstyle(i.name);if(s){var l=s.value,u=s.units,c=s.strValue;if(n&&a.number&&null!=l&&Z(l)){var h=e.cy().zoom(),d=function getRenderedValue(e){return e*h},p=function getValueStringWithUnits(e,t){return d(e)+t},g=W(l);return(g?u.every(function(e){return null!=e}):null!=u)?g?l.map(function(e,t){return p(e,u[t])}).join(" "):p(l,u):g?l.map(function(e){return H(e)?e:""+d(e)}).join(" "):""+d(l)}if(null!=c)return c}return null}},getAnimationStartStyle:function(e,t){for(var n={},i=0;i<t.length;i++){var a=t[i].name,s=e.pstyle(a);void 0!==s&&(s=K(s)?this.parse(a,s.strValue):this.parse(a,s)),s&&(n[a]=s)}return n},getPropsList:function(e){var t=[],n=e,i=this.properties;if(n)for(var a=Object.keys(n),s=0;s<a.length;s++){var l=a[s],u=n[l],c=i[l]||i[se(l)],h=this.parse(c.name,u);h&&t.push(h)}return t},getNonDefaultPropertiesHash:function(e,t,n){var i,a,s,l,u,c,h=n.slice();for(u=0;u<t.length;u++)if(i=t[u],null!=(a=e.pstyle(i,!1)))if(null!=a.pfValue)h[0]=Ie(l,h[0]),h[1]=Me(l,h[1]);else for(s=a.strValue,c=0;c<s.length;c++)l=s.charCodeAt(c),h[0]=Ie(l,h[0]),h[1]=Me(l,h[1]);return h}};dl.getPropertiesHash=dl.getNonDefaultPropertiesHash;var pl={appendFromJson:function(e){for(var t=this,n=0;n<e.length;n++){var i=e[n],a=i.selector,s=i.style||i.css,l=Object.keys(s);t.selector(a);for(var u=0;u<l.length;u++){var c=l[u],h=s[c];t.css(c,h)}}return t},fromJson:function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t},json:function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var n=this[t],i=n.selector,a=n.properties,s={},l=0;l<a.length;l++){var u=a[l];s[u.name]=u.strValue}e.push({selector:i?i.toString():"core",style:s})}return e}},gl={appendFromString:function(e){var t,n,i,a=this,s=""+e;function removeSelAndBlockFromRemaining(){s=s.length>t.length?s.substr(t.length):""}function removePropAndValFromRem(){n=n.length>i.length?n.substr(i.length):""}for(s=s.replace(/[/][*](\s|.)+?[*][/]/g,"");;){if(s.match(/^\s*$/))break;var l=s.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!l){Ze("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+s);break}t=l[0];var u=l[1];if("core"!==u)if(new ko(u).invalid){Ze("Skipping parsing of block: Invalid selector found in string stylesheet: "+u),removeSelAndBlockFromRemaining();continue}var c=l[2],h=!1;n=c;for(var d=[];;){if(n.match(/^\s*$/))break;var p=n.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!p){Ze("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+c),h=!0;break}i=p[0];var g=p[1],v=p[2];if(this.properties[g])a.parse(g,v)?(d.push({name:g,val:v}),removePropAndValFromRem()):(Ze("Skipping property: Invalid property definition in: "+i),removePropAndValFromRem());else Ze("Skipping property: Invalid property name in: "+i),removePropAndValFromRem()}if(h){removeSelAndBlockFromRemaining();break}a.selector(u);for(var y=0;y<d.length;y++){var m=d[y];a.css(m.name,m.val)}removeSelAndBlockFromRemaining()}return a},fromString:function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t}},fl={};!function(){var e=de,t=ge,n=ve,i=function data(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function mapData(i){var a=e+"|\\w+|"+t+"|"+n+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+i+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+a+")\\s*\\,\\s*("+a+")\\)$"},s=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];fl.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function validate(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return H(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function validate(e){var t=e.length;return 1===t||2===t||4===t}}};var l={zeroNonZero:function zeroNonZero(e,t){return(null==e||null==t)&&e!==t||(0==e&&0!=t||0!=e&&0==t)},any:function any(e,t){return e!=t},emptyNonEmpty:function emptyNonEmpty(e,t){var n=ie(e),i=ie(t);return n&&!i||!n&&i}},u=fl.types,c=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],h=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],d=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],p=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],g=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification},{name:"box-select-labels",type:u.bool,triggersBounds:l.any}],v=[{name:"events",type:u.bool,triggersZOrder:l.any},{name:"text-events",type:u.bool,triggersZOrder:l.any},{name:"box-selection",type:u.boxSelection,triggersZOrder:l.any}],y=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:l.any,triggersBoundsOfParallelEdges:function triggersBoundsOfParallelEdges(e,t,n){return e!==t&&"bezier"===n.pstyle("curve-style").value}},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.number,triggersZOrder:l.any}],m=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:u.cornerRadius}],b=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:u.cornerRadius}],x=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],w=function nodeSizeHashOverride(e,t){return"label"===t.value?-e.poolIndex():t.pfValue},E=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:w},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:w},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],_=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],T=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:l.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:l.any}],L=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],D=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],S=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-outline-width",type:u.size},{name:"line-outline-color",type:u.color},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelEdges:function triggersBoundsOfParallelEdges(e,t){return e!==t&&("bezier"===e||"bezier"===t)}},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-radii",type:u.numbers,triggersBounds:l.any},{name:"radius-type",type:u.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:u.number,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],k=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],P=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],N=[];fl.pieBackgroundN=16,N.push({name:"pie-size",type:u.sizeMaybePercent}),N.push({name:"pie-hole",type:u.sizeMaybePercent}),N.push({name:"pie-start-angle",type:u.angle});for(var I=1;I<=fl.pieBackgroundN;I++)N.push({name:"pie-"+I+"-background-color",type:u.color}),N.push({name:"pie-"+I+"-background-size",type:u.percent}),N.push({name:"pie-"+I+"-background-opacity",type:u.zeroOneNumber});var M=[];fl.stripeBackgroundN=16,M.push({name:"stripe-size",type:u.sizeMaybePercent}),M.push({name:"stripe-direction",type:u.axisDirectionPrimary});for(var R=1;R<=fl.stripeBackgroundN;R++)M.push({name:"stripe-"+R+"-background-color",type:u.color}),M.push({name:"stripe-"+R+"-background-size",type:u.percent}),M.push({name:"stripe-"+R+"-background-opacity",type:u.zeroOneNumber});var O=[],z=fl.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(e){z.forEach(function(t){var n=t+"-"+e.name,i=e.type,a=e.triggersBounds;O.push({name:n,type:i,triggersBounds:a})})},{});var G=fl.properties=[].concat(v,x,y,m,b,k,g,p,c,h,d,E,_,T,L,N,M,D,S,O,P),V=fl.propertyGroups={behavior:v,transition:x,visibility:y,overlay:m,underlay:b,ghost:k,commonLabel:g,labelDimensions:p,mainLabel:c,sourceLabel:h,targetLabel:d,nodeBody:E,nodeBorder:_,nodeOutline:T,backgroundImage:L,pie:N,stripe:M,compound:D,edgeLine:S,edgeArrow:O,core:P},q=fl.propertyGroupNames={};(fl.propertyGroupKeys=Object.keys(V)).forEach(function(e){q[e]=V[e].map(function(e){return e.name}),V[e].forEach(function(t){return t.groupKey=e})});var Y=fl.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];fl.propertyNames=G.map(function(e){return e.name});for(var X=0;X<G.length;X++){var U=G[X];G[U.name]=U}for(var j=0;j<Y.length;j++){var W=Y[j],K=G[W.pointsTo],Z={name:W.name,alias:!0,pointsTo:K};G.push(Z),G[W.name]=Z}}(),fl.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},fl.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=me({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=fl.pieBackgroundN;n++){var i=t.name.replace("{{i}}",n),a=t.value;e[i]=a}return e},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var n=1;n<=fl.stripeBackgroundN;n++){var i=t.name.replace("{{i}}",n),a=t.value;e[i]=a}return e},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(e,t){return fl.arrowPrefixes.forEach(function(n){var i=n+"-"+t.name,a=t.value;e[i]=a}),e},{})),n={},i=0;i<this.properties.length;i++){var a=this.properties[i];if(!a.pointsTo){var s=a.name,l=t[s],u=this.parse(s,l);n[s]=u}}return e.defaultProperties=n,e.defaultProperties},fl.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var vl={parse:function(e,t,n,i){var a=this;if(j(t))return a.parseImplWarn(e,t,n,i);var s,l=ze(e,""+t,n?"t":"f","mapping"===i||!0===i||!1===i||null==i?"dontcare":i),u=a.propCache=a.propCache||[];return(s=u[l])||(s=u[l]=a.parseImplWarn(e,t,n,i)),(n||"mapping"===i)&&(s=Qe(s))&&(s.value=Qe(s.value)),s},parseImplWarn:function(e,t,n,i){var a=this.parseImpl(e,t,n,i);return a||null==t||Ze("The style property `".concat(e,": ").concat(t,"` is invalid")),!a||"width"!==a.name&&"height"!==a.name||"label"!==t||Ze("The style value of `label` is deprecated for `"+a.name+"`"),a}};vl.parseImpl=function(e,t,n,i){var a=this;e=se(e);var s=a.properties[e],l=t,u=a.types;if(!s)return null;if(void 0===t)return null;s.alias&&(s=s.pointsTo,e=s.name);var c=H(t);c&&(t=t.trim());var h,d,p=s.type;if(!p)return null;if(n&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(j(t))return{name:e,value:t,strValue:"fn",mapped:u.fn,bypass:n};if(!c||i||t.length<7||"a"!==t[1]);else{if(t.length>=7&&"d"===t[0]&&(h=new RegExp(u.data.regex).exec(t))){if(n)return!1;var g=u.data;return{name:e,value:h,strValue:""+t,mapped:g,field:h[1],bypass:n}}if(t.length>=10&&"m"===t[0]&&(d=new RegExp(u.mapData.regex).exec(t))){if(n)return!1;if(p.multiple)return!1;var v=u.mapData;if(!p.color&&!p.number)return!1;var y=this.parse(e,d[4]);if(!y||y.mapped)return!1;var m=this.parse(e,d[5]);if(!m||m.mapped)return!1;if(y.pfValue===m.pfValue||y.strValue===m.strValue)return Ze("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+y.strValue+"`"),this.parse(e,y.strValue);if(p.color){var b=y.value,x=m.value;if(!(b[0]!==x[0]||b[1]!==x[1]||b[2]!==x[2]||b[3]!==x[3]&&(null!=b[3]&&1!==b[3]||null!=x[3]&&1!==x[3])))return!1}return{name:e,value:d,strValue:""+t,mapped:v,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:y.value,valueMax:m.value,bypass:n}}}if(p.multiple&&"multiple"!==i){var w;if(w=c?t.split(/\s+/):W(t)?t:[t],p.evenMultiple&&w.length%2!=0)return null;for(var E=[],_=[],T=[],L="",D=!1,S=0;S<w.length;S++){var k=a.parse(e,w[S],n,"multiple");D=D||H(k.value),E.push(k.value),T.push(null!=k.pfValue?k.pfValue:k.value),_.push(k.units),L+=(S>0?" ":"")+k.strValue}return p.validate&&!p.validate(E,_)?null:p.singleEnum&&D?1===E.length&&H(E[0])?{name:e,value:E[0],strValue:E[0],bypass:n}:null:{name:e,value:E,pfValue:T,strValue:L,bypass:n,units:_}}var P=function checkEnums(){for(var i=0;i<p.enums.length;i++){if(p.enums[i]===t)return{name:e,value:t,strValue:""+t,bypass:n}}return null};if(p.number){var N,I="px";if(p.units&&(N=p.units),p.implicitUnits&&(I=p.implicitUnits),!p.unitless)if(c){var M="px|em"+(p.allowPercent?"|\\%":"");N&&(M=N);var R=t.match("^("+de+")("+M+")?$");R&&(t=R[1],N=R[2]||I)}else N&&!p.implicitUnits||(N=I);if(t=parseFloat(t),isNaN(t)&&void 0===p.enums)return null;if(isNaN(t)&&void 0!==p.enums)return t=l,P();if(p.integer&&!function integer(e){return Z(e)&&Math.floor(e)===e}(t))return null;if(void 0!==p.min&&(t<p.min||p.strictMin&&t===p.min)||void 0!==p.max&&(t>p.max||p.strictMax&&t===p.max))return null;var O={name:e,value:t,strValue:""+t+(N||""),units:N,bypass:n};return p.unitless||"px"!==N&&"em"!==N?O.pfValue=t:O.pfValue="px"!==N&&N?this.getEmSizeInPixels()*t:t,"ms"!==N&&"s"!==N||(O.pfValue="ms"===N?t:1e3*t),"deg"!==N&&"rad"!==N||(O.pfValue="rad"===N?t:function deg2rad(e){return Math.PI*e/180}(t)),"%"===N&&(O.pfValue=t/100),O}if(p.propList){var z=[],G=""+t;if("none"===G);else{for(var V=G.split(/\s*,\s*|\s+/),q=0;q<V.length;q++){var Y=V[q].trim();a.properties[Y]?z.push(Y):Ze("`"+Y+"` is not a valid property name")}if(0===z.length)return null}return{name:e,value:z,strValue:0===z.length?"none":z.join(" "),bypass:n}}if(p.color){var X=be(t);return X?{name:e,value:X,pfValue:X,strValue:"rgb("+X[0]+","+X[1]+","+X[2]+")",bypass:n}:null}if(p.regex||p.regexes){if(p.enums){var U=P();if(U)return U}for(var K=p.regexes?p.regexes:[p.regex],Q=0;Q<K.length;Q++){var J=new RegExp(K[Q]).exec(t);if(J)return{name:e,value:p.singleRegexMatchValue?J[1]:J,strValue:""+t,bypass:n}}return null}return p.string?{name:e,value:""+t,strValue:""+t,bypass:n}:p.enums?P():null};var yl=function Style(e){if(!(this instanceof yl))return new yl(e);ne(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):$e("A style must have a core reference")},ml=yl.prototype;ml.instanceString=function(){return"style"},ml.clear=function(){for(var e=this._private,t=e.cy.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0),t.forEach(function(e){var t=e[0]._private;t.styleDirty=!0,t.appliedInitStyle=!1}),this},ml.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},ml.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},ml.selector=function(e){var t="core"===e?null:new ko(e),n=this.length++;return this[n]={selector:t,properties:[],mappedProperties:[],index:n},this},ml.css=function(){var e=arguments;if(1===e.length)for(var t=e[0],n=0;n<this.properties.length;n++){var i=this.properties[n],a=t[i.name];void 0===a&&(a=t[le(i.name)]),void 0!==a&&this.cssRule(i.name,a)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},ml.style=ml.css,ml.cssRule=function(e,t){var n=this.parse(e,t);if(n){var i=this.length-1;this[i].properties.push(n),this[i].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.name.match(/stripe-(\d+)-background-size/)&&n.value&&(this._private.hasStripe=!0),n.mapped&&this[i].mappedProperties.push(n),!this[i].selector&&(this._private.coreStyle[n.name]=n)}return this},ml.append=function(e){return re(e)?e.appendToStyle(this):W(e)?this.appendFromJson(e):H(e)&&this.appendFromString(e),this},yl.fromJson=function(e,t){var n=new yl(e);return n.fromJson(t),n},yl.fromString=function(e,t){return new yl(e).fromString(t)},[ll,cl,hl,dl,pl,gl,fl,vl].forEach(function(e){me(ml,e)}),yl.types=ml.types,yl.properties=ml.properties,yl.propertyGroups=ml.propertyGroups,yl.propertyGroupNames=ml.propertyGroupNames,yl.propertyGroupKeys=ml.propertyGroupKeys;var bl={style:function style(e){e&&this.setStyle(e).update();return this._private.style},setStyle:function setStyle(e){var t=this._private;return re(e)?t.style=e.generateStyle(this):W(e)?t.style=yl.fromJson(this,e):H(e)?t.style=yl.fromString(this,e):t.style=yl(this),t.style},updateStyle:function updateStyle(){this.mutableElements().updateStyle()}},xl={autolock:function autolock(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function autoungrabify(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function autounselectify(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function selectionType(e){var t=this._private;return null==t.selectionType&&(t.selectionType="single"),void 0===e?t.selectionType:("additive"!==e&&"single"!==e||(t.selectionType=e),this)},panningEnabled:function panningEnabled(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function userPanningEnabled(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function zoomingEnabled(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function userZoomingEnabled(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function boxSelectionEnabled(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function pan(){var e,t,n,i,a,s=arguments,pan=this._private.pan;switch(s.length){case 0:return pan;case 1:if(H(s[0]))return pan[e=s[0]];if(K(s[0])){if(!this._private.panningEnabled)return this;i=(n=s[0]).x,a=n.y,Z(i)&&(pan.x=i),Z(a)&&(pan.y=a),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=s[1],"x"!==(e=s[0])&&"y"!==e||!Z(t)||(pan[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function panBy(e,t){var n,i,a,s,l,u=arguments,c=this._private.pan;if(!this._private.panningEnabled)return this;switch(u.length){case 1:K(e)&&(s=(a=u[0]).x,l=a.y,Z(s)&&(c.x+=s),Z(l)&&(c.y+=l),this.emit("pan viewport"));break;case 2:i=t,"x"!==(n=e)&&"y"!==n||!Z(i)||(c[n]+=i),this.emit("pan viewport")}return this.notify("viewport"),this},gc:function gc(){this.notify("gc")},fit:function fit(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function getFitViewport(e,t){if(Z(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n;if(H(e)){var i=e;e=this.$(i)}else if(function boundingBox(e){return K(e)&&Z(e.x1)&&Z(e.x2)&&Z(e.y1)&&Z(e.y2)}(e)){var a=e;(n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1}else J(e)||(e=this.mutableElements());if(!J(e)||!e.empty()){n=n||e.boundingBox();var s,l=this.width(),u=this.height();if(t=Z(t)?t:0,!isNaN(l)&&!isNaN(u)&&l>0&&u>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:s=(s=(s=Math.min((l-2*t)/n.w,(u-2*t)/n.h))>this._private.maxZoom?this._private.maxZoom:s)<this._private.minZoom?this._private.minZoom:s,pan:{x:(l-s*(n.x1+n.x2))/2,y:(u-s*(n.y1+n.y2))/2}}}}},zoomRange:function zoomRange(e,t){var n=this._private;if(null==t){var i=e;e=i.min,t=i.max}return Z(e)&&Z(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Z(e)&&void 0===t&&e<=n.maxZoom?n.minZoom=e:Z(t)&&void 0===e&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function minZoom(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function maxZoom(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function getZoomedViewport(e){var t,n,i=this._private,a=i.pan,s=i.zoom,l=!1;if(i.zoomingEnabled||(l=!0),Z(e)?n=e:K(e)&&(n=e.level,null!=e.position?t=It(e.position,s,a):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||i.panningEnabled||(l=!0)),n=(n=n>i.maxZoom?i.maxZoom:n)<i.minZoom?i.minZoom:n,l||!Z(n)||n===s||null!=t&&(!Z(t.x)||!Z(t.y)))return null;if(null!=t){var u=a,c=s,h=n;return{zoomed:!0,panned:!0,zoom:h,pan:{x:-h/c*(t.x-u.x)+t.x,y:-h/c*(t.y-u.y)+t.y}}}return{zoomed:!0,panned:!1,zoom:n,pan:a}},zoom:function zoom(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return null!=t&&t.zoomed?(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function viewport(e){var t=this._private,n=!0,i=!0,a=[],s=!1,l=!1;if(!e)return this;if(Z(e.zoom)||(n=!1),K(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?s=!0:(t.zoom=u,a.push("zoom"))}if(i&&(!s||!e.cancelOnFailedZoom)&&t.panningEnabled){var c=e.pan;Z(c.x)&&(t.pan.x=c.x,l=!1),Z(c.y)&&(t.pan.y=c.y,l=!1),l||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function center(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function getCenterPan(e,t){if(this._private.panningEnabled){if(H(e)){var n=e;e=this.mutableElements().filter(n)}else J(e)||(e=this.mutableElements());if(0!==e.length){var i=e.boundingBox(),a=this.width(),s=this.height();return{x:(a-(t=void 0===t?this._private.zoom:t)*(i.x1+i.x2))/2,y:(s-t*(i.y1+i.y2))/2}}}},reset:function reset(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function invalidateSize(){this._private.sizeCache=null},size:function size(){var e,t,n=this._private,i=n.container,a=this;return n.sizeCache=n.sizeCache||(i?(e=a.window().getComputedStyle(i),t=function val(t){return parseFloat(e.getPropertyValue(t))},{width:i.clientWidth-t("padding-left")-t("padding-right"),height:i.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function width(){return this.size().width},height:function height(){return this.size().height},extent:function extent(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function renderedExtent(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function multiClickDebounceTime(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}};xl.centre=xl.center,xl.autolockNodes=xl.autolock,xl.autoungrabifyNodes=xl.autoungrabify;var wl={data:Ua.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ua.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ua.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ua.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};wl.attr=wl.data,wl.removeAttr=wl.removeData;var El=function Core(e){var t=this,n=(e=me({},e)).container;n&&!Q(n)&&Q(n[0])&&(n=n[0]);var i=n?n._cyreg:null;(i=i||{})&&i.cy&&(i.cy.destroy(),i={});var s=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var l=void 0!==a&&void 0!==n&&!e.headless,u=e;u.layout=me({name:l?"grid":"null"},u.layout),u.renderer=me({name:l?"canvas":"null"},u.renderer);var c=function defVal(e,t,n){return void 0!==t?t:void 0!==n?n:e},h=this._private={container:n,ready:!1,options:u,elements:new Hs(this),listeners:[],aniEles:new Hs(this),data:u.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:c(!0,u.zoomingEnabled),userZoomingEnabled:c(!0,u.userZoomingEnabled),panningEnabled:c(!0,u.panningEnabled),userPanningEnabled:c(!0,u.userPanningEnabled),boxSelectionEnabled:c(!0,u.boxSelectionEnabled),autolock:c(!1,u.autolock,u.autolockNodes),autoungrabify:c(!1,u.autoungrabify,u.autoungrabifyNodes),autounselectify:c(!1,u.autounselectify),styleEnabled:void 0===u.styleEnabled?l:u.styleEnabled,zoom:Z(u.zoom)?u.zoom:1,pan:{x:K(u.pan)&&Z(u.pan.x)?u.pan.x:0,y:K(u.pan)&&Z(u.pan.y)?u.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:c(250,u.multiClickDebounceTime)};this.createEmitter(),this.selectionType(u.selectionType),this.zoomRange({min:u.minZoom,max:u.maxZoom});h.styleEnabled&&t.setStyle([]);var d=me({},u,u.renderer);t.initRenderer(d);!function loadExtData(e,t){if(e.some(ae))return zr.all(e).then(t);t(e)}([u.style,u.elements],function(e){var n=e[0],a=e[1];h.styleEnabled&&t.style().append(n),function setElesAndLayout(e,n,i){t.notifications(!1);var a=t.mutableElements();a.length>0&&a.remove(),null!=e&&(K(e)||W(e))&&t.add(e),t.one("layoutready",function(e){t.notifications(!0),t.emit(e),t.one("load",n),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",i),t.emit("done")});var s=me({},t._private.options.layout);s.eles=t.elements(),t.layout(s).run()}(a,function(){t.startAnimationLoop(),h.ready=!0,j(u.ready)&&t.on("ready",u.ready);for(var e=0;e<s.length;e++){var n=s[e];t.on("ready",n)}i&&(i.readies=[]),t.emit("ready")},u.done)})},_l=El.prototype;me(_l,{instanceString:function instanceString(){return"core"},isReady:function isReady(){return this._private.ready},destroyed:function destroyed(){return this._private.destroyed},ready:function ready(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function destroy(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function hasElementWithId(e){return this._private.elements.hasElementWithId(e)},getElementById:function getElementById(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function hasCompoundNodes(){return this._private.hasCompoundNodes},headless:function headless(){return this._private.renderer.isHeadless()},styleEnabled:function styleEnabled(){return this._private.styleEnabled},addToPool:function addToPool(e){return this._private.elements.merge(e),this},removeFromPool:function removeFromPool(e){return this._private.elements.unmerge(e),this},container:function container(){return this._private.container||null},window:function window(){if(null==this._private.container)return a;var e=this._private.container.ownerDocument;return void 0===e||null==e?a:e.defaultView||a},mount:function mount(e){if(null!=e){var t=this,n=t._private,i=n.options;return!Q(e)&&Q(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(me({},i,i.renderer,{name:"null"===i.renderer.name?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function unmount(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function options(){return Qe(this._private.options)},json:function json(e){var t=this,n=t._private,i=t.mutableElements();if(K(e)){if(t.startBatch(),e.elements){var a={},s=function updateEles(e,n){for(var i=[],s=[],l=0;l<e.length;l++){var u=e[l];if(u.data.id){var c=""+u.data.id,h=t.getElementById(c);a[c]=!0,0!==h.length?s.push({ele:h,json:u}):n?(u.group=n,i.push(u)):i.push(u)}else Ze("cy.json() cannot handle elements without an ID attribute")}t.add(i);for(var d=0;d<s.length;d++){var p=s[d],g=p.ele,v=p.json;g.json(v)}};if(W(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var c=l[u],h=e.elements[c];W(h)&&s(h,c)}var d=t.collection();i.filter(function(e){return!a[e.id()]}).forEach(function(e){e.isParent()?d.merge(e):e.remove()}),d.forEach(function(e){return e.children().move({parent:null})}),d.forEach(function(e){return function getFreshRef(e){return t.getElementById(e.id())}(e).remove()})}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x===n.pan.x&&e.pan.y===n.pan.y||t.pan(e.pan)),e.data&&t.data(e.data);for(var p=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],g=0;g<p.length;g++){var v=p[g];null!=e[v]&&t[v](e[v])}return t.endBatch(),this}var json={};!!e?json.elements=this.elements().map(function(e){return e.json()}):(json.elements={},i.forEach(function(e){var t=e.group();json.elements[t]||(json.elements[t]=[]),json.elements[t].push(e.json())})),this._private.styleEnabled&&(json.style=t.style().json()),json.data=Qe(t.data());var y=n.options;return json.zoomingEnabled=n.zoomingEnabled,json.userZoomingEnabled=n.userZoomingEnabled,json.zoom=n.zoom,json.minZoom=n.minZoom,json.maxZoom=n.maxZoom,json.panningEnabled=n.panningEnabled,json.userPanningEnabled=n.userPanningEnabled,json.pan=Qe(n.pan),json.boxSelectionEnabled=n.boxSelectionEnabled,json.renderer=Qe(y.renderer),json.hideEdgesOnViewport=y.hideEdgesOnViewport,json.textureOnViewport=y.textureOnViewport,json.wheelSensitivity=y.wheelSensitivity,json.motionBlur=y.motionBlur,json.multiClickDebounceTime=y.multiClickDebounceTime,json}}),_l.$id=_l.getElementById,[Ws,Qs,tl,nl,rl,il,ol,sl,bl,xl,wl].forEach(function(e){me(_l,e)});var Cl={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(e,t){return!0},ready:void 0,stop:void 0,transform:function transform(e,t){return t}},Tl={maximal:!1,acyclic:!1},Ll=function getInfo(e){return e.scratch("breadthfirst")},Dl=function setInfo(e,t){return e.scratch("breadthfirst",t)};function BreadthFirstLayout(e){this.options=me({},Cl,Tl,e)}BreadthFirstLayout.prototype.run=function(){var e,t=this.options,n=t.cy,i=t.eles,a=i.nodes().filter(function(e){return e.isChildless()}),s=i,l=t.directed,u=t.acyclic||t.maximal||t.maximalAdjustments>0,c=!!t.boundingBox,h=Ut(c?t.boundingBox:structuredClone(n.extent()));if(J(t.roots))e=t.roots;else if(W(t.roots)){for(var d=[],p=0;p<t.roots.length;p++){var g=t.roots[p],v=n.getElementById(g);d.push(v)}e=n.collection(d)}else if(H(t.roots))e=n.$(t.roots);else if(l)e=a.roots();else{var y=i.components();e=n.collection();for(var m=function _loop(){var t=y[b],n=t.maxDegree(!1),i=t.filter(function(e){return e.degree(!1)===n});e=e.add(i)},b=0;b<y.length;b++)m()}var x=[],w={},E=function addToDepth(e,t){null==x[t]&&(x[t]=[]);var n=x[t].length;x[t].push(e),Dl(e,{index:n,depth:t})};s.bfs({roots:e,directed:t.directed,visit:function visit(e,t,n,i,a){var s=e[0],l=s.id();s.isChildless()&&E(s,a),w[l]=!0}});for(var _=[],T=0;T<a.length;T++){var L=a[T];w[L.id()]||_.push(L)}var D=function assignDepthsAt(e){for(var t=x[e],n=0;n<t.length;n++){var i=t[n];null!=i?Dl(i,{depth:e,index:n}):(t.splice(n,1),n--)}},S=function adjustMaximally(e,n){for(var a=Ll(e),s=e.incomers().filter(function(e){return e.isNode()&&i.has(e)}),l=-1,u=e.id(),c=0;c<s.length;c++){var h=s[c],d=Ll(h);l=Math.max(l,d.depth)}if(a.depth<=l){if(!t.acyclic&&n[u])return null;var p=l+1;return function changeDepth(e,t){var n=Ll(e),i=n.depth,a=n.index;x[i][a]=null,e.isChildless()&&E(e,t)}(e,p),n[u]=p,!0}return!1};if(l&&u){var k=[],P={},N=function enqueue(e){return k.push(e)},I=function dequeue(){return k.shift()};for(a.forEach(function(e){return k.push(e)});k.length>0;){var M=I(),R=S(M,P);if(R)M.outgoers().filter(function(e){return e.isNode()&&i.has(e)}).forEach(N);else if(null===R){Ze("Detected double maximal shift for node `"+M.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var O=0;if(t.avoidOverlap)for(var z=0;z<a.length;z++){var G=a[z].layoutDimensions(t),V=G.w,q=G.h;O=Math.max(O,V,q)}var Y={},X=function getWeightedPercent(e){if(Y[e.id()])return Y[e.id()];for(var t=Ll(e).depth,n=e.neighborhood(),i=0,s=0,l=0;l<n.length;l++){var u=n[l];if(!u.isEdge()&&!u.isParent()&&a.has(u)){var c=Ll(u);if(null!=c){var h=c.index,d=c.depth;if(null!=h&&null!=d){var p=x[d].length;d<t&&(i+=h/p,s++)}}}}return i/=s=Math.max(1,s),0===s&&(i=0),Y[e.id()]=i,i},U=function sortFn(e,t){var n=X(e)-X(t);return 0===n?ye(e.id(),t.id()):n};void 0!==t.depthSort&&(U=t.depthSort);for(var j=x.length,K=0;K<j;K++)x[K].sort(U),D(K);for(var Z=[],Q=0;Q<_.length;Q++)Z.push(_[Q]);Z.length&&(x.unshift(Z),j=x.length,function assignDepths(){for(var e=0;e<j;e++)D(e)}());for(var ee=0,te=0;te<j;te++)ee=Math.max(x[te].length,ee);var ne=h.x1+h.w/2,re=h.y1+h.h/2,ie=a.reduce(function(e,n){return i=n.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}),{w:-1===e.w?i.w:(e.w+i.w)/2,h:-1===e.h?i.h:(e.h+i.h)/2};var i},{w:-1,h:-1}),ae=Math.max(1===j?0:c?(h.h-2*t.padding-ie.h)/(j-1):(h.h-2*t.padding-ie.h)/(j+1),O),oe=x.reduce(function(e,t){return Math.max(e,t.length)},0),se={downward:0,leftward:90,upward:180,rightward:-90};-1===Object.keys(se).indexOf(t.direction)&&$e("Invalid direction '".concat(t.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(se).join(", ")));return i.nodes().layoutPositions(this,t,function getPosition(e){return rotatePosAndSkewByBox(function getPositionTopBottom(e){var n=Ll(e),i=n.depth,a=n.index;if(t.circle){var s=Math.min(h.w/2/j,h.h/2/j),l=(s=Math.max(s,O))*i+s-(j>0&&x[0].length<=3?s/2:0),u=2*Math.PI/x[i].length*a;return 0===i&&1===x[0].length&&(l=1),{x:ne+l*Math.cos(u),y:re+l*Math.sin(u)}}var d=x[i].length,p=Math.max(1===d?0:c?(h.w-2*t.padding-ie.w)/((t.grid?oe:d)-1):(h.w-2*t.padding-ie.w)/((t.grid?oe:d)+1),O);return{x:ne+(a+1-(d+1)/2)*p,y:re+(i+1-(j+1)/2)*ae}}(e),h,se[t.direction])}),this};var Al={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(e,t){return!0},ready:void 0,stop:void 0,transform:function transform(e,t){return t}};function CircleLayout(e){this.options=me({},Al,e)}CircleLayout.prototype.run=function(){var e=this.options,t=e,n=e.cy,i=t.eles,a=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,s=i.nodes().not(":parent");t.sort&&(s=s.sort(t.sort));for(var l,u=Ut(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),c=u.x1+u.w/2,h=u.y1+u.h/2,d=(void 0===t.sweep?2*Math.PI-2*Math.PI/s.length:t.sweep)/Math.max(1,s.length-1),p=0,g=0;g<s.length;g++){var v=s[g].layoutDimensions(t),y=v.w,m=v.h;p=Math.max(p,y,m)}if(l=Z(t.radius)?t.radius:s.length<=1?0:Math.min(u.h,u.w)/2-p,s.length>1&&t.avoidOverlap){p*=1.75;var b=Math.cos(d)-Math.cos(0),x=Math.sin(d)-Math.sin(0),w=Math.sqrt(p*p/(b*b+x*x));l=Math.max(w,l)}return i.nodes().layoutPositions(this,t,function getPos(e,n){var i=t.startAngle+n*d*(a?1:-1),s=l*Math.cos(i),u=l*Math.sin(i);return{x:c+s,y:h+u}}),this};var Sl,kl={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function concentric(e){return e.degree()},levelWidth:function levelWidth(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(e,t){return!0},ready:void 0,stop:void 0,transform:function transform(e,t){return t}};function ConcentricLayout(e){this.options=me({},kl,e)}ConcentricLayout.prototype.run=function(){for(var e=this.options,t=e,n=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,i=e.cy,a=t.eles,s=a.nodes().not(":parent"),l=Ut(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),u=l.x1+l.w/2,c=l.y1+l.h/2,h=[],d=0,p=0;p<s.length;p++){var g,v=s[p];g=t.concentric(v),h.push({value:g,node:v}),v._private.scratch.concentric=g}s.updateStyle();for(var y=0;y<s.length;y++){var m=s[y].layoutDimensions(t);d=Math.max(d,m.w,m.h)}h.sort(function(e,t){return t.value-e.value});for(var b=t.levelWidth(s),x=[[]],w=x[0],E=0;E<h.length;E++){var _=h[E];if(w.length>0)Math.abs(w[0].value-_.value)>=b&&(w=[],x.push(w));w.push(_)}var T=d+t.minNodeSpacing;if(!t.avoidOverlap){var L=x.length>0&&x[0].length>1,D=(Math.min(l.w,l.h)/2-T)/(x.length+L?1:0);T=Math.min(T,D)}for(var S=0,k=0;k<x.length;k++){var P=x[k],N=void 0===t.sweep?2*Math.PI-2*Math.PI/P.length:t.sweep,I=P.dTheta=N/Math.max(1,P.length-1);if(P.length>1&&t.avoidOverlap){var M=Math.cos(I)-Math.cos(0),R=Math.sin(I)-Math.sin(0),O=Math.sqrt(T*T/(M*M+R*R));S=Math.max(O,S)}P.r=S,S+=T}if(t.equidistant){for(var z=0,G=0,V=0;V<x.length;V++){var q=x[V].r-G;z=Math.max(z,q)}G=0;for(var Y=0;Y<x.length;Y++){var X=x[Y];0===Y&&(G=X.r),X.r=G,G+=z}}for(var U={},H=0;H<x.length;H++)for(var j=x[H],W=j.dTheta,K=j.r,Z=0;Z<j.length;Z++){var Q=j[Z],J=t.startAngle+(n?1:-1)*W*Z,ee={x:u+K*Math.cos(J),y:c+K*Math.sin(J)};U[Q.node.id()]=ee}return a.nodes().layoutPositions(this,t,function(e){var t=e.id();return U[t]}),this};var Pl={ready:function ready(){},stop:function stop(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function animateFilter(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function nodeRepulsion(e){return 2048},nodeOverlap:4,idealEdgeLength:function idealEdgeLength(e){return 32},edgeElasticity:function edgeElasticity(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function CoseLayout(e){this.options=me({},Pl,e),this.options.layout=this;var t=this.options.eles.nodes(),n=this.options.eles.edges().filter(function(e){var n=e.source().data("id"),i=e.target().data("id"),a=t.some(function(e){return e.data("id")===n}),s=t.some(function(e){return e.data("id")===i});return!a||!s});this.options.eles=this.options.eles.not(n)}CoseLayout.prototype.run=function(){var e=this.options,t=e.cy,n=this;n.stopped=!1,!0!==e.animate&&!1!==e.animate||n.emit({type:"layoutstart",layout:n}),Sl=!0===e.debug;var i=Nl(t,n,e);Sl&&undefined(i),e.randomize&&Rl(i);var a=Se(),s=function refresh(){Ol(i,t,e),!0===e.fit&&t.fit(e.padding)},l=function mainLoop(t){return!(n.stopped||t>=e.numIter)&&(Fl(i,e),i.temperature=i.temperature*e.coolingFactor,!(i.temperature<e.minTemp))},u=function done(){if(!0===e.animate||!1===e.animate)s(),n.one("layoutstop",e.stop),n.emit({type:"layoutstop",layout:n});else{var t=e.eles.nodes(),a=Bl(i,e,t);t.layoutPositions(n,e,a)}},c=0,h=!0;if(!0===e.animate){var d=function frame(){for(var t=0;h&&t<e.refresh;)h=l(c),c++,t++;h?(Se()-a>=e.animationThreshold&&s(),Ae(d)):(Kl(i,e),u())};d()}else{for(;h;)h=l(c),c++;Kl(i,e),u()}return this},CoseLayout.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},CoseLayout.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Nl=function createLayoutInfo(e,t,n){for(var i=n.eles.edges(),a=n.eles.nodes(),s=Ut(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),l={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=n.eles.components(),c={},h=0;h<u.length;h++)for(var d=u[h],p=0;p<d.length;p++){c[d[p].id()]=h}for(h=0;h<l.nodeSize;h++){var g=(x=a[h]).layoutDimensions(n);(G={}).isLocked=x.locked(),G.id=x.data("id"),G.parentId=x.data("parent"),G.cmptId=c[x.id()],G.children=[],G.positionX=x.position("x"),G.positionY=x.position("y"),G.offsetX=0,G.offsetY=0,G.height=g.w,G.width=g.h,G.maxX=G.positionX+G.width/2,G.minX=G.positionX-G.width/2,G.maxY=G.positionY+G.height/2,G.minY=G.positionY-G.height/2,G.padLeft=parseFloat(x.style("padding")),G.padRight=parseFloat(x.style("padding")),G.padTop=parseFloat(x.style("padding")),G.padBottom=parseFloat(x.style("padding")),G.nodeRepulsion=j(n.nodeRepulsion)?n.nodeRepulsion(x):n.nodeRepulsion,l.layoutNodes.push(G),l.idToIndex[G.id]=h}var v=[],y=0,m=-1,b=[];for(h=0;h<l.nodeSize;h++){var x,w=(x=l.layoutNodes[h]).parentId;null!=w?l.layoutNodes[l.idToIndex[w]].children.push(x.id):(v[++m]=x.id,b.push(x.id))}for(l.graphSet.push(b);y<=m;){var E=v[y++],_=l.idToIndex[E],T=l.layoutNodes[_].children;if(T.length>0){l.graphSet.push(T);for(h=0;h<T.length;h++)v[++m]=T[h]}}for(h=0;h<l.graphSet.length;h++){var L=l.graphSet[h];for(p=0;p<L.length;p++){var D=l.idToIndex[L[p]];l.indexToGraph[D]=h}}for(h=0;h<l.edgeSize;h++){var S=i[h],k={};k.id=S.data("id"),k.sourceId=S.data("source"),k.targetId=S.data("target");var P=j(n.idealEdgeLength)?n.idealEdgeLength(S):n.idealEdgeLength,N=j(n.edgeElasticity)?n.edgeElasticity(S):n.edgeElasticity,I=l.idToIndex[k.sourceId],M=l.idToIndex[k.targetId];if(l.indexToGraph[I]!=l.indexToGraph[M]){for(var R=Il(k.sourceId,k.targetId,l),O=l.graphSet[R],z=0,G=l.layoutNodes[I];-1===O.indexOf(G.id);)G=l.layoutNodes[l.idToIndex[G.parentId]],z++;for(G=l.layoutNodes[M];-1===O.indexOf(G.id);)G=l.layoutNodes[l.idToIndex[G.parentId]],z++;P*=z*n.nestingFactor}k.idealLength=P,k.elasticity=N,l.layoutEdges.push(k)}return l},Il=function findLCA(e,t,n){var i=Ml(e,t,0,n);return 2>i.count?0:i.graph},Ml=function findLCA_aux(e,t,n,i){var a=i.graphSet[n];if(-1<a.indexOf(e)&&-1<a.indexOf(t))return{count:2,graph:n};for(var s=0,l=0;l<a.length;l++){var u=a[l],c=i.idToIndex[u],h=i.layoutNodes[c].children;if(0!==h.length){var d=i.indexToGraph[i.idToIndex[h[0]]],p=Ml(e,t,d,i);if(0!==p.count){if(1!==p.count)return p;if(2===++s)break}}}return{count:s,graph:n}},Rl=function randomizePositions(e,t){for(var n=e.clientWidth,i=e.clientHeight,a=0;a<e.nodeSize;a++){var s=e.layoutNodes[a];0!==s.children.length||s.isLocked||(s.positionX=Math.random()*n,s.positionY=Math.random()*i)}},Bl=function getScaleInBoundsFn(e,t,n){var i=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(t){var n=e.layoutNodes[e.idToIndex[t.data("id")]];a.x1=Math.min(a.x1,n.positionX),a.x2=Math.max(a.x2,n.positionX),a.y1=Math.min(a.y1,n.positionY),a.y2=Math.max(a.y2,n.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(n,s){var l=e.layoutNodes[e.idToIndex[n.data("id")]];if(t.boundingBox){var u=0===a.w?.5:(l.positionX-a.x1)/a.w,c=0===a.h?.5:(l.positionY-a.y1)/a.h;return{x:i.x1+u*i.w,y:i.y1+c*i.h}}return{x:l.positionX,y:l.positionY}}},Ol=function refreshPositions(e,t,n){var i=n.layout,a=n.eles.nodes(),s=Bl(e,n,a);a.positions(s),!0!==e.ready&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},Fl=function step(e,t,n){zl(e,t),Xl(e),Ul(e,t),Hl(e),jl(e)},zl=function calculateNodeForces(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],a=i.length,s=0;s<a;s++)for(var l=e.layoutNodes[e.idToIndex[i[s]]],u=s+1;u<a;u++){var c=e.layoutNodes[e.idToIndex[i[u]]];Vl(l,c,e,t)}},Gl=function randomDistance(e){return 2*e*Math.random()-1},Vl=function nodeRepulsion(e,t,n,i){if(e.cmptId===t.cmptId||n.isCompound){var a=t.positionX-e.positionX,s=t.positionY-e.positionY;0===a&&0===s&&(a=Gl(1),s=Gl(1));var l=ql(e,t,a,s);if(l>0)var u=(h=i.nodeOverlap*l)*a/(m=Math.sqrt(a*a+s*s)),c=h*s/m;else{var h,d=Yl(e,a,s),p=Yl(t,-1*a,-1*s),g=p.x-d.x,v=p.y-d.y,y=g*g+v*v,m=Math.sqrt(y);u=(h=(e.nodeRepulsion+t.nodeRepulsion)/y)*g/m,c=h*v/m}e.isLocked||(e.offsetX-=u,e.offsetY-=c),t.isLocked||(t.offsetX+=u,t.offsetY+=c)}},ql=function nodesOverlap(e,t,n,i){if(n>0)var a=e.maxX-t.minX;else a=t.maxX-e.minX;if(i>0)var s=e.maxY-t.minY;else s=t.maxY-e.minY;return a>=0&&s>=0?Math.sqrt(a*a+s*s):0},Yl=function findClippingPoint(e,t,n){var i=e.positionX,a=e.positionY,s=e.height||1,l=e.width||1,u=n/t,c=s/l,h={};return 0===t&&0<n||0===t&&0>n?(h.x=i,h.y=a+s/2,h):0<t&&-1*c<=u&&u<=c?(h.x=i+l/2,h.y=a+l*n/2/t,h):0>t&&-1*c<=u&&u<=c?(h.x=i-l/2,h.y=a-l*n/2/t,h):0<n&&(u<=-1*c||u>=c)?(h.x=i+s*t/2/n,h.y=a+s/2,h):0>n&&(u<=-1*c||u>=c)?(h.x=i-s*t/2/n,h.y=a-s/2,h):h},Xl=function calculateEdgeForces(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],a=e.idToIndex[i.sourceId],s=e.layoutNodes[a],l=e.idToIndex[i.targetId],u=e.layoutNodes[l],c=u.positionX-s.positionX,h=u.positionY-s.positionY;if(0!==c||0!==h){var d=Yl(s,c,h),p=Yl(u,-1*c,-1*h),g=p.x-d.x,v=p.y-d.y,y=Math.sqrt(g*g+v*v),m=Math.pow(i.idealLength-y,2)/i.elasticity;if(0!==y)var b=m*g/y,x=m*v/y;else b=0,x=0;s.isLocked||(s.offsetX+=b,s.offsetY+=x),u.isLocked||(u.offsetX-=b,u.offsetY-=x)}}},Ul=function calculateGravityForces(e,t){if(0!==t.gravity)for(var n=0;n<e.graphSet.length;n++){var i=e.graphSet[n],a=i.length;if(0===n)var s=e.clientHeight/2,l=e.clientWidth/2;else{var u=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[u.parentId]];s=c.positionX,l=c.positionY}for(var h=0;h<a;h++){var d=e.layoutNodes[e.idToIndex[i[h]]];if(!d.isLocked){var p=s-d.positionX,g=l-d.positionY,v=Math.sqrt(p*p+g*g);if(v>1){var y=t.gravity*p/v,m=t.gravity*g/v;d.offsetX+=y,d.offsetY+=m}}}}},Hl=function propagateForces(e,t){var n=[],i=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;i<=a;){var s=n[i++],l=e.idToIndex[s],u=e.layoutNodes[l],c=u.children;if(0<c.length&&!u.isLocked){for(var h=u.offsetX,d=u.offsetY,p=0;p<c.length;p++){var g=e.layoutNodes[e.idToIndex[c[p]]];g.offsetX+=h,g.offsetY+=d,n[++a]=c[p]}u.offsetX=0,u.offsetY=0}}},jl=function updatePositions(e,t){for(var n=0;n<e.nodeSize;n++){0<(a=e.layoutNodes[n]).children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(n=0;n<e.nodeSize;n++){if(!(0<(a=e.layoutNodes[n]).children.length||a.isLocked)){var i=Wl(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,$l(a,e)}}for(n=0;n<e.nodeSize;n++){var a;0<(a=e.layoutNodes[n]).children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},Wl=function limitForce(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var a={x:n*e/i,y:n*t/i};else a={x:e,y:t};return a},$l=function updateAncestryBoundaries(e,t){var n=e.parentId;if(null!=n){var i=t.layoutNodes[t.idToIndex[n]],a=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a?$l(i,t):void 0}},Kl=function separateComponents(e,t){for(var n=e.layoutNodes,i=[],a=0;a<n.length;a++){var s=n[a],l=s.cmptId;(i[l]=i[l]||[]).push(s)}var u=0;for(a=0;a<i.length;a++){if(m=i[a]){m.x1=1/0,m.x2=-1/0,m.y1=1/0,m.y2=-1/0;for(var c=0;c<m.length;c++){var h=m[c];m.x1=Math.min(m.x1,h.positionX-h.width/2),m.x2=Math.max(m.x2,h.positionX+h.width/2),m.y1=Math.min(m.y1,h.positionY-h.height/2),m.y2=Math.max(m.y2,h.positionY+h.height/2)}m.w=m.x2-m.x1,m.h=m.y2-m.y1,u+=m.w*m.h}}i.sort(function(e,t){return t.w*t.h-e.w*e.h});var d=0,p=0,g=0,v=0,y=Math.sqrt(u)*e.clientWidth/e.clientHeight;for(a=0;a<i.length;a++){var m;if(m=i[a]){for(c=0;c<m.length;c++){(h=m[c]).isLocked||(h.positionX+=d-m.x1,h.positionY+=p-m.y1)}d+=m.w+t.componentSpacing,g+=m.w+t.componentSpacing,v=Math.max(v,m.h),g>y&&(p+=v+t.componentSpacing,d=0,g=0,v=0)}}},Zl={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function position(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(e,t){return!0},ready:void 0,stop:void 0,transform:function transform(e,t){return t}};function GridLayout(e){this.options=me({},Zl,e)}GridLayout.prototype.run=function(){var e=this.options,t=e,n=e.cy,i=t.eles,a=i.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));var s=Ut(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===s.h||0===s.w)i.nodes().layoutPositions(this,t,function(e){return{x:s.x1,y:s.y1}});else{var l=a.size(),u=Math.sqrt(l*s.h/s.w),c=Math.round(u),h=Math.round(s.w/s.h*u),d=function small(e){if(null==e)return Math.min(c,h);Math.min(c,h)==c?c=e:h=e},p=function large(e){if(null==e)return Math.max(c,h);Math.max(c,h)==c?c=e:h=e},g=t.rows,v=null!=t.cols?t.cols:t.columns;if(null!=g&&null!=v)c=g,h=v;else if(null!=g&&null==v)c=g,h=Math.ceil(l/c);else if(null==g&&null!=v)h=v,c=Math.ceil(l/h);else if(h*c>l){var y=d(),m=p();(y-1)*m>=l?d(y-1):(m-1)*y>=l&&p(m-1)}else for(;h*c<l;){var b=d(),x=p();(x+1)*b>=l?p(x+1):d(b+1)}var w=s.w/h,E=s.h/c;if(t.condense&&(w=0,E=0),t.avoidOverlap)for(var _=0;_<a.length;_++){var T=a[_],L=T._private.position;null!=L.x&&null!=L.y||(L.x=0,L.y=0);var D=T.layoutDimensions(t),S=t.avoidOverlapPadding,k=D.w+S,P=D.h+S;w=Math.max(w,k),E=Math.max(E,P)}for(var N={},I=function used(e,t){return!!N["c-"+e+"-"+t]},M=function use(e,t){N["c-"+e+"-"+t]=!0},R=0,O=0,z=function moveToNextCell(){++O>=h&&(O=0,R++)},G={},V=0;V<a.length;V++){var q=a[V],Y=t.position(q);if(Y&&(void 0!==Y.row||void 0!==Y.col)){var X={row:Y.row,col:Y.col};if(void 0===X.col)for(X.col=0;I(X.row,X.col);)X.col++;else if(void 0===X.row)for(X.row=0;I(X.row,X.col);)X.row++;G[q.id()]=X,M(X.row,X.col)}}a.layoutPositions(this,t,function getPos(e,t){var n,i;if(e.locked()||e.isParent())return!1;var a=G[e.id()];if(a)n=a.col*w+w/2+s.x1,i=a.row*E+E/2+s.y1;else{for(;I(R,O);)z();n=O*w+w/2+s.x1,i=R*E+E/2+s.y1,M(R,O),z()}return{x:n,y:i}})}return this};var Ql={ready:function ready(){},stop:function stop(){}};function NullLayout(e){this.options=me({},Ql,e)}NullLayout.prototype.run=function(){var e=this.options,t=e.eles,n=this;return e.cy,n.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",e.ready),n.emit("layoutready"),n.one("layoutstop",e.stop),n.emit("layoutstop"),this},NullLayout.prototype.stop=function(){return this};var Jl={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(e,t){return!0},ready:void 0,stop:void 0,transform:function transform(e,t){return t}};function PresetLayout(e){this.options=me({},Jl,e)}PresetLayout.prototype.run=function(){var e=this.options,t=e.eles.nodes(),n=j(e.positions);return t.layoutPositions(this,e,function(t,i){var a=function getPosition(t){if(null==e.positions)return function copyPosition(e){return{x:e.x,y:e.y}}(t.position());if(n)return e.positions(t);var i=e.positions[t._private.data.id];return null==i?null:i}(t);return!t.locked()&&null!=a&&a}),this};var eu={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function animateFilter(e,t){return!0},ready:void 0,stop:void 0,transform:function transform(e,t){return t}};function RandomLayout(e){this.options=me({},eu,e)}RandomLayout.prototype.run=function(){var e=this.options,t=e.cy,n=e.eles,i=Ut(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return n.nodes().layoutPositions(this,e,function getPos(e,t){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}}),this};var tu=[{name:"breadthfirst",impl:BreadthFirstLayout},{name:"circle",impl:CircleLayout},{name:"concentric",impl:ConcentricLayout},{name:"cose",impl:CoseLayout},{name:"grid",impl:GridLayout},{name:"null",impl:NullLayout},{name:"preset",impl:PresetLayout},{name:"random",impl:RandomLayout}];function NullRenderer(e){this.options=e,this.notifications=0}var nu=function noop(){},ru=function throwImgErr(){throw new Error("A headless instance can not render images")};NullRenderer.prototype={recalculateRenderedStyle:nu,notify:function notify(){this.notifications++},init:nu,isHeadless:function isHeadless(){return!0},png:ru,jpg:ru};var iu={arrowShapeWidth:.3,registerArrowShapes:function(){var e=this.arrowShapes={},t=this,n=function bbCollide(e,t,n,i,a,s,l){var u=a.x-n/2-l,c=a.x+n/2+l,h=a.y-n/2-l,d=a.y+n/2+l;return u<=e&&e<=c&&h<=t&&t<=d},i=function transform(e,t,n,i,a){var s=e*Math.cos(i)-t*Math.sin(i),l=(e*Math.sin(i)+t*Math.cos(i))*n;return{x:s*n+a.x,y:l+a.y}},a=function transformPoints(e,t,n,a){for(var s=[],l=0;l<e.length;l+=2){var u=e[l],c=e[l+1];s.push(i(u,c,t,n,a))}return s},s=function pointsToArr(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i.x,i.y)}return t},l=function standardGap(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},u=function defineArrowShape(i,u){H(u)&&(u=e[u]),e[i]=me({name:i,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function collide(e,t,n,i,l,u){var c=s(a(this.points,n+2*u,i,l));return un(e,t,c)},roughCollide:n,draw:function draw(e,n,i,s){var l=a(this.points,n,i,s);t.arrowShapeImpl("polygon")(e,l)},spacing:function spacing(e){return 0},gap:l},u)};u("none",{collide:He,roughCollide:He,draw:We,spacing:je,gap:je}),u("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),u("arrow","triangle"),u("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function draw(e,n,s,l,u){var c=a(this.points,n,s,l),h=this.controlPoint,d=i(h[0],h[1],n,s,l);t.arrowShapeImpl(this.name)(e,c,d)},gap:function gap(e){return.8*l(e)}}),u("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function collide(e,t,n,i,l,u,c){var h=s(a(this.points,n+2*c,i,l)),d=s(a(this.pointsTee,n+2*c,i,l));return un(e,t,h)||un(e,t,d)},draw:function draw(e,n,i,s,l){var u=a(this.points,n,i,s),c=a(this.pointsTee,n,i,s);t.arrowShapeImpl(this.name)(e,u,c)}}),u("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function collide(e,t,n,i,l,u,c){var h=l,d=Math.pow(h.x-e,2)+Math.pow(h.y-t,2)<=Math.pow((n+2*c)*this.radius,2),p=s(a(this.points,n+2*c,i,l));return un(e,t,p)||d},draw:function draw(e,n,i,s,l){var u=a(this.pointsTr,n,i,s);t.arrowShapeImpl(this.name)(e,u,s.x,s.y,this.radius*n)},spacing:function spacing(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),u("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function crossLinePts(e,t){var n=this.baseCrossLinePts.slice(),i=t/e;return n[3]=n[3]-i,n[5]=n[5]-i,n},collide:function collide(e,t,n,i,l,u,c){var h=s(a(this.points,n+2*c,i,l)),d=s(a(this.crossLinePts(n,u),n+2*c,i,l));return un(e,t,h)||un(e,t,d)},draw:function draw(e,n,i,s,l){var u=a(this.points,n,i,s),c=a(this.crossLinePts(n,l),n,i,s);t.arrowShapeImpl(this.name)(e,u,c)}}),u("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function gap(e){return.525*l(e)}}),u("circle",{radius:.15,collide:function collide(e,t,n,i,a,s,l){var u=a;return Math.pow(u.x-e,2)+Math.pow(u.y-t,2)<=Math.pow((n+2*l)*this.radius,2)},draw:function draw(e,n,i,a,s){t.arrowShapeImpl(this.name)(e,a.x,a.y,this.radius*n)},spacing:function spacing(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),u("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function spacing(e){return 1},gap:function gap(e){return 1}}),u("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),u("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function gap(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),u("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function gap(e){return.95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})}},au={projectIntoViewport:function(e,t){var n=this.cy,i=this.findContainerClientCoords(),a=i[0],s=i[1],l=i[4],u=n.pan(),c=n.zoom();return[((e-a)/l-u.x)/c,((t-s)/l-u.y)/c]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),n=this.cy.window().getComputedStyle(e),i=function styleValue(e){return parseFloat(n.getPropertyValue(e))},a=i("padding-left"),s=i("padding-right"),l=i("padding-top"),u=i("padding-bottom"),c=i("border-left-width"),h=i("border-right-width"),d=i("border-top-width"),p=(i("border-bottom-width"),e.clientWidth),g=e.clientHeight,v=a+s,y=l+u,m=c+h,b=t.width/(p+m),x=p-v,w=g-y,E=t.left+a+c,_=t.top+l+d;return this.containerBB=[E,_,x,w,b]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(e,t,n,i){return this.findNearestElements(e,t,n,i)[0]},findNearestElements:function(e,t,n,i){var a,s,l=this,u=this,c=u.getCachedZSortedEles(),h=[],d=u.cy.zoom(),p=u.cy.hasCompoundNodes(),g=(i?24:8)/d,v=(i?8:2)/d,y=(i?8:2)/d,m=1/0;function addEle(e,t){if(e.isNode()){if(s)return;s=e,h.push(e)}if(e.isEdge()&&(null==t||t<m))if(a){if(a.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&a.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value)for(var n=0;n<h.length;n++)if(h[n].isEdge()){h[n]=e,a=e,m=null!=t?t:m;break}}else h.push(e),a=e,m=null!=t?t:m}function checkNode(n){var i=n.outerWidth()+2*v,a=n.outerHeight()+2*v,s=i/2,c=a/2,h=n.position(),d="auto"===n.pstyle("corner-radius").value?"auto":n.pstyle("corner-radius").pfValue,p=n._private.rscratch;if(h.x-s<=e&&e<=h.x+s&&h.y-c<=t&&t<=h.y+c&&u.nodeShapes[l.getNodeShape(n)].checkPoint(e,t,0,i,a,h.x,h.y,d,p))return addEle(n,0),!0}function checkEdge(n){var i,a=n._private,s=a.rscratch,c=n.pstyle("width").pfValue,d=n.pstyle("arrow-scale").value,v=c/2+g,y=v*v,m=2*v,b=a.source,x=a.target;if("segments"===s.edgeType||"straight"===s.edgeType||"haystack"===s.edgeType){for(var w=s.allpts,E=0;E+3<w.length;E+=2)if(rn(e,t,w[E],w[E+1],w[E+2],w[E+3],m)&&y>(i=ln(e,t,w[E],w[E+1],w[E+2],w[E+3])))return addEle(n,i),!0}else if("bezier"===s.edgeType||"multibezier"===s.edgeType||"self"===s.edgeType||"compound"===s.edgeType)for(w=s.allpts,E=0;E+5<s.allpts.length;E+=4)if(an(e,t,w[E],w[E+1],w[E+2],w[E+3],w[E+4],w[E+5],m)&&y>(i=sn(e,t,w[E],w[E+1],w[E+2],w[E+3],w[E+4],w[E+5])))return addEle(n,i),!0;b=b||a.source,x=x||a.target;var _=l.getArrowWidth(c,d),T=[{name:"source",x:s.arrowStartX,y:s.arrowStartY,angle:s.srcArrowAngle},{name:"target",x:s.arrowEndX,y:s.arrowEndY,angle:s.tgtArrowAngle},{name:"mid-source",x:s.midX,y:s.midY,angle:s.midsrcArrowAngle},{name:"mid-target",x:s.midX,y:s.midY,angle:s.midtgtArrowAngle}];for(E=0;E<T.length;E++){var L=T[E],D=u.arrowShapes[n.pstyle(L.name+"-arrow-shape").value],S=n.pstyle("width").pfValue;if(D.roughCollide(e,t,_,L.angle,{x:L.x,y:L.y},S,g)&&D.collide(e,t,_,L.angle,{x:L.x,y:L.y},S,g))return addEle(n),!0}p&&h.length>0&&(checkNode(b),checkNode(x))}function preprop(e,t,n){return at(e,t,n)}function checkLabel(n,i){var a,s=n._private,l=y;a=i?i+"-":"",n.boundingBox();var u=s.labelBounds[i||"main"],c=n.pstyle(a+"label").value;if("yes"===n.pstyle("text-events").strValue&&c){var h=preprop(s.rscratch,"labelX",i),d=preprop(s.rscratch,"labelY",i),p=preprop(s.rscratch,"labelAngle",i),g=n.pstyle(a+"text-margin-x").pfValue,v=n.pstyle(a+"text-margin-y").pfValue,m=u.x1-l-g,b=u.x2+l-g,x=u.y1-l-v,w=u.y2+l-v;if(p){var E=Math.cos(p),_=Math.sin(p),T=function rotate(e,t){return{x:(e-=h)*E-(t-=d)*_+h,y:e*_+t*E+d}},L=T(m,x),D=T(m,w),S=T(b,x),k=T(b,w),P=[L.x+g,L.y+v,S.x+g,S.y+v,k.x+g,k.y+v,D.x+g,D.y+v];if(un(e,t,P))return addEle(n),!0}else if(Qt(u,e,t))return addEle(n),!0}}n&&(c=c.interactive);for(var b=c.length-1;b>=0;b--){var x=c[b];x.isNode()?checkNode(x)||checkLabel(x):checkEdge(x)||checkLabel(x)||checkLabel(x,"source")||checkLabel(x,"target")}return h},getAllInBox:function(e,t,n,i){var a=this.getCachedZSortedEles().interactive,s=2/this.cy.zoom(),l=[],u=Math.min(e,n),c=Math.max(e,n),h=Math.min(t,i),d=Math.max(t,i),p=Ut({x1:e=u,y1:t=h,x2:n=c,y2:i=d}),g=[{x:p.x1,y:p.y1},{x:p.x2,y:p.y1},{x:p.x2,y:p.y2},{x:p.x1,y:p.y2}],v=[[g[0],g[1]],[g[1],g[2]],[g[2],g[3]],[g[3],g[0]]];function preprop(e,t,n){return at(e,t,n)}function getRotatedLabelBox(e,t){var n=e._private,i=s;e.boundingBox();var a=n.labelBounds.main;if(!a)return null;var l=preprop(n.rscratch,"labelX",t),u=preprop(n.rscratch,"labelY",t),c=preprop(n.rscratch,"labelAngle",t),h=e.pstyle("text-margin-x").pfValue,d=e.pstyle("text-margin-y").pfValue,p=a.x1-i-h,g=a.x2+i-h,v=a.y1-i-d,y=a.y2+i-d;if(c){var m=Math.cos(c),b=Math.sin(c),x=function rotate(e,t){return{x:(e-=l)*m-(t-=u)*b+l,y:e*b+t*m+u}};return[x(p,v),x(g,v),x(g,y),x(p,y)]}return[{x:p,y:v},{x:g,y:v},{x:g,y},{x:p,y}]}function doLinesIntersect(e,t,n,i){function ccw(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}return ccw(e,n,i)!==ccw(t,n,i)&&ccw(e,t,n)!==ccw(e,t,i)}for(var y=0;y<a.length;y++){var m=a[y];if(m.isNode()){var b=m,x="yes"===b.pstyle("text-events").strValue,w=b.pstyle("box-selection").strValue,E="yes"===b.pstyle("box-select-labels").strValue;if("none"===w)continue;var _=("overlap"===w||E)&&x,T=b.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:_});if("contain"===w){var L=!1;if(E&&x){var D=getRotatedLabelBox(b);D&&satPolygonIntersection(D,g)&&(l.push(b),L=!0)}!L&&en(p,T)&&l.push(b)}else if("overlap"===w&&Zt(p,T)){var S=b.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1});if(satPolygonIntersection([{x:S.x1,y:S.y1},{x:S.x2,y:S.y1},{x:S.x2,y:S.y2},{x:S.x1,y:S.y2}],g))l.push(b);else{var k=getRotatedLabelBox(b);k&&satPolygonIntersection(k,g)&&l.push(b)}}}else{var P=m,N=P._private,I=N.rscratch,M=P.pstyle("box-selection").strValue;if("none"===M)continue;if("contain"===M){if(null!=I.startX&&null!=I.startY&&!Qt(p,I.startX,I.startY))continue;if(null!=I.endX&&null!=I.endY&&!Qt(p,I.endX,I.endY))continue;if("bezier"===I.edgeType||"multibezier"===I.edgeType||"self"===I.edgeType||"compound"===I.edgeType||"segments"===I.edgeType||"haystack"===I.edgeType){for(var R=N.rstyle.bezierPts||N.rstyle.linePts||N.rstyle.haystackPts,O=!0,z=0;z<R.length;z++)if(!Jt(p,R[z])){O=!1;break}O&&l.push(P)}else"straight"===I.edgeType&&l.push(P)}else if("overlap"===M){var G=!1;if(null!=I.startX&&null!=I.startY&&null!=I.endX&&null!=I.endY&&(Qt(p,I.startX,I.startY)||Qt(p,I.endX,I.endY)))l.push(P),G=!0;else if(!G&&"haystack"===I.edgeType)for(var V=N.rstyle.haystackPts,q=0;q<V.length;q++)if(Jt(p,V[q])){l.push(P),G=!0;break}if(!G){var Y=N.rstyle.bezierPts||N.rstyle.linePts||N.rstyle.haystackPts;if((!Y||Y.length<2)&&"straight"===I.edgeType&&null!=I.startX&&null!=I.startY&&null!=I.endX&&null!=I.endY&&(Y=[{x:I.startX,y:I.startY},{x:I.endX,y:I.endY}]),!Y||Y.length<2)continue;for(var X=0;X<Y.length-1;X++){for(var U=Y[X],H=Y[X+1],j=0;j<v.length;j++){var W=_slicedToArray(v[j],2);if(doLinesIntersect(U,H,W[0],W[1])){l.push(P),G=!0;break}}if(G)break}}}}}return l}},ou={calculateArrowAngles:function(e){var t,n,i,a,s,l,u=e._private.rscratch,c="haystack"===u.edgeType,h="bezier"===u.edgeType,d="multibezier"===u.edgeType,p="segments"===u.edgeType,g="compound"===u.edgeType,v="self"===u.edgeType;if(c?(i=u.haystackPts[0],a=u.haystackPts[1],s=u.haystackPts[2],l=u.haystackPts[3]):(i=u.arrowStartX,a=u.arrowStartY,s=u.arrowEndX,l=u.arrowEndY),m=u.midX,b=u.midY,p)t=i-u.segpts[0],n=a-u.segpts[1];else if(d||g||v||h){var y=u.allpts;t=i-qt(y[0],y[2],y[4],.1),n=a-qt(y[1],y[3],y[5],.1)}else t=i-m,n=a-b;u.srcArrowAngle=Bt(t,n);var m=u.midX,b=u.midY;if(c&&(m=(i+s)/2,b=(a+l)/2),t=s-i,n=l-a,p)if((y=u.allpts).length/2%2==0){var x=(k=y.length/2)-2;t=y[k]-y[x],n=y[k+1]-y[x+1]}else if(u.isRound)t=u.midVector[1],n=-u.midVector[0];else{x=(k=y.length/2-1)-2;t=y[k]-y[x],n=y[k+1]-y[x+1]}else if(d||g||v){var w,E,_,T,y=u.allpts;if(u.ctrlpts.length/2%2==0){var L=(D=(S=y.length/2-1)+2)+2;w=qt(y[S],y[D],y[L],0),E=qt(y[S+1],y[D+1],y[L+1],0),_=qt(y[S],y[D],y[L],1e-4),T=qt(y[S+1],y[D+1],y[L+1],1e-4)}else{var D,S;L=(D=y.length/2-1)+2;w=qt(y[S=D-2],y[D],y[L],.4999),E=qt(y[S+1],y[D+1],y[L+1],.4999),_=qt(y[S],y[D],y[L],.5),T=qt(y[S+1],y[D+1],y[L+1],.5)}t=_-w,n=T-E}if(u.midtgtArrowAngle=Bt(t,n),u.midDispX=t,u.midDispY=n,t*=-1,n*=-1,p)if((y=u.allpts).length/2%2==0);else if(!u.isRound){var k,P=(k=y.length/2-1)+2;t=-(y[P]-y[k]),n=-(y[P+1]-y[k+1])}if(u.midsrcArrowAngle=Bt(t,n),p)t=s-u.segpts[u.segpts.length-2],n=l-u.segpts[u.segpts.length-1];else if(d||g||v||h){var N=(y=u.allpts).length;t=s-qt(y[N-6],y[N-4],y[N-2],.9),n=l-qt(y[N-5],y[N-3],y[N-1],.9)}else t=s-m,n=l-b;u.tgtArrowAngle=Bt(t,n)}};ou.getArrowWidth=ou.getArrowHeight=function(e,t){var n=this.arrowWidthCache=this.arrowWidthCache||{},i=n[e+", "+t];return i||(i=Math.max(Math.pow(13.37*e,.9),29)*t,n[e+", "+t]=i,i)};var su,lu,uu,cu,hu,du,pu,gu,fu,vu,yu,mu,bu,xu,wu,Eu,_u,Cu={},Tu={},Lu=function asVec(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},Du=function calcCornerArc(e,t,n,i,a){if(e!==_u?Lu(t,e,Cu):function invertVec(e,t){t.x=-1*e.x,t.y=-1*e.y,t.nx=-1*e.nx,t.ny=-1*e.ny,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang}(Tu,Cu),Lu(t,n,Tu),uu=Cu.nx*Tu.ny-Cu.ny*Tu.nx,cu=Cu.nx*Tu.nx-Cu.ny*-Tu.ny,pu=Math.asin(Math.max(-1,Math.min(1,uu))),Math.abs(pu)<1e-6)return su=t.x,lu=t.y,void(fu=yu=0);hu=1,du=!1,cu<0?pu<0?pu=Math.PI+pu:(pu=Math.PI-pu,hu=-1,du=!0):pu>0&&(hu=-1,du=!0),yu=void 0!==t.radius?t.radius:i,gu=pu/2,mu=Math.min(Cu.len/2,Tu.len/2),a?(vu=Math.abs(Math.cos(gu)*yu/Math.sin(gu)))>mu?(vu=mu,fu=Math.abs(vu*Math.sin(gu)/Math.cos(gu))):fu=yu:(vu=Math.min(mu,yu),fu=Math.abs(vu*Math.sin(gu)/Math.cos(gu))),wu=t.x+Tu.nx*vu,Eu=t.y+Tu.ny*vu,su=wu-Tu.ny*fu*hu,lu=Eu+Tu.nx*fu*hu,bu=t.x+Cu.nx*vu,xu=t.y+Cu.ny*vu,_u=t};function drawPreparedRoundCorner(e,t){0===t.radius?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function getRoundCorner(e,t,n,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return 0===i||0===t.radius?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(Du(e,t,n,i,a),{cx:su,cy:lu,radius:fu,startX:bu,startY:xu,stopX:wu,stopY:Eu,startAngle:Cu.ang+Math.PI/2*hu,endAngle:Tu.ang-Math.PI/2*hu,counterClockwise:du})}var Au=.01,Su=Math.sqrt(.02),ku={};function getPts(e){var t=[];if(null!=e){for(var n=0;n<e.length;n+=2){var i=e[n],a=e[n+1];t.push({x:i,y:a})}return t}}ku.findMidptPtsEtc=function(e,t){var n,i=t.posPts,a=t.intersectionPts,s=t.vectorNormInverse,l=e.pstyle("source-endpoint"),u=e.pstyle("target-endpoint"),c=null!=l.units&&null!=u.units;switch(e.pstyle("edge-distances").value){case"node-position":n=i;break;case"intersection":n=a;break;case"endpoints":if(c){var h=_slicedToArray(this.manualEndptToPx(e.source()[0],l),2),d=h[0],p=h[1],g=_slicedToArray(this.manualEndptToPx(e.target()[0],u),2),v=g[0],y=g[1],m={x1:d,y1:p,x2:v,y2:y};s=function recalcVectorNormInverse(e,t,n,i){var a=i-t,s=n-e,l=Math.sqrt(s*s+a*a);return{x:-a/l,y:s/l}}(d,p,v,y),n=m}else Ze("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),n=a}return{midptPts:n,vectorNormInverse:s}},ku.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n._private,a=i.rscratch;if(!a.haystack){var s=2*Math.random()*Math.PI;a.source={x:Math.cos(s),y:Math.sin(s)},s=2*Math.random()*Math.PI,a.target={x:Math.cos(s),y:Math.sin(s)}}var l=i.source,u=i.target,c=l.position(),h=u.position(),d=l.width(),p=u.width(),g=l.height(),v=u.height(),y=n.pstyle("haystack-radius").value/2;a.haystackPts=a.allpts=[a.source.x*d*y+c.x,a.source.y*g*y+c.y,a.target.x*p*y+h.x,a.target.y*v*y+h.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},ku.findSegmentsPoints=function(e,t){var n=e._private.rscratch,i=e.pstyle("segment-weights"),a=e.pstyle("segment-distances"),s=e.pstyle("segment-radii"),l=e.pstyle("radius-type"),u=Math.min(i.pfValue.length,a.pfValue.length),c=s.pfValue[s.pfValue.length-1],h=l.pfValue[l.pfValue.length-1];n.edgeType="segments",n.segpts=[],n.radii=[],n.isArcRadius=[];for(var d=0;d<u;d++){var p=i.pfValue[d],g=a.pfValue[d],v=1-p,y=p,m=this.findMidptPtsEtc(e,t),b=m.midptPts,x=m.vectorNormInverse,w={x:b.x1*v+b.x2*y,y:b.y1*v+b.y2*y};n.segpts.push(w.x+x.x*g,w.y+x.y*g),n.radii.push(void 0!==s.pfValue[d]?s.pfValue[d]:c),n.isArcRadius.push("arc-radius"===(void 0!==l.pfValue[d]?l.pfValue[d]:h))}},ku.findLoopPoints=function(e,t,n,i){var a=e._private.rscratch,s=t.dirCounts,l=t.srcPos,u=e.pstyle("control-point-distances"),c=u?u.pfValue[0]:void 0,h=e.pstyle("loop-direction").pfValue,d=e.pstyle("loop-sweep").pfValue,p=e.pstyle("control-point-step-size").pfValue;a.edgeType="self";var g=n,v=p;i&&(g=0,v=c);var y=h-Math.PI/2,m=y-d/2,b=y+d/2,x=String(h+"_"+d);g=void 0===s[x]?s[x]=0:++s[x],a.ctrlpts=[l.x+1.4*Math.cos(m)*v*(g/3+1),l.y+1.4*Math.sin(m)*v*(g/3+1),l.x+1.4*Math.cos(b)*v*(g/3+1),l.y+1.4*Math.sin(b)*v*(g/3+1)]},ku.findCompoundLoopPoints=function(e,t,n,i){var a=e._private.rscratch;a.edgeType="compound";var s=t.srcPos,l=t.tgtPos,u=t.srcW,c=t.srcH,h=t.tgtW,d=t.tgtH,p=e.pstyle("control-point-step-size").pfValue,g=e.pstyle("control-point-distances"),v=g?g.pfValue[0]:void 0,y=n,m=p;i&&(y=0,m=v);var b={x:s.x-u/2,y:s.y-c/2},x={x:l.x-h/2,y:l.y-d/2},w={x:Math.min(b.x,x.x),y:Math.min(b.y,x.y)},E=Math.max(.5,Math.log(u*Au)),_=Math.max(.5,Math.log(h*Au));a.ctrlpts=[w.x,w.y-(1+Math.pow(50,1.12)/100)*m*(y/3+1)*E,w.x-(1+Math.pow(50,1.12)/100)*m*(y/3+1)*_,w.y]},ku.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},ku.findBezierPoints=function(e,t,n,i,a){var s=e._private.rscratch,l=e.pstyle("control-point-step-size").pfValue,u=e.pstyle("control-point-distances"),c=e.pstyle("control-point-weights"),h=u&&c?Math.min(u.value.length,c.value.length):1,d=u?u.pfValue[0]:void 0,p=c.value[0],g=i;s.edgeType=g?"multibezier":"bezier",s.ctrlpts=[];for(var v=0;v<h;v++){var y=(.5-t.eles.length/2+n)*l*(a?-1:1),m=void 0,b=Ft(y);g&&(d=u?u.pfValue[v]:l,p=c.value[v]);var x=void 0!==(m=i?d:void 0!==d?b*d:void 0)?m:y,w=1-p,E=p,_=this.findMidptPtsEtc(e,t),T=_.midptPts,L=_.vectorNormInverse,D={x:T.x1*w+T.x2*E,y:T.y1*w+T.y2*E};s.ctrlpts.push(D.x+L.x*x,D.y+L.y*x)}},ku.findTaxiPoints=function(e,t){var n=e._private.rscratch;n.edgeType="segments";var i="vertical",a="horizontal",s="leftward",l="rightward",u="downward",c="upward",h=t.posPts,d=t.srcW,p=t.srcH,g=t.tgtW,v=t.tgtH,y="node-position"!==e.pstyle("edge-distances").value,m=e.pstyle("taxi-direction").value,b=m,x=e.pstyle("taxi-turn"),w="%"===x.units,E=x.pfValue,_=E<0,T=e.pstyle("taxi-turn-min-distance").pfValue,L=y?(d+g)/2:0,D=y?(p+v)/2:0,S=h.x2-h.x1,k=h.y2-h.y1,P=function subDWH(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)},N=P(S,L),I=P(k,D),M=!1;"auto"===b?m=Math.abs(N)>Math.abs(I)?a:i:b===c||b===u?(m=i,M=!0):b!==s&&b!==l||(m=a,M=!0);var R,O=m===i,z=O?I:N,G=O?k:S,V=Ft(G),q=!1;(M&&(w||_)||!(b===u&&G<0||b===c&&G>0||b===s&&G>0||b===l&&G<0)||(z=(V*=-1)*Math.abs(z),q=!0),w)?R=(E<0?1+E:E)*z:R=(E<0?z:0)+E*V;var Y=function getIsTooClose(e){return Math.abs(e)<T||Math.abs(e)>=Math.abs(z)},X=Y(R),U=Y(Math.abs(z)-Math.abs(R));if((X||U)&&!q)if(O){var H=Math.abs(G)<=p/2,j=Math.abs(S)<=g/2;if(H){var W=(h.x1+h.x2)/2,K=h.y1,Z=h.y2;n.segpts=[W,K,W,Z]}else if(j){var Q=(h.y1+h.y2)/2,J=h.x1,ee=h.x2;n.segpts=[J,Q,ee,Q]}else n.segpts=[h.x1,h.y2]}else{var te=Math.abs(G)<=d/2,ne=Math.abs(k)<=v/2;if(te){var re=(h.y1+h.y2)/2,ie=h.x1,ae=h.x2;n.segpts=[ie,re,ae,re]}else if(ne){var oe=(h.x1+h.x2)/2,se=h.y1,le=h.y2;n.segpts=[oe,se,oe,le]}else n.segpts=[h.x2,h.y1]}else if(O){var ue=h.y1+R+(y?p/2*V:0),ce=h.x1,he=h.x2;n.segpts=[ce,ue,he,ue]}else{var de=h.x1+R+(y?d/2*V:0),pe=h.y1,ge=h.y2;n.segpts=[de,pe,de,ge]}if(n.isRound){var fe=e.pstyle("taxi-radius").value,ve="arc-radius"===e.pstyle("radius-type").value[0];n.radii=new Array(n.segpts.length/2).fill(fe),n.isArcRadius=new Array(n.segpts.length/2).fill(ve)}},ku.tryToCorrectInvalidPoints=function(e,t){var n=e._private.rscratch;if("bezier"===n.edgeType){var i=t.srcPos,a=t.tgtPos,s=t.srcW,l=t.srcH,u=t.tgtW,c=t.tgtH,h=t.srcShape,d=t.tgtShape,p=t.srcCornerRadius,g=t.tgtCornerRadius,v=t.srcRs,y=t.tgtRs,m=!Z(n.startX)||!Z(n.startY),b=!Z(n.arrowStartX)||!Z(n.arrowStartY),x=!Z(n.endX)||!Z(n.endY),w=!Z(n.arrowEndX)||!Z(n.arrowEndY),E=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),_=zt({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),T=_<E,L=zt({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),D=L<E,S=!1;if(m||b||T){S=!0;var k={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},P=Math.sqrt(k.x*k.x+k.y*k.y),N={x:k.x/P,y:k.y/P},I=Math.max(s,l),M={x:n.ctrlpts[0]+2*N.x*I,y:n.ctrlpts[1]+2*N.y*I},R=h.intersectLine(i.x,i.y,s,l,M.x,M.y,0,p,v);T?(n.ctrlpts[0]=n.ctrlpts[0]+N.x*(E-_),n.ctrlpts[1]=n.ctrlpts[1]+N.y*(E-_)):(n.ctrlpts[0]=R[0]+N.x*E,n.ctrlpts[1]=R[1]+N.y*E)}if(x||w||D){S=!0;var O={x:n.ctrlpts[0]-a.x,y:n.ctrlpts[1]-a.y},z=Math.sqrt(O.x*O.x+O.y*O.y),G={x:O.x/z,y:O.y/z},V=Math.max(s,l),q={x:n.ctrlpts[0]+2*G.x*V,y:n.ctrlpts[1]+2*G.y*V},Y=d.intersectLine(a.x,a.y,u,c,q.x,q.y,0,g,y);D?(n.ctrlpts[0]=n.ctrlpts[0]+G.x*(E-L),n.ctrlpts[1]=n.ctrlpts[1]+G.y*(E-L)):(n.ctrlpts[0]=Y[0]+G.x*E,n.ctrlpts[1]=Y[1]+G.y*E)}S&&this.findEndpoints(e)}},ku.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var n=0;n+1<t.ctrlpts.length;n+=2)t.allpts.push(t.ctrlpts[n],t.ctrlpts[n+1]),n+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[n]+t.ctrlpts[n+2])/2,(t.ctrlpts[n+1]+t.ctrlpts[n+3])/2);var i;t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0?(i=t.allpts.length/2-1,t.midX=t.allpts[i],t.midY=t.allpts[i+1]):(i=t.allpts.length/2-3,t.midX=qt(t.allpts[i],t.allpts[i+2],t.allpts[i+4],.5),t.midY=qt(t.allpts[i+1],t.allpts[i+3],t.allpts[i+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var a=2;a+3<t.allpts.length;a+=2){var s=t.radii[a/2-1],l=t.isArcRadius[a/2-1];t.roundCorners.push(getRoundCorner({x:t.allpts[a-2],y:t.allpts[a-1]},{x:t.allpts[a],y:t.allpts[a+1],radius:s},{x:t.allpts[a+2],y:t.allpts[a+3]},s,l))}}if(t.segpts.length%4==0){var u=t.segpts.length/2,c=u-2;t.midX=(t.segpts[c]+t.segpts[u])/2,t.midY=(t.segpts[c+1]+t.segpts[u+1])/2}else{var h=t.segpts.length/2-1;if(t.isRound){var d={x:t.segpts[h],y:t.segpts[h+1]},p=t.roundCorners[h/2];if(0===p.radius){var g={x:t.segpts[h+2],y:t.segpts[h+3]};t.midX=d.x,t.midY=d.y,t.midVector=[d.y-g.y,g.x-d.x]}else{var v=[d.x-p.cx,d.y-p.cy],y=p.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(e){return e*y}),t.midX=p.cx+v[0],t.midY=p.cy+v[1],t.midVector=v}}else t.midX=t.segpts[h],t.midY=t.segpts[h+1]}}},ku.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||Z(t.startX)&&Z(t.startY)&&Z(t.endX)&&Z(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,Ze("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},ku.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var n=this,i=n.cy.hasCompoundNodes(),a=new st,s=function getKey(e,t){return[].concat(_toConsumableArray(e),[t?1:0]).join("-")},l=[],u=[],c=0;c<e.length;c++){var h=e[c],d=h._private,p=h.pstyle("curve-style").value;if(!h.removed()&&h.takesUpSpace())if("haystack"!==p){var g="unbundled-bezier"===p||he(p,"segments")||"straight"===p||"straight-triangle"===p||he(p,"taxi"),v="unbundled-bezier"===p||"bezier"===p,y=d.source,m=d.target,b=[y.poolIndex(),m.poolIndex()].sort(),x=s(b,g),w=a.get(x);null==w&&(w={eles:[]},l.push({pairId:b,edgeIsUnbundled:g}),a.set(x,w)),w.eles.push(h),g&&(w.hasUnbundled=!0),v&&(w.hasBezier=!0)}else u.push(h)}for(var E=function _loop(){var e,u=l[_],c=u.pairId,h=u.edgeIsUnbundled,d=s(c,h),p=a.get(d);if(!p.hasUnbundled){var g=p.eles[0].parallelEdges().filter(function(e){return e.isBundledBezier()});it(p.eles),g.forEach(function(e){return p.eles.push(e)}),p.eles.sort(function(e,t){return e.poolIndex()-t.poolIndex()})}var v=p.eles[0],y=v.source(),m=v.target();if(y.poolIndex()>m.poolIndex()){var b=y;y=m,m=b}var x=p.srcPos=y.position(),w=p.tgtPos=m.position(),E=p.srcW=y.outerWidth(),T=p.srcH=y.outerHeight(),L=p.tgtW=m.outerWidth(),D=p.tgtH=m.outerHeight(),S=p.srcShape=n.nodeShapes[t.getNodeShape(y)],k=p.tgtShape=n.nodeShapes[t.getNodeShape(m)],P=p.srcCornerRadius="auto"===y.pstyle("corner-radius").value?"auto":y.pstyle("corner-radius").pfValue,N=p.tgtCornerRadius="auto"===m.pstyle("corner-radius").value?"auto":m.pstyle("corner-radius").pfValue,I=p.tgtRs=m._private.rscratch,M=p.srcRs=y._private.rscratch;p.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var R=0;R<p.eles.length;R++){var O=p.eles[R],z=O[0]._private.rscratch,G=O.pstyle("curve-style").value,V="unbundled-bezier"===G||he(G,"segments")||he(G,"taxi"),q=!y.same(O.source());if(!p.calculatedIntersection&&y!==m&&(p.hasBezier||p.hasUnbundled)){p.calculatedIntersection=!0;var Y=S.intersectLine(x.x,x.y,E,T,w.x,w.y,0,P,M),X=p.srcIntn=Y,U=k.intersectLine(w.x,w.y,L,D,x.x,x.y,0,N,I),H=p.tgtIntn=U,j=p.intersectionPts={x1:Y[0],x2:U[0],y1:Y[1],y2:U[1]},W=p.posPts={x1:x.x,x2:w.x,y1:x.y,y2:w.y},K=U[1]-Y[1],Q=U[0]-Y[0],J=Math.sqrt(Q*Q+K*K);Z(J)&&J>=Su||(J=Math.sqrt(Math.max(Q*Q,Au)+Math.max(K*K,Au)));var ee=p.vector={x:Q,y:K},te=p.vectorNorm={x:ee.x/J,y:ee.y/J},ne={x:-te.y,y:te.x};p.nodesOverlap=!Z(J)||k.checkPoint(Y[0],Y[1],0,L,D,w.x,w.y,N,I)||S.checkPoint(U[0],U[1],0,E,T,x.x,x.y,P,M),p.vectorNormInverse=ne,e={nodesOverlap:p.nodesOverlap,dirCounts:p.dirCounts,calculatedIntersection:!0,hasBezier:p.hasBezier,hasUnbundled:p.hasUnbundled,eles:p.eles,srcPos:w,srcRs:I,tgtPos:x,tgtRs:M,srcW:L,srcH:D,tgtW:E,tgtH:T,srcIntn:H,tgtIntn:X,srcShape:k,tgtShape:S,posPts:{x1:W.x2,y1:W.y2,x2:W.x1,y2:W.y1},intersectionPts:{x1:j.x2,y1:j.y2,x2:j.x1,y2:j.y1},vector:{x:-ee.x,y:-ee.y},vectorNorm:{x:-te.x,y:-te.y},vectorNormInverse:{x:-ne.x,y:-ne.y}}}var re=q?e:p;z.nodesOverlap=re.nodesOverlap,z.srcIntn=re.srcIntn,z.tgtIntn=re.tgtIntn,z.isRound=G.startsWith("round"),i&&(y.isParent()||y.isChild()||m.isParent()||m.isChild())&&(y.parents().anySame(m)||m.parents().anySame(y)||y.same(m)&&y.isParent())?t.findCompoundLoopPoints(O,re,R,V):y===m?t.findLoopPoints(O,re,R,V):G.endsWith("segments")?t.findSegmentsPoints(O,re):G.endsWith("taxi")?t.findTaxiPoints(O,re):"straight"===G||!V&&p.eles.length%2==1&&R===Math.floor(p.eles.length/2)?t.findStraightEdgePoints(O):t.findBezierPoints(O,re,R,V,q),t.findEndpoints(O),t.tryToCorrectInvalidPoints(O,re),t.checkForInvalidEdgeWarning(O),t.storeAllpts(O),t.storeEdgeProjections(O),t.calculateArrowAngles(O),t.recalculateEdgeLabelProjections(O),t.calculateLabelAngles(O)}},_=0;_<l.length;_++)E();this.findHaystackPoints(u)}},ku.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if(this.recalculateRenderedStyle(e),"segments"===t.edgeType)return getPts(t.segpts)},ku.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var n=t.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return getPts(t.ctrlpts)},ku.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var Pu={manualEndptToPx:function(e,t){var n=e.position(),i=e.outerWidth(),a=e.outerHeight(),s=e._private.rscratch;if(2===t.value.length){var l=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(l[0]=l[0]*i),"%"===t.units[1]&&(l[1]=l[1]*a),l[0]+=n.x,l[1]+=n.y,l}var u=t.pfValue[0];u=-Math.PI/2+u;var c=2*Math.max(i,a),h=[n.x+Math.cos(u)*c,n.y+Math.sin(u)*c];return this.nodeShapes[this.getNodeShape(e)].intersectLine(n.x,n.y,i,a,h[0],h[1],0,"auto"===e.pstyle("corner-radius").value?"auto":e.pstyle("corner-radius").pfValue,s)},findEndpoints:function(e){var t,n,i,a,s,l,u,c,h,d=this,p=e.source()[0],g=e.target()[0],v=p.position(),y=g.position(),m=e.pstyle("target-arrow-shape").value,b=e.pstyle("source-arrow-shape").value,x=e.pstyle("target-distance-from-node").pfValue,w=e.pstyle("source-distance-from-node").pfValue,E=p._private.rscratch,_=g._private.rscratch,T=e.pstyle("curve-style").value,L=e._private.rscratch,D=L.edgeType,S=he(T,"taxi"),k="self"===D||"compound"===D,P="bezier"===D||"multibezier"===D||k,N="bezier"!==D,I="straight"===D||"segments"===D,M="segments"===D,R=P||N||I,O=k||S,z=e.pstyle("source-endpoint"),G=O?"outside-to-node":z.value,V="auto"===p.pstyle("corner-radius").value?"auto":p.pstyle("corner-radius").pfValue,q=e.pstyle("target-endpoint"),Y=O?"outside-to-node":q.value,X="auto"===g.pstyle("corner-radius").value?"auto":g.pstyle("corner-radius").pfValue;L.srcManEndpt=z,L.tgtManEndpt=q;var U=null!==(t=2===(null==q||null===(n=q.pfValue)||void 0===n?void 0:n.length)?q.pfValue:null)&&void 0!==t?t:[0,0],H=null!==(i=2===(null==z||null===(a=z.pfValue)||void 0===a?void 0:a.length)?z.pfValue:null)&&void 0!==i?i:[0,0];if(P){var j=[L.ctrlpts[0],L.ctrlpts[1]];l=N?[L.ctrlpts[L.ctrlpts.length-2],L.ctrlpts[L.ctrlpts.length-1]]:j,u=j}else if(I){var W=M?L.segpts.slice(0,2):[y.x+U[0],y.y+U[1]];l=M?L.segpts.slice(L.segpts.length-2):[v.x+H[0],v.y+H[1]],u=W}if("inside-to-node"===Y)s=[y.x,y.y];else if(q.units)s=this.manualEndptToPx(g,q);else if("outside-to-line"===Y)s=L.tgtIntn;else if("outside-to-node"===Y||"outside-to-node-or-label"===Y?c=l:"outside-to-line"!==Y&&"outside-to-line-or-label"!==Y||(c=[v.x,v.y]),s=d.nodeShapes[this.getNodeShape(g)].intersectLine(y.x,y.y,g.outerWidth(),g.outerHeight(),c[0],c[1],0,X,_),"outside-to-node-or-label"===Y||"outside-to-line-or-label"===Y){var K=g._private.rscratch,Q=K.labelWidth,J=K.labelHeight,ee=K.labelX,te=K.labelY,ne=Q/2,re=J/2,ie=g.pstyle("text-valign").value;"top"===ie?te-=re:"bottom"===ie&&(te+=re);var ae=g.pstyle("text-halign").value;"left"===ae?ee-=ne:"right"===ae&&(ee+=ne);var oe=bn(c[0],c[1],[ee-ne,te-re,ee+ne,te-re,ee+ne,te+re,ee-ne,te+re],y.x,y.y);if(oe.length>0){var se=v,le=Gt(se,Rt(s)),ue=Gt(se,Rt(oe)),ce=le;if(ue<le&&(s=oe,ce=ue),oe.length>2)Gt(se,{x:oe[2],y:oe[3]})<ce&&(s=[oe[2],oe[3]])}}var de=xn(s,l,d.arrowShapes[m].spacing(e)+x),pe=xn(s,l,d.arrowShapes[m].gap(e)+x);if(L.endX=pe[0],L.endY=pe[1],L.arrowEndX=de[0],L.arrowEndY=de[1],"inside-to-node"===G)s=[v.x,v.y];else if(z.units)s=this.manualEndptToPx(p,z);else if("outside-to-line"===G)s=L.srcIntn;else if("outside-to-node"===G||"outside-to-node-or-label"===G?h=u:"outside-to-line"!==G&&"outside-to-line-or-label"!==G||(h=[y.x,y.y]),s=d.nodeShapes[this.getNodeShape(p)].intersectLine(v.x,v.y,p.outerWidth(),p.outerHeight(),h[0],h[1],0,V,E),"outside-to-node-or-label"===G||"outside-to-line-or-label"===G){var ge=p._private.rscratch,fe=ge.labelWidth,ve=ge.labelHeight,ye=ge.labelX,me=ge.labelY,be=fe/2,xe=ve/2,we=p.pstyle("text-valign").value;"top"===we?me-=xe:"bottom"===we&&(me+=xe);var Ee=p.pstyle("text-halign").value;"left"===Ee?ye-=be:"right"===Ee&&(ye+=be);var _e=bn(h[0],h[1],[ye-be,me-xe,ye+be,me-xe,ye+be,me+xe,ye-be,me+xe],v.x,v.y);if(_e.length>0){var Ce=y,Te=Gt(Ce,Rt(s)),Le=Gt(Ce,Rt(_e)),De=Te;if(Le<Te&&(s=[_e[0],_e[1]],De=Le),_e.length>2)Gt(Ce,{x:_e[2],y:_e[3]})<De&&(s=[_e[2],_e[3]])}}var Ae=xn(s,u,d.arrowShapes[b].spacing(e)+w),Se=xn(s,u,d.arrowShapes[b].gap(e)+w);L.startX=Se[0],L.startY=Se[1],L.arrowStartX=Ae[0],L.arrowStartY=Ae[1],R&&(Z(L.startX)&&Z(L.startY)&&Z(L.endX)&&Z(L.endY)?L.badLine=!1:L.badLine=!0)},getSourceEndpoint:function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),"haystack"===t.edgeType?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},getTargetEndpoint:function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),"haystack"===t.edgeType?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}}},Nu={};function pushBezierPts(e,t,n){for(var i=function qbezierAt$1(e,t,n,i){return qt(e,t,n,i)},a=t._private.rstyle.bezierPts,s=0;s<e.bezierProjPcts.length;s++){var l=e.bezierProjPcts[s];a.push({x:i(n[0],n[2],n[4],l),y:i(n[1],n[3],n[5],l)})}}Nu.storeEdgeProjections=function(e){var t=e._private,n=t.rscratch,i=n.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===i||"bezier"===i||"self"===i||"compound"===i){t.rstyle.bezierPts=[];for(var a=0;a+5<n.allpts.length;a+=4)pushBezierPts(this,e,n.allpts.slice(a,a+6))}else if("segments"===i){var s=t.rstyle.linePts=[];for(a=0;a+1<n.allpts.length;a+=2)s.push({x:n.allpts[a],y:n.allpts[a+1]})}else if("haystack"===i){var l=n.haystackPts;t.rstyle.haystackPts=[{x:l[0],y:l[1]},{x:l[2],y:l[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},Nu.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var Iu={recalculateNodeLabelProjection:function(e){var t=e.pstyle("label").strValue;if(!ie(t)){var n,i,a=e._private,s=e.width(),l=e.height(),u=e.padding(),c=e.position(),h=e.pstyle("text-halign").strValue,d=e.pstyle("text-valign").strValue,p=a.rscratch,g=a.rstyle;switch(h){case"left":n=c.x-s/2-u;break;case"right":n=c.x+s/2+u;break;default:n=c.x}switch(d){case"top":i=c.y-l/2-u;break;case"bottom":i=c.y+l/2+u;break;default:i=c.y}p.labelX=n,p.labelY=i,g.labelX=n,g.labelY=i,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}}},Mu=function lineAngleFromDelta(e,t){var n=Math.atan(t/e);return 0===e&&n<0&&(n*=-1),n},Ru=function lineAngle(e,t){var n=t.x-e.x,i=t.y-e.y;return Mu(n,i)};Iu.recalculateEdgeLabelProjections=function(e){var t,n=e._private,i=n.rscratch,a=this,s={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(s.mid||s.source||s.target){t={x:i.midX,y:i.midY};var l=function setRs(e,t,i){ot(n.rscratch,e,t,i),ot(n.rstyle,e,t,i)};l("labelX",null,t.x),l("labelY",null,t.y);var u=Mu(i.midDispX,i.midDispY);l("labelAutoAngle",null,u);var c=function createControlPointInfo(){if(c.cache)return c.cache;for(var e=[],t=0;t+5<i.allpts.length;t+=4){var s={x:i.allpts[t],y:i.allpts[t+1]},l={x:i.allpts[t+2],y:i.allpts[t+3]},u={x:i.allpts[t+4],y:i.allpts[t+5]};e.push({p0:s,p1:l,p2:u,startDist:0,length:0,segments:[]})}var h=n.rstyle.bezierPts,d=a.bezierProjPcts.length;function addSegment(e,t,n,i,a){var s=zt(t,n),l=e.segments[e.segments.length-1],u={p0:t,p1:n,t0:i,t1:a,startDist:l?l.startDist+l.length:0,length:s};e.segments.push(u),e.length+=s}for(var p=0;p<e.length;p++){var g=e[p],v=e[p-1];v&&(g.startDist=v.startDist+v.length),addSegment(g,g.p0,h[p*d],0,a.bezierProjPcts[0]);for(var y=0;y<d-1;y++)addSegment(g,h[p*d+y],h[p*d+y+1],a.bezierProjPcts[y],a.bezierProjPcts[y+1]);addSegment(g,h[p*d+d-1],g.p2,a.bezierProjPcts[d-1],1)}return c.cache=e},h=function calculateEndProjection(n){var a,u="source"===n;if(s[n]){var h=e.pstyle(n+"-text-offset").pfValue;switch(i.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var d,p=c(),g=0,v=0,y=0;y<p.length;y++){for(var m=p[u?y:p.length-1-y],b=0;b<m.segments.length;b++){var x=m.segments[u?b:m.segments.length-1-b],w=y===p.length-1&&b===m.segments.length-1;if(g=v,(v+=x.length)>=h||w){d={cp:m,segment:x};break}}if(d)break}var E=d.cp,_=d.segment,T=(h-g)/_.length,L=_.t1-_.t0,D=u?_.t0+L*T:_.t1-L*T;D=Xt(0,D,1),t=Yt(E.p0,E.p1,E.p2,D),a=function bezierAngle(e,t,n,i){var a=Xt(0,i-.001,1),s=Xt(0,i+.001,1),l=Yt(e,t,n,a),u=Yt(e,t,n,s);return Ru(l,u)}(E.p0,E.p1,E.p2,D);break;case"straight":case"segments":case"haystack":for(var S,k,P,N,I=0,M=i.allpts.length,R=0;R+3<M&&(u?(P={x:i.allpts[R],y:i.allpts[R+1]},N={x:i.allpts[R+2],y:i.allpts[R+3]}):(P={x:i.allpts[M-2-R],y:i.allpts[M-1-R]},N={x:i.allpts[M-4-R],y:i.allpts[M-3-R]}),k=I,!((I+=S=zt(P,N))>=h));R+=2);var O=(h-k)/S;O=Xt(0,O,1),t=function lineAt(e,t,n,i){var a=t.x-e.x,s=t.y-e.y,l=zt(e,t),u=a/l,c=s/l;return n=null==n?0:n,i=null!=i?i:n*l,{x:e.x+u*i,y:e.y+c*i}}(P,N,O),a=Ru(P,N)}l("labelX",n,t.x),l("labelY",n,t.y),l("labelAutoAngle",n,a)}};h("source"),h("target"),this.applyLabelDimensions(e)}},Iu.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},Iu.applyPrefixedLabelDimensions=function(e,t){var n=e._private,i=this.getLabelText(e,t),a=Fe(i,e._private.labelDimsKey);if(at(n.rscratch,"prefixedLabelDimsKey",t)!==a){ot(n.rscratch,"prefixedLabelDimsKey",t,a);var s=this.calculateLabelDimensions(e,i),l=e.pstyle("line-height").pfValue,u=e.pstyle("text-wrap").strValue,c=at(n.rscratch,"labelWrapCachedLines",t)||[],h="wrap"!==u?1:Math.max(c.length,1),d=s.height/h,p=d*l,g=s.width,v=s.height+(h-1)*(l-1)*d;ot(n.rstyle,"labelWidth",t,g),ot(n.rscratch,"labelWidth",t,g),ot(n.rstyle,"labelHeight",t,v),ot(n.rscratch,"labelHeight",t,v),ot(n.rscratch,"labelLineHeight",t,p)}},Iu.getLabelText=function(e,t){var n=e._private,i=t?t+"-":"",a=e.pstyle(i+"label").strValue,s=e.pstyle("text-transform").value,l=function rscratch(e,i){return i?(ot(n.rscratch,e,t,i),i):at(n.rscratch,e,t)};if(!a)return"";"none"==s||("uppercase"==s?a=a.toUpperCase():"lowercase"==s&&(a=a.toLowerCase()));var u=e.pstyle("text-wrap").value;if("wrap"===u){var c=l("labelKey");if(null!=c&&l("labelWrapKey")===c)return l("labelWrapCachedText");for(var h=a.split("\n"),d=e.pstyle("text-max-width").pfValue,p="anywhere"===e.pstyle("text-overflow-wrap").value,g=[],v=/[\s\u200b]+|$/g,y=0;y<h.length;y++){var m=h[y],b=this.calculateLabelDimensions(e,m).width;if(p){var x=m.split("").join("​");m=x}if(b>d){var w,E="",_=0,T=_createForOfIteratorHelper(m.matchAll(v));try{for(T.s();!(w=T.n()).done;){var L=w.value,D=L[0],S=m.substring(_,L.index);_=L.index+D.length;var k=0===E.length?S:E+S+D;this.calculateLabelDimensions(e,k).width<=d?E+=S+D:(E&&g.push(E),E=S+D)}}catch(e){T.e(e)}finally{T.f()}E.match(/^[\s\u200b]+$/)||g.push(E)}else g.push(m)}l("labelWrapCachedLines",g),a=l("labelWrapCachedText",g.join("\n")),l("labelWrapKey",c)}else if("ellipsis"===u){var P=e.pstyle("text-max-width").pfValue,N="",I=!1;if(this.calculateLabelDimensions(e,a).width<P)return a;for(var M=0;M<a.length;M++){if(this.calculateLabelDimensions(e,N+a[M]+"…").width>P)break;N+=a[M],M===a.length-1&&(I=!0)}return I||(N+="…"),N}return a},Iu.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,n=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},Iu.calculateLabelDimensions=function(e,t){var n=this.cy.window().document,i=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue,s=e.pstyle("font-family").strValue,l=e.pstyle("font-weight").strValue,u=this.labelCalcCanvas,c=this.labelCalcCanvasContext;if(!u){u=this.labelCalcCanvas=n.createElement("canvas"),c=this.labelCalcCanvasContext=u.getContext("2d");var h=u.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}c.font="".concat(i," ").concat(l," ").concat(a,"px ").concat(s);for(var d=0,p=0,g=t.split("\n"),v=0;v<g.length;v++){var y=g[v],m=c.measureText(y),b=Math.ceil(m.width),x=a;d=Math.max(b,d),p+=x}return{width:d+=0,height:p+=0}},Iu.calculateLabelAngle=function(e,t){var n=e._private.rscratch,i=e.isEdge(),a=t?t+"-":"",s=e.pstyle(a+"text-rotation"),l=s.strValue;return"none"===l?0:i&&"autorotate"===l?n.labelAutoAngle:"autorotate"===l?0:s.pfValue},Iu.calculateLabelAngles=function(e){var t=this,n=e.isEdge(),i=e._private.rscratch;i.labelAngle=t.calculateLabelAngle(e),n&&(i.sourceLabelAngle=t.calculateLabelAngle(e,"source"),i.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var Bu={},Ou=!1;Bu.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(e.width()<28||e.height()<28))return Ou||(Ze("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Ou=!0),"rectangle";if(e.isParent())return"rectangle"===t||"roundrectangle"===t||"round-rectangle"===t||"cutrectangle"===t||"cut-rectangle"===t||"barrel"===t?t:"rectangle";if("polygon"===t){var n=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return t};var Fu={registerCalculationListeners:function(){var e=this.cy,t=e.collection(),n=this,i=function enqueue(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.merge(e),n)for(var i=0;i<e.length;i++){var a=e[i]._private.rstyle;a.clean=!1,a.cleanConnected=!1}};n.binder(e).on("bounds.* dirty.*",function onDirtyBounds(e){var t=e.target;i(t)}).on("style.* background.*",function onDirtyStyle(e){var t=e.target;i(t,!1)});var a=function updateEleCalcs(a){if(a){var s=n.onUpdateEleCalcsFns;t.cleanStyle();for(var l=0;l<t.length;l++){var u=t[l],c=u._private.rstyle;u.isNode()&&!c.cleanConnected&&(i(u.connectedEdges()),c.cleanConnected=!0)}if(s)for(var h=0;h<s.length;h++){(0,s[h])(a,t)}n.recalculateRenderedStyle(t),t=e.collection()}};n.flushRenderedStyleQueue=function(){a(!0)},n.beforeRender(a,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},recalculateRenderedStyle:function(e,t){var n=function isCleanConnected(e){return e._private.rstyle.cleanConnected};if(0!==e.length){var i=[],a=[];if(!this.destroyed){void 0===t&&(t=!0);for(var s=0;s<e.length;s++){var l=e[s],u=l._private,c=u.rstyle;!l.isEdge()||n(l.source())&&n(l.target())||(c.clean=!1),l.isEdge()&&l.isBundledBezier()&&l.parallelEdges().some(function(e){return!e._private.rstyle.clean&&e.isBundledBezier()})&&(c.clean=!1),t&&c.clean||l.removed()||"none"!==l.pstyle("display").value&&("nodes"===u.group?a.push(l):i.push(l),c.clean=!0)}for(var h=0;h<a.length;h++){var d=a[h],p=d._private.rstyle,g=d.position();this.recalculateNodeLabelProjection(d),p.nodeX=g.x,p.nodeY=g.y,p.nodeW=d.pstyle("width").pfValue,p.nodeH=d.pstyle("height").pfValue}this.recalculateEdgeProjections(i);for(var v=0;v<i.length;v++){var y=i[v]._private,m=y.rstyle,b=y.rscratch;m.srcX=b.arrowStartX,m.srcY=b.arrowStartY,m.tgtX=b.arrowEndX,m.tgtY=b.arrowEndY,m.midX=b.midX,m.midY=b.midY,m.labelAngle=b.labelAngle,m.sourceLabelAngle=b.sourceLabelAngle,m.targetLabelAngle=b.targetLabelAngle}}}}},zu={updateCachedGrabbedEles:function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],n=0;n<e.length;n++){var i=(a=e[n])._private.rscratch;a.grabbed()&&!a.isParent()?t.push(a):i.inDragLayer?e.drag.push(a):e.nondrag.push(a)}for(n=0;n<t.length;n++){var a=t[n];e.drag.push(a)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(Ps),t.interactive=t.filter(function(e){return e.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t}},Gu={};[au,ou,ku,Pu,Nu,Iu,Bu,Fu,zu].forEach(function(e){me(Gu,e)});var Vu={getCachedImage:function(e,t,n){var i=this.imageCache=this.imageCache||{},a=i[e];if(a)return a.image.complete||a.image.addEventListener("load",n),a.image;var s=(a=i[e]=i[e]||{}).image=new Image;s.addEventListener("load",n),s.addEventListener("error",function(){s.error=!0});var l="data:";return e.substring(0,5).toLowerCase()===l||(t="null"===t?null:t,s.crossOrigin=t),s.src=e,s}},qu={registerBinding:function(e,t,n,i){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var s=[],l=0;l<e.length;l++){var u=e[l];if(void 0!==u){var c=this.binder(u);s.push(c.on.apply(c,a))}}return s}return(c=this.binder(e)).on.apply(c,a)}};qu.binder=function(e){var t=this,n=t.cy.window(),i=e===n||e===n.document||e===n.document.body||function domElement(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}(e);if(null==t.supportsPassiveEvents){var a=!1;try{var s=Object.defineProperty({},"passive",{get:function get(){return a=!0,!0}});n.addEventListener("test",null,s)}catch(e){}t.supportsPassiveEvents=a}var l=function on(n,a,s){var l=Array.prototype.slice.call(arguments);return i&&t.supportsPassiveEvents&&(l[2]={capture:null!=s&&s,passive:!1,once:!1}),t.bindings.push({target:e,args:l}),(e.addEventListener||e.on).apply(e,l),this};return{on:l,addEventListener:l,addListener:l,bind:l}},qu.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},qu.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},qu.load=function(){var e=this,t=e.cy.window(),n=function isSelected(e){return e.selected()},i=function triggerEvents(t,n,i,a){null==t&&(t=e.cy);for(var s=0;s<n.length;s++){var l=n[s];t.emit({originalEvent:i,type:l,position:a})}},a=function isMultSelKeyDown(e){return e.shiftKey||e.metaKey||e.ctrlKey},s=function allowPanningPassthrough(t,n){var i=!0;if(e.cy.hasCompoundNodes()&&t&&t.pannable())for(var a=0;n&&a<n.length;a++){if((t=n[a]).isNode()&&t.isParent()&&!t.pannable()){i=!1;break}}else i=!0;return i},l=function setInDragLayer(e){e[0]._private.rscratch.inDragLayer=!0},u=function setGrabTarget(e){e[0]._private.rscratch.isGrabTarget=!0},c=function addToDragList(e,t){var n=t.addToList;n.has(e)||!e.grabbable()||e.locked()||(n.merge(e),function setGrabbed(e){e[0]._private.grabbed=!0}(e))},h=function addNodesToDrag(t,n){n=n||{};var i=t.cy().hasCompoundNodes();n.inDragLayer&&(t.forEach(l),t.neighborhood().stdFilter(function(e){return!i||e.isEdge()}).forEach(l)),n.addToList&&t.forEach(function(e){c(e,n)}),function addDescendantsToDrag(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var n=e.descendants();t.inDragLayer&&(n.forEach(l),n.connectedEdges().forEach(l)),t.addToList&&c(n,t)}}(t,n),g(t,{inDragLayer:n.inDragLayer}),e.updateCachedGrabbedEles()},d=h,p=function freeDraggedElements(t){t&&(e.getCachedZSortedEles().forEach(function(e){!function setFreed(e){e[0]._private.grabbed=!1}(e),function setOutDragLayer(e){e[0]._private.rscratch.inDragLayer=!1}(e),function removeGrabTarget(e){e[0]._private.rscratch.isGrabTarget=!1}(e)}),e.updateCachedGrabbedEles())},g=function updateAncestorsInDragLayer(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var n=e.ancestors().orphans();if(!n.same(e)){var i=n.descendants().spawnSelf().merge(n).unmerge(e).unmerge(e.descendants()),a=i.connectedEdges();t.inDragLayer&&(a.forEach(l),i.forEach(l)),t.addToList&&i.forEach(function(e){c(e,t)})}}},v=function blurActiveDomElement(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},y="undefined"!=typeof MutationObserver,m="undefined"!=typeof ResizeObserver;y?(e.removeObserver=new MutationObserver(function(t){for(var n=0;n<t.length;n++){var i=t[n].removedNodes;if(i)for(var a=0;a<i.length;a++){if(i[a]===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(t){e.destroy()});var b=Ce(function(){e.cy.resize()},100);y&&(e.styleObserver=new MutationObserver(b),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",b),m&&(e.resizeObserver=new ResizeObserver(b),e.resizeObserver.observe(e.container));var x=function invalidateCoords(){e.invalidateContainerClientCoordsCache()};!function forEachUp(e,t){for(;null!=e;)t(e),e=e.parentNode}(e.container,function(t){e.registerBinding(t,"transitionend",x),e.registerBinding(t,"animationend",x),e.registerBinding(t,"scroll",x)}),e.registerBinding(e.container,"contextmenu",function(e){e.preventDefault()});var w=function eventInContainer(t){for(var n=e.findContainerClientCoords(),i=n[0],a=n[1],s=n[2],l=n[3],u=t.touches?t.touches:[t],c=!1,h=0;h<u.length;h++){var d=u[h];if(i<=d.clientX&&d.clientX<=i+s&&a<=d.clientY&&d.clientY<=a+l){c=!0;break}}if(!c)return!1;for(var p=e.container,g=t.target.parentNode,v=!1;g;){if(g===p){v=!0;break}g=g.parentNode}return!!v};e.registerBinding(e.container,"mousedown",function mousedownHandler(t){if(w(t)&&(1!==e.hoverData.which||1===t.which)){t.preventDefault(),v(),e.hoverData.capture=!0,e.hoverData.which=t.which;var n=e.cy,a=[t.clientX,t.clientY],s=e.projectIntoViewport(a[0],a[1]),l=e.selection,c=e.findNearestElements(s[0],s[1],!0,!1),p=c[0],g=e.dragData.possibleDragElements;e.hoverData.mdownPos=s,e.hoverData.mdownGPos=a;var y=function makeEvent(e){return{originalEvent:t,type:e,position:{x:s[0],y:s[1]}}};if(3==t.which){e.hoverData.cxtStarted=!0;var m={originalEvent:t,type:"cxttapstart",position:{x:s[0],y:s[1]}};p?(p.activate(),p.emit(m),e.hoverData.down=p):n.emit(m),e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1}else if(1==t.which){if(p&&p.activate(),null!=p&&e.nodeIsGrabbable(p)){if(u(p),p.selected()){g=e.dragData.possibleDragElements=n.collection();var b=n.$(function(t){return t.isNode()&&t.selected()&&e.nodeIsGrabbable(t)});h(b,{addToList:g}),p.emit(y("grabon")),b.forEach(function triggerGrab(e){e.emit(y("grab"))})}else g=e.dragData.possibleDragElements=n.collection(),d(p,{addToList:g}),p.emit(y("grabon")).emit(y("grab"));e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=p,e.hoverData.downs=c,e.hoverData.downTime=(new Date).getTime(),i(p,["mousedown","tapstart","vmousedown"],t,{x:s[0],y:s[1]}),null==p?(l[4]=1,e.data.bgActivePosistion={x:s[0],y:s[1]},e.redrawHint("select",!0),e.redraw()):p.pannable()&&(l[4]=1),function checkForTaphold(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var t=e.hoverData.down;t?t.emit(y("taphold")):n.emit(y("taphold"))}},e.tapholdDuration)}()}l[0]=l[2]=s[0],l[1]=l[3]=s[1]}},!1);var E,_,T,L=function getShadowRoot(e){var t=e.getRootNode();if(t&&11===t.nodeType&&void 0!==t.host)return t}(e.container);e.registerBinding([t,L],"mousemove",function mousemoveHandler(t){if(e.hoverData.capture||w(t)){var n=!1,l=e.cy,u=l.zoom(),c=[t.clientX,t.clientY],d=e.projectIntoViewport(c[0],c[1]),g=e.hoverData.mdownPos,v=e.hoverData.mdownGPos,y=e.selection,m=null;e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.selecting||(m=e.findNearestElement(d[0],d[1],!0,!1));var b,x=e.hoverData.last,E=e.hoverData.down,_=[d[0]-y[2],d[1]-y[3]],T=e.dragData.possibleDragElements;if(v){var L=c[0]-v[0],D=L*L,S=c[1]-v[1],k=D+S*S;e.hoverData.isOverThresholdDrag=b=k>=e.desktopTapThreshold2}var P=a(t);b&&(e.hoverData.tapholdCancelled=!0);n=!0,i(m,["mousemove","vmousemove","tapdrag"],t,{x:d[0],y:d[1]});var N=function makeEvent(e){return{originalEvent:t,type:e,position:{x:d[0],y:d[1]}}},I=function goIntoBoxMode(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||l.emit(N("boxstart")),y[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(3===e.hoverData.which){if(b){var M=N("cxtdrag");E?E.emit(M):l.emit(M),e.hoverData.cxtDragged=!0,e.hoverData.cxtOver&&m===e.hoverData.cxtOver||(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit(N("cxtdragout")),e.hoverData.cxtOver=m,m&&m.emit(N("cxtdragover")))}}else if(e.hoverData.dragging){if(n=!0,l.panningEnabled()&&l.userPanningEnabled()){var R;if(e.hoverData.justStartedPan){var O=e.hoverData.mdownPos;R={x:(d[0]-O[0])*u,y:(d[1]-O[1])*u},e.hoverData.justStartedPan=!1}else R={x:_[0]*u,y:_[1]*u};l.panBy(R),l.emit(N("dragpan")),e.hoverData.dragged=!0}d=e.projectIntoViewport(t.clientX,t.clientY)}else if(1!=y[4]||null!=E&&!E.pannable()){if(E&&E.pannable()&&E.active()&&E.unactivate(),E&&E.grabbed()||m==x||(x&&i(x,["mouseout","tapdragout"],t,{x:d[0],y:d[1]}),m&&i(m,["mouseover","tapdragover"],t,{x:d[0],y:d[1]}),e.hoverData.last=m),E)if(b){if(l.boxSelectionEnabled()&&P)E&&E.grabbed()&&(p(T),E.emit(N("freeon")),T.emit(N("free")),e.dragData.didDrag&&(E.emit(N("dragfreeon")),T.emit(N("dragfree")))),I();else if(E&&E.grabbed()&&e.nodeIsDraggable(E)){var z=!e.dragData.didDrag;z&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||h(T,{inDragLayer:!0});var G={x:0,y:0};if(Z(_[0])&&Z(_[1])&&(G.x+=_[0],G.y+=_[1],z)){var V=e.hoverData.dragDelta;V&&Z(V[0])&&Z(V[1])&&(G.x+=V[0],G.y+=V[1])}e.hoverData.draggingEles=!0,T.silentShift(G).emit(N("position")).emit(N("drag")),e.redrawHint("drag",!0),e.redraw()}}else!function updateDragDelta(){var t=e.hoverData.dragDelta=e.hoverData.dragDelta||[];0===t.length?(t.push(_[0]),t.push(_[1])):(t[0]+=_[0],t[1]+=_[1])}();n=!0}else if(b){if(e.hoverData.dragging||!l.boxSelectionEnabled()||!P&&l.panningEnabled()&&l.userPanningEnabled()){if(!e.hoverData.selecting&&l.panningEnabled()&&l.userPanningEnabled()){s(E,e.hoverData.downs)&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,y[4]=0,e.data.bgActivePosistion=Rt(g),e.redrawHint("select",!0),e.redraw())}}else I();E&&E.pannable()&&E.active()&&E.unactivate()}return y[2]=d[0],y[3]=d[1],n?(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1):void 0}},!1),e.registerBinding(t,"mouseup",function mouseupHandler(t){if((1!==e.hoverData.which||1===t.which||!e.hoverData.capture)&&e.hoverData.capture){e.hoverData.capture=!1;var s=e.cy,l=e.projectIntoViewport(t.clientX,t.clientY),u=e.selection,c=e.findNearestElement(l[0],l[1],!0,!1),h=e.dragData.possibleDragElements,d=e.hoverData.down,g=a(t);e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,d&&d.unactivate();var v=function makeEvent(e){return{originalEvent:t,type:e,position:{x:l[0],y:l[1]}}};if(3===e.hoverData.which){var y=v("cxttapend");if(d?d.emit(y):s.emit(y),!e.hoverData.cxtDragged){var m=v("cxttap");d?d.emit(m):s.emit(m)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(1===e.hoverData.which){if(i(c,["mouseup","tapend","vmouseup"],t,{x:l[0],y:l[1]}),e.dragData.didDrag||e.hoverData.dragged||e.hoverData.selecting||e.hoverData.isOverThresholdDrag||(i(d,["click","tap","vclick"],t,{x:l[0],y:l[1]}),_=!1,t.timeStamp-T<=s.multiClickDebounceTime()?(E&&clearTimeout(E),_=!0,T=null,i(d,["dblclick","dbltap","vdblclick"],t,{x:l[0],y:l[1]})):(E=setTimeout(function(){_||i(d,["oneclick","onetap","voneclick"],t,{x:l[0],y:l[1]})},s.multiClickDebounceTime()),T=t.timeStamp)),null!=d||e.dragData.didDrag||e.hoverData.selecting||e.hoverData.dragged||a(t)||(s.$(n).unselect(["tapunselect"]),h.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=h=s.collection()),c!=d||e.dragData.didDrag||e.hoverData.selecting||null!=c&&c._private.selectable&&(e.hoverData.dragging||("additive"===s.selectionType()||g?c.selected()?c.unselect(["tapunselect"]):c.select(["tapselect"]):g||(s.$(n).unmerge(c).unselect(["tapunselect"]),c.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var b=s.collection(e.getAllInBox(u[0],u[1],u[2],u[3]));e.redrawHint("select",!0),b.length>0&&e.redrawHint("eles",!0),s.emit(v("boxend"));var x=function eleWouldBeSelected(e){return e.selectable()&&!e.selected()};"additive"===s.selectionType()||g||s.$(n).unmerge(b).unselect(),b.emit(v("box")).stdFilter(x).select().emit(v("boxselect")),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!u[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var w=d&&d.grabbed();p(h),w&&(d.emit(v("freeon")),h.emit(v("free")),e.dragData.didDrag&&(d.emit(v("dragfreeon")),h.emit(v("dragfree"))))}}u[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}},!1);var D,S,k,P,N,I,M,R,O,z,G,V,q,Y,X=[],U=1e5,H=function wheelHandler(t){var n=!1,i=t.deltaY;if(null==i&&(null!=t.wheelDeltaY?i=t.wheelDeltaY/4:null!=t.wheelDelta&&(i=t.wheelDelta/4)),0!==i){if(null==D)if(X.length>=4){var a=X;if(D=function allAreDivisibleBy(e,t){for(var n=0;n<e.length;n++)if(e[n]%t!==0)return!1;return!0}(a,5),!D){var s=Math.abs(a[0]);D=function allAreSameMagnitude(e){for(var t=Math.abs(e[0]),n=1;n<e.length;n++)if(Math.abs(e[n])!==t)return!1;return!0}(a)&&s>5}if(D)for(var l=0;l<a.length;l++)U=Math.min(Math.abs(a[l]),U)}else X.push(i),n=!0;else D&&(U=Math.min(Math.abs(i),U));if(!e.scrollingPage){var u=e.cy,c=u.zoom(),h=u.pan(),d=e.projectIntoViewport(t.clientX,t.clientY),p=[d[0]*c+h.x,d[1]*c+h.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||function inBoxSelection(){return 0!==e.selection[4]}())t.preventDefault();else if(u.panningEnabled()&&u.userPanningEnabled()&&u.zoomingEnabled()&&u.userZoomingEnabled()){var g;t.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150),n&&Math.abs(i)>5&&(i=5*Ft(i)),g=i/-250,D&&(g/=U,g*=3),g*=e.wheelSensitivity,1===t.deltaMode&&(g*=33);var v=u.zoom()*Math.pow(10,g);"gesturechange"===t.type&&(v=e.gestureStartZoom*t.scale),u.zoom({level:v,renderedPosition:{x:p[0],y:p[1]}}),u.emit({type:"gesturechange"===t.type?"pinchzoom":"scrollzoom",originalEvent:t,position:{x:d[0],y:d[1]}})}}}};e.registerBinding(e.container,"wheel",H,!0),e.registerBinding(t,"scroll",function scrollHandler(t){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function gestureStartHandler(t){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||t.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(t){e.hasTouchStarted||H(t)},!0),e.registerBinding(e.container,"mouseout",function mouseOutHandler(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseout",position:{x:n[0],y:n[1]}})},!1),e.registerBinding(e.container,"mouseover",function mouseOverHandler(t){var n=e.projectIntoViewport(t.clientX,t.clientY);e.cy.emit({originalEvent:t,type:"mouseover",position:{x:n[0],y:n[1]}})},!1);var j,W,K,Q,J,ee,te,ne=function distance(e,t,n,i){return Math.sqrt((n-e)*(n-e)+(i-t)*(i-t))},re=function distanceSq(e,t,n,i){return(n-e)*(n-e)+(i-t)*(i-t)};if(e.registerBinding(e.container,"touchstart",j=function touchstartHandler(t){if(e.hasTouchStarted=!0,w(t)){v(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var n=e.cy,a=e.touchData.now,s=e.touchData.earlier;if(t.touches[0]){var l=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);a[0]=l[0],a[1]=l[1]}if(t.touches[1]){l=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);a[2]=l[0],a[3]=l[1]}if(t.touches[2]){l=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);a[4]=l[0],a[5]=l[1]}var c=function makeEvent(e){return{originalEvent:t,type:e,position:{x:a[0],y:a[1]}}};if(t.touches[1]){e.touchData.singleTouchMoved=!0,p(e.dragData.touchDragEles);var g=e.findContainerClientCoords();z=g[0],G=g[1],V=g[2],q=g[3],S=t.touches[0].clientX-z,k=t.touches[0].clientY-G,P=t.touches[1].clientX-z,N=t.touches[1].clientY-G,Y=0<=S&&S<=V&&0<=P&&P<=V&&0<=k&&k<=q&&0<=N&&N<=q;var y=n.pan(),m=n.zoom();I=ne(S,k,P,N),M=re(S,k,P,N),O=[((R=[(S+P)/2,(k+N)/2])[0]-y.x)/m,(R[1]-y.y)/m];if(M<4e4&&!t.touches[2]){var b=e.findNearestElement(a[0],a[1],!0,!0),x=e.findNearestElement(a[2],a[3],!0,!0);return b&&b.isNode()?(b.activate().emit(c("cxttapstart")),e.touchData.start=b):x&&x.isNode()?(x.activate().emit(c("cxttapstart")),e.touchData.start=x):n.emit(c("cxttapstart")),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(t.touches[2])n.boxSelectionEnabled()&&t.preventDefault();else if(t.touches[1]);else if(t.touches[0]){var E=e.findNearestElements(a[0],a[1],!0,!0),_=E[0];if(null!=_&&(_.activate(),e.touchData.start=_,e.touchData.starts=E,e.nodeIsGrabbable(_))){var T=e.dragData.touchDragEles=n.collection(),L=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),_.selected()?(L=n.$(function(t){return t.selected()&&e.nodeIsGrabbable(t)}),h(L,{addToList:T})):d(_,{addToList:T}),u(_),_.emit(c("grabon")),L?L.forEach(function(e){e.emit(c("grab"))}):_.emit(c("grab"))}i(_,["touchstart","tapstart","vmousedown"],t,{x:a[0],y:a[1]}),null==_&&(e.data.bgActivePosistion={x:l[0],y:l[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){!1!==e.touchData.singleTouchMoved||e.pinching||e.touchData.selecting||i(e.touchData.start,["taphold"],t,{x:a[0],y:a[1]})},e.tapholdDuration)}if(t.touches.length>=1){for(var D=e.touchData.startPosition=[null,null,null,null,null,null],X=0;X<a.length;X++)D[X]=s[X]=a[X];var U=t.touches[0];e.touchData.startGPosition=[U.clientX,U.clientY]}}},!1),e.registerBinding(t,"touchmove",W=function touchmoveHandler(t){var n=e.touchData.capture;if(n||w(t)){var a=e.selection,l=e.cy,u=e.touchData.now,c=e.touchData.earlier,d=l.zoom();if(t.touches[0]){var g=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);u[0]=g[0],u[1]=g[1]}if(t.touches[1]){g=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);u[2]=g[0],u[3]=g[1]}if(t.touches[2]){g=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);u[4]=g[0],u[5]=g[1]}var v,y=function makeEvent(e){return{originalEvent:t,type:e,position:{x:u[0],y:u[1]}}},m=e.touchData.startGPosition;if(n&&t.touches[0]&&m){for(var b=[],x=0;x<u.length;x++)b[x]=u[x]-c[x];var E=t.touches[0].clientX-m[0],_=E*E,T=t.touches[0].clientY-m[1];v=_+T*T>=e.touchTapThreshold2}if(n&&e.touchData.cxt){t.preventDefault();var L=t.touches[0].clientX-z,D=t.touches[0].clientY-G,R=t.touches[1].clientX-z,V=t.touches[1].clientY-G,q=re(L,D,R,V);if(q/M>=2.25||q>=22500){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var X=y("cxttapend");e.touchData.start?(e.touchData.start.unactivate().emit(X),e.touchData.start=null):l.emit(X)}}if(n&&e.touchData.cxt){X=y("cxtdrag");e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(X):l.emit(X),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var U=e.findNearestElement(u[0],u[1],!0,!0);e.touchData.cxtOver&&U===e.touchData.cxtOver||(e.touchData.cxtOver&&e.touchData.cxtOver.emit(y("cxtdragout")),e.touchData.cxtOver=U,U&&U.emit(y("cxtdragover")))}else if(n&&t.touches[2]&&l.boxSelectionEnabled())t.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||l.emit(y("boxstart")),e.touchData.selecting=!0,e.touchData.didSelect=!0,a[4]=1,a&&0!==a.length&&void 0!==a[0]?(a[2]=(u[0]+u[2]+u[4])/3,a[3]=(u[1]+u[3]+u[5])/3):(a[0]=(u[0]+u[2]+u[4])/3,a[1]=(u[1]+u[3]+u[5])/3,a[2]=(u[0]+u[2]+u[4])/3+1,a[3]=(u[1]+u[3]+u[5])/3+1),e.redrawHint("select",!0),e.redraw();else if(n&&t.touches[1]&&!e.touchData.didSelect&&l.zoomingEnabled()&&l.panningEnabled()&&l.userZoomingEnabled()&&l.userPanningEnabled()){if(t.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),ue=e.dragData.touchDragEles){e.redrawHint("drag",!0);for(var H=0;H<ue.length;H++){var j=ue[H]._private;j.grabbed=!1,j.rscratch.inDragLayer=!1}}var W=e.touchData.start,K=(L=t.touches[0].clientX-z,D=t.touches[0].clientY-G,R=t.touches[1].clientX-z,V=t.touches[1].clientY-G,ne(L,D,R,V)),Q=K/I;if(Y){var J=(L-S+(R-P))/2,ee=(D-k+(V-N))/2,te=l.zoom(),ie=te*Q,ae=l.pan(),oe=O[0]*te+ae.x,se=O[1]*te+ae.y,le={x:-ie/te*(oe-ae.x-J)+oe,y:-ie/te*(se-ae.y-ee)+se};if(W&&W.active()){var ue=e.dragData.touchDragEles;p(ue),e.redrawHint("drag",!0),e.redrawHint("eles",!0),W.unactivate().emit(y("freeon")),ue.emit(y("free")),e.dragData.didDrag&&(W.emit(y("dragfreeon")),ue.emit(y("dragfree")))}l.viewport({zoom:ie,pan:le,cancelOnFailedZoom:!0}),l.emit(y("pinchzoom")),I=K,S=L,k=D,P=R,N=V,e.pinching=!0}if(t.touches[0]){g=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);u[0]=g[0],u[1]=g[1]}if(t.touches[1]){g=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);u[2]=g[0],u[3]=g[1]}if(t.touches[2]){g=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);u[4]=g[0],u[5]=g[1]}}else if(t.touches[0]&&!e.touchData.didSelect){var ce=e.touchData.start,he=e.touchData.last;if(e.hoverData.draggingEles||e.swipePanning||(U=e.findNearestElement(u[0],u[1],!0,!0)),n&&null!=ce&&t.preventDefault(),n&&null!=ce&&e.nodeIsDraggable(ce))if(v){ue=e.dragData.touchDragEles;var de=!e.dragData.didDrag;de&&h(ue,{inDragLayer:!0}),e.dragData.didDrag=!0;var pe={x:0,y:0};if(Z(b[0])&&Z(b[1]))if(pe.x+=b[0],pe.y+=b[1],de)e.redrawHint("eles",!0),(ge=e.touchData.dragDelta)&&Z(ge[0])&&Z(ge[1])&&(pe.x+=ge[0],pe.y+=ge[1]);e.hoverData.draggingEles=!0,ue.silentShift(pe).emit(y("position")).emit(y("drag")),e.redrawHint("drag",!0),e.touchData.startPosition[0]==c[0]&&e.touchData.startPosition[1]==c[1]&&e.redrawHint("eles",!0),e.redraw()}else{var ge;0===(ge=e.touchData.dragDelta=e.touchData.dragDelta||[]).length?(ge.push(b[0]),ge.push(b[1])):(ge[0]+=b[0],ge[1]+=b[1])}if(i(ce||U,["touchmove","tapdrag","vmousemove"],t,{x:u[0],y:u[1]}),ce&&ce.grabbed()||U==he||(he&&he.emit(y("tapdragout")),U&&U.emit(y("tapdragover"))),e.touchData.last=U,n)for(H=0;H<u.length;H++)u[H]&&e.touchData.startPosition[H]&&v&&(e.touchData.singleTouchMoved=!0);if(n&&(null==ce||ce.pannable())&&l.panningEnabled()&&l.userPanningEnabled()){s(ce,e.touchData.starts)&&(t.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=Rt(e.touchData.startPosition)),e.swipePanning?(l.panBy({x:b[0]*d,y:b[1]*d}),l.emit(y("dragpan"))):v&&(e.swipePanning=!0,l.panBy({x:E*d,y:T*d}),l.emit(y("dragpan")),ce&&(ce.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));g=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);u[0]=g[0],u[1]=g[1]}}for(x=0;x<u.length;x++)c[x]=u[x];n&&t.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&null!=e.data.bgActivePosistion&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1),e.registerBinding(t,"touchcancel",K=function touchcancelHandler(t){var n=e.touchData.start;e.touchData.capture=!1,n&&n.unactivate()}),e.registerBinding(t,"touchend",Q=function touchendHandler(t){var a=e.touchData.start;if(e.touchData.capture){0===t.touches.length&&(e.touchData.capture=!1),t.preventDefault();var s=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var l=e.cy,u=l.zoom(),c=e.touchData.now,h=e.touchData.earlier;if(t.touches[0]){var d=e.projectIntoViewport(t.touches[0].clientX,t.touches[0].clientY);c[0]=d[0],c[1]=d[1]}if(t.touches[1]){d=e.projectIntoViewport(t.touches[1].clientX,t.touches[1].clientY);c[2]=d[0],c[3]=d[1]}if(t.touches[2]){d=e.projectIntoViewport(t.touches[2].clientX,t.touches[2].clientY);c[4]=d[0],c[5]=d[1]}var g,v=function makeEvent(e){return{originalEvent:t,type:e,position:{x:c[0],y:c[1]}}};if(a&&a.unactivate(),e.touchData.cxt){if(g=v("cxttapend"),a?a.emit(g):l.emit(g),!e.touchData.cxtDragged){var y=v("cxttap");a?a.emit(y):l.emit(y)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}if(!t.touches[2]&&l.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var m=l.collection(e.getAllInBox(s[0],s[1],s[2],s[3]));s[0]=void 0,s[1]=void 0,s[2]=void 0,s[3]=void 0,s[4]=0,e.redrawHint("select",!0),l.emit(v("boxend"));m.emit(v("box")).stdFilter(function eleWouldBeSelected(e){return e.selectable()&&!e.selected()}).select().emit(v("boxselect")),m.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(null!=a&&a.unactivate(),t.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(t.touches[1]);else if(t.touches[0]);else if(!t.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var b=e.dragData.touchDragEles;if(null!=a){var x=a._private.grabbed;p(b),e.redrawHint("drag",!0),e.redrawHint("eles",!0),x&&(a.emit(v("freeon")),b.emit(v("free")),e.dragData.didDrag&&(a.emit(v("dragfreeon")),b.emit(v("dragfree")))),i(a,["touchend","tapend","vmouseup","tapdragout"],t,{x:c[0],y:c[1]}),a.unactivate(),e.touchData.start=null}else{var w=e.findNearestElement(c[0],c[1],!0,!0);i(w,["touchend","tapend","vmouseup","tapdragout"],t,{x:c[0],y:c[1]})}var E=e.touchData.startPosition[0]-c[0],_=E*E,T=e.touchData.startPosition[1]-c[1],L=(_+T*T)*u*u;e.touchData.singleTouchMoved||(a||l.$(":selected").unselect(["tapunselect"]),i(a,["tap","vclick"],t,{x:c[0],y:c[1]}),J=!1,t.timeStamp-te<=l.multiClickDebounceTime()?(ee&&clearTimeout(ee),J=!0,te=null,i(a,["dbltap","vdblclick"],t,{x:c[0],y:c[1]})):(ee=setTimeout(function(){J||i(a,["onetap","voneclick"],t,{x:c[0],y:c[1]})},l.multiClickDebounceTime()),te=t.timeStamp)),null!=a&&!e.dragData.didDrag&&a._private.selectable&&L<e.touchTapThreshold2&&!e.pinching&&("single"===l.selectionType()?(l.$(n).unmerge(a).unselect(["tapunselect"]),a.select(["tapselect"])):a.selected()?a.unselect(["tapunselect"]):a.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}for(var D=0;D<c.length;D++)h[D]=c[D];e.dragData.didDrag=!1,0===t.touches.length&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),t.touches.length<2&&(1===t.touches.length&&(e.touchData.startGPosition=[t.touches[0].clientX,t.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())}},!1),"undefined"==typeof TouchEvent){var ie=[],ae=function makeTouch(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},oe=function addPointer(e){ie.push(function makePointer(e){return{event:e,touch:ae(e)}}(e))},se=function removePointer(e){for(var t=0;t<ie.length;t++){if(ie[t].event.pointerId===e.pointerId)return void ie.splice(t,1)}},le=function addTouchesToEvent(e){e.touches=ie.map(function(e){return e.touch})},ue=function pointerIsMouse(e){return"mouse"===e.pointerType||4===e.pointerType};e.registerBinding(e.container,"pointerdown",function(e){ue(e)||(e.preventDefault(),oe(e),le(e),j(e))}),e.registerBinding(e.container,"pointerup",function(e){ue(e)||(se(e),le(e),Q(e))}),e.registerBinding(e.container,"pointercancel",function(e){ue(e)||(se(e),le(e),K())}),e.registerBinding(e.container,"pointermove",function(e){ue(e)||(e.preventDefault(),function updatePointer(e){var t=ie.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=ae(e)}(e),le(e),W(e))})}};var Yu={generatePolygon:function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function draw(e,t,n,i,a,s){this.renderer.nodeShapeImpl("polygon",e,t,n,i,a,this.points)},intersectLine:function intersectLine(e,t,n,i,a,s,l,u){return bn(a,s,this.points,e,t,n/2,i/2,l)},checkPoint:function checkPoint(e,t,n,i,a,s,l,u){return cn(e,t,this.points,s,l,i,a,[0,-1],n)},hasMiterBounds:"rectangle"!==e,miterBounds:function miterBounds(e,t,n,i,a,s){return miterBox(this.points,e,t,n,i,a)}}}};Yu.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function draw(e,t,n,i,a,s){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function intersectLine(e,t,n,i,a,s,l,u){return function intersectLineEllipse(e,t,n,i,a,s){var l=n-e,u=i-t;l/=a,u/=s;var c=Math.sqrt(l*l+u*u),h=c-1;if(h<0)return[];var d=h/c;return[(n-e)*d+e,(i-t)*d+t]}(a,s,e,t,n/2+l,i/2+l)},checkPoint:function checkPoint(e,t,n,i,a,s,l,u){return pn(e,t,i,a,s,l,n)}}},Yu.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function getOrCreateCorners(e,n,i,a,s,l,u){if(void 0!==l[u]&&l[u+"-cx"]===e&&l[u+"-cy"]===n)return l[u];l[u]=new Array(t.length/2),l[u+"-cx"]=e,l[u+"-cy"]=n;var c=i/2,h=a/2;s="auto"===s?Tn(i,a):s;for(var d=new Array(t.length/2),p=0;p<t.length/2;p++)d[p]={x:e+c*t[2*p],y:n+h*t[2*p+1]};var g,v,y,m,b=d.length;for(v=d[b-1],g=0;g<b;g++)y=d[g%b],m=d[(g+1)%b],l[u][g]=getRoundCorner(v,y,m,s),v=y,y=m;return l[u]},draw:function draw(e,t,n,i,a,s,l){this.renderer.nodeShapeImpl("round-polygon",e,t,n,i,a,this.points,this.getOrCreateCorners(t,n,i,a,s,l,"drawCorners"))},intersectLine:function intersectLine(e,t,n,i,a,s,l,u,c){return function roundPolygonIntersectLine(e,t,n,i,a,s,l,u,c){var h,d=[],p=new Array(2*n.length);c.forEach(function(n,s){0===s?(p[p.length-2]=n.startX,p[p.length-1]=n.startY):(p[4*s-2]=n.startX,p[4*s-1]=n.startY),p[4*s]=n.stopX,p[4*s+1]=n.stopY,0!==(h=gn(e,t,i,a,n.cx,n.cy,n.radius)).length&&d.push(h[0],h[1])});for(var g=0;g<p.length/4;g++)0!==(h=yn(e,t,i,a,p[4*g],p[4*g+1],p[4*g+2],p[4*g+3],!1)).length&&d.push(h[0],h[1]);if(d.length>2){for(var v=[d[0],d[1]],y=Math.pow(v[0]-e,2)+Math.pow(v[1]-t,2),m=1;m<d.length/2;m++){var b=Math.pow(d[2*m]-e,2)+Math.pow(d[2*m+1]-t,2);b<=y&&(v[0]=d[2*m],v[1]=d[2*m+1],y=b)}return v}return d}(a,s,this.points,e,t,0,0,0,this.getOrCreateCorners(e,t,n,i,u,c,"corners"))},checkPoint:function checkPoint(e,t,n,i,a,s,l,u,c){return function pointInsideRoundPolygon(e,t,n,i,a,s,l,u){for(var c=new Array(2*n.length),h=0;h<u.length;h++){var d=u[h];if(c[4*h+0]=d.startX,c[4*h+1]=d.startY,c[4*h+2]=d.stopX,c[4*h+3]=d.stopY,Math.pow(d.cx-e,2)+Math.pow(d.cy-t,2)<=Math.pow(d.radius,2))return!0}return un(e,t,c)}(e,t,this.points,0,0,0,0,this.getOrCreateCorners(s,l,i,a,u,c,"corners"))}}},Yu.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:wn(4,0),draw:function draw(e,t,n,i,a,s){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,this.points,s)},intersectLine:function intersectLine(e,t,n,i,a,s,l,u){return nn(a,s,e,t,n,i,l,u)},checkPoint:function checkPoint(e,t,n,i,a,s,l,u){var c=i/2,h=a/2;u="auto"===u?Cn(i,a):u;var d=2*(u=Math.min(c,h,u));return!!cn(e,t,this.points,s,l,i,a-d,[0,-1],n)||(!!cn(e,t,this.points,s,l,i-d,a,[0,-1],n)||(!!pn(e,t,d,d,s-c+u,l-h+u,n)||(!!pn(e,t,d,d,s+c-u,l-h+u,n)||(!!pn(e,t,d,d,s+c-u,l+h-u,n)||!!pn(e,t,d,d,s-c+u,l+h-u,n)))))}}},Yu.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:wn(4,0),draw:function draw(e,t,n,i,a,s){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,null,s)},generateCutTrianglePts:function generateCutTrianglePts(e,t,n,i,a){var s="auto"===a?this.cornerLength:a,l=t/2,u=e/2,c=n-u,h=n+u,d=i-l,p=i+l;return{topLeft:[c,d+s,c+s,d,c+s,d+s],topRight:[h-s,d,h,d+s,h-s,d+s],bottomRight:[h,p-s,h-s,p,h-s,p-s],bottomLeft:[c+s,p,c,p-s,c+s,p-s]}},intersectLine:function intersectLine(e,t,n,i,a,s,l,u){var c=this.generateCutTrianglePts(n+2*l,i+2*l,e,t,u),h=[].concat.apply([],[c.topLeft.splice(0,4),c.topRight.splice(0,4),c.bottomRight.splice(0,4),c.bottomLeft.splice(0,4)]);return bn(a,s,h,e,t)},checkPoint:function checkPoint(e,t,n,i,a,s,l,u){var c="auto"===u?this.cornerLength:u;if(cn(e,t,this.points,s,l,i,a-2*c,[0,-1],n))return!0;if(cn(e,t,this.points,s,l,i-2*c,a,[0,-1],n))return!0;var h=this.generateCutTrianglePts(i,a,s,l);return un(e,t,h.topLeft)||un(e,t,h.topRight)||un(e,t,h.bottomRight)||un(e,t,h.bottomLeft)}}},Yu.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:wn(4,0),draw:function draw(e,t,n,i,a,s){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function intersectLine(e,t,n,i,a,s,l,u){var c=this.generateBarrelBezierPts(n+2*l,i+2*l,e,t),h=function approximateBarrelCurvePts(e){var t=Yt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),n=Yt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),i=Yt({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,n.x,n.y,i.x,i.y,e[4],e[5]]},d=[].concat(h(c.topLeft),h(c.topRight),h(c.bottomRight),h(c.bottomLeft));return bn(a,s,d,e,t)},generateBarrelBezierPts:function generateBarrelBezierPts(e,t,n,i){var a=t/2,s=e/2,l=n-s,u=n+s,c=i-a,h=i+a,d=Ln(e,t),p=d.heightOffset,g=d.widthOffset,v=d.ctrlPtOffsetPct*e,y={topLeft:[l,c+p,l+v,c,l+g,c],topRight:[u-g,c,u-v,c,u,c+p],bottomRight:[u,h-p,u-v,h,u-g,h],bottomLeft:[l+g,h,l+v,h,l,h-p]};return y.topLeft.isTop=!0,y.topRight.isTop=!0,y.bottomLeft.isBottom=!0,y.bottomRight.isBottom=!0,y},checkPoint:function checkPoint(e,t,n,i,a,s,l,u){var c=Ln(i,a),h=c.heightOffset,d=c.widthOffset;if(cn(e,t,this.points,s,l,i,a-2*h,[0,-1],n))return!0;if(cn(e,t,this.points,s,l,i-2*d,a,[0,-1],n))return!0;for(var p=this.generateBarrelBezierPts(i,a,s,l),g=function getCurveT(e,t,n){var i=n[4],a=n[2],s=n[0],l=n[5],u=n[1],c=Math.min(i,s),h=Math.max(i,s),d=Math.min(l,u),p=Math.max(l,u);if(c<=e&&e<=h&&d<=t&&t<=p){var g=function bezierPtsToQuadCoeff(e,t,n){return[e-2*t+n,2*(t-e),e]}(i,a,s),v=function solveQuadratic(e,t,n,i){var a=t*t-4*e*(n-=i);if(a<0)return[];var s=Math.sqrt(a),l=2*e;return[(-t+s)/l,(-t-s)/l]}(g[0],g[1],g[2],e).filter(function(e){return 0<=e&&e<=1});if(v.length>0)return v[0]}return null},v=Object.keys(p),y=0;y<v.length;y++){var m=p[v[y]],b=g(e,t,m);if(null!=b){var x=m[5],w=m[3],E=m[1],_=qt(x,w,E,b);if(m.isTop&&_<=t)return!0;if(m.isBottom&&t<=_)return!0}}return!1}}},Yu.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:wn(4,0),draw:function draw(e,t,n,i,a,s){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,this.points,s)},intersectLine:function intersectLine(e,t,n,i,a,s,l,u){var c=t-(i/2+l),h=yn(a,s,e,t,e-(n/2+l),c,e+(n/2+l),c,!1);return h.length>0?h:nn(a,s,e,t,n,i,l,u)},checkPoint:function checkPoint(e,t,n,i,a,s,l,u){var c=2*(u="auto"===u?Cn(i,a):u);if(cn(e,t,this.points,s,l,i,a-c,[0,-1],n))return!0;if(cn(e,t,this.points,s,l,i-c,a,[0,-1],n))return!0;var h=i/2+2*n,d=a/2+2*n;return!!un(e,t,[s-h,l-d,s-h,l,s+h,l,s+h,l-d])||(!!pn(e,t,c,c,s+i/2-u,l+a/2-u,n)||!!pn(e,t,c,c,s-i/2+u,l+a/2-u,n))}}},Yu.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",wn(3,0)),this.generateRoundPolygon("round-triangle",wn(3,0)),this.generatePolygon("rectangle",wn(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",wn(5,0)),this.generateRoundPolygon("round-pentagon",wn(5,0)),this.generatePolygon("hexagon",wn(6,0)),this.generateRoundPolygon("round-hexagon",wn(6,0)),this.generatePolygon("heptagon",wn(7,0)),this.generateRoundPolygon("round-heptagon",wn(7,0)),this.generatePolygon("octagon",wn(8,0)),this.generateRoundPolygon("round-octagon",wn(8,0));var i=new Array(20),a=_n(5,0),s=_n(5,Math.PI/5),l=.5*(3-Math.sqrt(5));l*=1.57;for(var u=0;u<s.length/2;u++)s[2*u]*=l,s[2*u+1]*=l;for(u=0;u<5;u++)i[4*u]=a[2*u],i[4*u+1]=a[2*u+1],i[4*u+2]=s[2*u],i[4*u+3]=s[2*u+1];i=En(i),this.generatePolygon("star",i),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var c=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",c),this.generateRoundPolygon("round-tag",c),e.makePolygon=function(e){var n,i="polygon-"+e.join("$");return(n=this[i])?n:t.generatePolygon(i,e)}};var Xu={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(e){e=e||tt();var t=this;void 0===t.averageRedrawTime&&(t.averageRedrawTime=0),void 0===t.lastRedrawTime&&(t.lastRedrawTime=0),void 0===t.lastDrawTime&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e},beforeRender:function(e,t){if(!this.destroyed){null==t&&$e("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:e,priority:t}),n.sort(function(e,t){return t.priority-e.priority})}}},Uu=function beforeRenderCallbacks(e,t,n){for(var i=e.beforeRenderCallbacks,a=0;a<i.length;a++)i[a].fn(t,n)};Xu.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var n=function renderFn(i){if(!e.destroyed){if(t.batching());else if(e.requestedFrame&&!e.skipFrame){Uu(e,!0,i);var a=Se();e.render(e.renderOptions);var s=e.lastDrawTime=Se();void 0===e.averageRedrawTime&&(e.averageRedrawTime=s-a),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var l=s-a;e.redrawTotalTime+=l,e.lastRedrawTime=l,e.averageRedrawTime=e.averageRedrawTime/2+l/2,e.requestedFrame=!1}else Uu(e,!1,i);e.skipFrame=!1,Ae(n)}};Ae(n)}};var Hu=function BaseRenderer(e){this.init(e)},ju=Hu.prototype;ju.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],ju.init=function(e){var t=this;t.options=e,t.cy=e.cy;var n=t.container=e.cy.container(),i=t.cy.window();if(i){var a=i.document,s=a.head,l="__________cytoscape_stylesheet",u="__________cytoscape_container",c=null!=a.getElementById(l);if(n.className.indexOf(u)<0&&(n.className=(n.className||"")+" "+u),!c){var h=a.createElement("style");h.id=l,h.textContent="."+u+" { position: relative; }",s.insertBefore(h,s.children[0])}"static"===i.getComputedStyle(n).getPropertyValue("position")&&Ze("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.webgl=e.webgl,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=Z(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()},ju.notify=function(e,t){var n=this,i=n.cy;this.destroyed||("init"!==e?"destroy"!==e?(("add"===e||"remove"===e||"move"===e&&i.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&n.invalidateCachedZSortedEles(),"viewport"===e&&n.redrawHint("select",!0),"gc"===e&&n.redrawHint("gc",!0),"load"!==e&&"resize"!==e&&"mount"!==e||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},ju.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var n=e.bindings[t],i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch(e){}},ju.isHeadless=function(){return!1},[iu,Gu,Vu,qu,Yu,Xu].forEach(function(e){me(ju,e)});var Wu=1e3/60,$u=function setupDequeueing(e){return function setupDequeueingImpl(){var t=this,n=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var i=Ce(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},e.deqRedrawThreshold),a=e.priority||We;n.beforeRender(function dequeue(a,s){var l=Se(),u=n.averageRedrawTime,c=n.lastRedrawTime,h=[],d=n.cy.extent(),p=n.getPixelRatio();for(a||n.flushRenderedStyleQueue();;){var g=Se(),v=g-l,y=g-s;if(c<Wu){var m=Wu-(a?u:0);if(y>=e.deqFastCost*m)break}else if(a){if(v>=e.deqCost*c||v>=e.deqAvgCost*u)break}else if(y>=e.deqNoDrawCost*Wu)break;var b=e.deq(t,p,d);if(!(b.length>0))break;for(var x=0;x<b.length;x++)h.push(b[x])}h.length>0&&(e.onDeqd(t,h),!a&&e.shouldRedraw(t,h,p,d)&&i())},a(t))}}},Ku=function(){return _createClass(function ElementTextureCacheLookup(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:He;_classCallCheck(this,ElementTextureCacheLookup),this.idsByKey=new st,this.keyForId=new st,this.cachesByLvl=new st,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t},[{key:"getIdsFor",value:function getIdsFor(e){null==e&&$e("Can not get id list for null key");var t=this.idsByKey,n=this.idsByKey.get(e);return n||(n=new ut,t.set(e,n)),n}},{key:"addIdForKey",value:function addIdForKey(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function deleteIdForKey(e,t){null!=e&&this.getIdsFor(e).delete(t)}},{key:"getNumberOfIdsForKey",value:function getNumberOfIdsForKey(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function updateKeyMappingFor(e){var t=e.id(),n=this.keyForId.get(t),i=this.getKey(e);this.deleteIdForKey(n,t),this.addIdForKey(i,t),this.keyForId.set(t,i)}},{key:"deleteKeyMappingFor",value:function deleteKeyMappingFor(e){var t=e.id(),n=this.keyForId.get(t);this.deleteIdForKey(n,t),this.keyForId.delete(t)}},{key:"keyHasChangedFor",value:function keyHasChangedFor(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}},{key:"isInvalid",value:function isInvalid(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function getCachesAt(e){var t=this.cachesByLvl,n=this.lvls,i=t.get(e);return i||(i=new st,t.set(e,i),n.push(e)),i}},{key:"getCache",value:function getCache(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function get(e,t){var n=this.getKey(e),i=this.getCache(n,t);return null!=i&&this.updateKeyMappingFor(e),i}},{key:"getForCachedKey",value:function getForCachedKey(e,t){var n=this.keyForId.get(e.id());return this.getCache(n,t)}},{key:"hasCache",value:function hasCache(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function has(e,t){var n=this.getKey(e);return this.hasCache(n,t)}},{key:"setCache",value:function setCache(e,t,n){n.key=e,this.getCachesAt(t).set(e,n)}},{key:"set",value:function set(e,t,n){var i=this.getKey(e);this.setCache(i,t,n),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function deleteCache(e,t){this.getCachesAt(t).delete(e)}},{key:"delete",value:function _delete(e,t){var n=this.getKey(e);this.deleteCache(n,t)}},{key:"invalidateKey",value:function invalidateKey(e){var t=this;this.lvls.forEach(function(n){return t.deleteCache(e,n)})}},{key:"invalidate",value:function invalidate(e){var t=e.id(),n=this.keyForId.get(t);this.deleteKeyMappingFor(e);var i=this.doesEleInvalidateKey(e);return i&&this.invalidateKey(n),i||0===this.getNumberOfIdsForKey(n)}}])}(),Zu=7.99,Qu={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Ju=nt({getKey:null,doesEleInvalidateKey:He,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Ue,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),ec=function ElementTextureCache(e,t){var n=this;n.renderer=e,n.onDequeues=[];var i=Ju(t);me(n,i),n.lookup=new Ku(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},tc=ec.prototype;tc.reasons=Qu,tc.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]},tc.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},tc.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new bt(function(e,t){return t.reqs-e.reqs})},tc.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},tc.getElement=function(e,t,n,i,a){var s=this,l=this.renderer,u=l.cy.zoom(),c=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed())return null;if(!s.allowEdgeTxrCaching&&e.isEdge()||!s.allowParentTxrCaching&&e.isParent())return null;if(null==i&&(i=Math.ceil(Ot(u*n))),i<-4)i=-4;else if(u>=7.99||i>3)return null;var h=Math.pow(2,i),d=t.h*h,p=t.w*h,g=l.eleTextBiggerThanMin(e,h);if(!this.isVisible(e,g))return null;var v,y=c.get(e,i);if(y&&y.invalidated&&(y.invalidated=!1,y.texture.invalidatedWidth-=y.width),y)return y;if(v=d<=25?25:d<=50?50:50*Math.ceil(d/50),d>1024||p>1024)return null;var m=s.getTextureQueue(v),b=m[m.length-2],x=function addNewTxr(){return s.recycleTexture(v,p)||s.addTexture(v,p)};b||(b=m[m.length-1]),b||(b=x()),b.width-b.usedWidth<p&&(b=x());for(var w,E=function scalableFrom(e){return e&&e.scaledLabelShown===g},_=a&&a===Qu.dequeue,T=a&&a===Qu.highQuality,L=a&&a===Qu.downscale,D=i+1;D<=3;D++){var S=c.get(e,D);if(S){w=S;break}}var k=w&&w.level===i+1?w:null,P=function downscale(){b.context.drawImage(k.texture.canvas,k.x,0,k.width,k.height,b.usedWidth,0,p,d)};if(b.context.setTransform(1,0,0,1,0,0),b.context.clearRect(b.usedWidth,0,p,v),E(k))P();else if(E(w)){if(!T)return s.queueElement(e,w.level-1),w;for(var N=w.level;N>i;N--)k=s.getElement(e,t,n,N,Qu.downscale);P()}else{var I;if(!_&&!T&&!L)for(var M=i-1;M>=-4;M--){var R=c.get(e,M);if(R){I=R;break}}if(E(I))return s.queueElement(e,i),I;b.context.translate(b.usedWidth,0),b.context.scale(h,h),this.drawElement(b.context,e,t,g,!1),b.context.scale(1/h,1/h),b.context.translate(-b.usedWidth,0)}return y={x:b.usedWidth,texture:b,level:i,scale:h,width:p,height:d,scaledLabelShown:g},b.usedWidth+=Math.ceil(p+8),b.eleCaches.push(y),c.set(e,i,y),s.checkTextureFullness(b),y},tc.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},tc.invalidateElement=function(e){var t=this,n=t.lookup,i=[];if(n.isInvalid(e)){for(var a=-4;a<=3;a++){var s=n.getForCachedKey(e,a);s&&i.push(s)}if(n.invalidate(e))for(var l=0;l<i.length;l++){var u=i[l],c=u.texture;c.invalidatedWidth+=u.width,u.invalidated=!0,t.checkTextureUtility(c)}t.removeFromQueue(e)}},tc.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},tc.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?rt(t,e):e.fullnessChecks++},tc.retireTexture=function(e){var t=e.height,n=this.getTextureQueue(t),i=this.lookup;rt(n,e),e.retired=!0;for(var a=e.eleCaches,s=0;s<a.length;s++){var l=a[s];i.deleteCache(l.key,l.level)}it(a),this.getRetiredTextureQueue(t).push(e)},tc.addTexture=function(e,t){var n={};return this.getTextureQueue(e).push(n),n.eleCaches=[],n.height=e,n.width=Math.max(1024,t),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},tc.recycleTexture=function(e,t){for(var n=this.getTextureQueue(e),i=this.getRetiredTextureQueue(e),a=0;a<i.length;a++){var s=i[a];if(s.width>=t)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,it(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),rt(i,s),n.push(s),s}},tc.queueElement=function(e,t){var n=this.getElementQueue(),i=this.getElementKeyToQueue(),a=this.getKey(e),s=i[a];if(s)s.level=Math.max(s.level,t),s.eles.merge(e),s.reqs++,n.updateItem(s);else{var l={eles:e.spawn().merge(e),level:t,reqs:1,key:a};n.push(l),i[a]=l}},tc.dequeue=function(e){for(var t=this,n=t.getElementQueue(),i=t.getElementKeyToQueue(),a=[],s=t.lookup,l=0;l<1&&n.size()>0;l++){var u=n.pop(),c=u.key,h=u.eles[0],d=s.hasCache(h,u.level);if(i[c]=null,!d){a.push(u);var p=t.getBoundingBox(h);t.getElement(h,p,e,u.level,Qu.dequeue)}}return a},tc.removeFromQueue=function(e){var t=this.getElementQueue(),n=this.getElementKeyToQueue(),i=this.getKey(e),a=n[i];null!=a&&(1===a.eles.length?(a.reqs=Xe,t.updateItem(a),t.pop(),n[i]=null):a.eles.unmerge(e))},tc.onDequeue=function(e){this.onDequeues.push(e)},tc.offDequeue=function(e){rt(this.onDequeues,e)},tc.setupDequeueing=$u({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function deq(e,t,n){return e.dequeue(t,n)},onDeqd:function onDeqd(e,t){for(var n=0;n<e.onDequeues.length;n++){(0,e.onDequeues[n])(t)}},shouldRedraw:function shouldRedraw(e,t,n,i){for(var a=0;a<t.length;a++)for(var s=t[a].eles,l=0;l<s.length;l++){var u=s[l].boundingBox();if(Zt(u,i))return!0}return!1},priority:function priority(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var nc=function LayeredTextureCache(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Se()-500,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=Ce(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},50),n.beforeRender(function(e,n){n-t.lastInvalidationTime<=250?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);t.layersQueue=new bt(function qSort(e,t){return t.reqs-e.reqs}),t.setupDequeueing()},rc=nc.prototype,ic=0,ac=Math.pow(2,53)-1;rc.makeLayer=function(e,t){var n=Math.pow(2,t),i=Math.ceil(e.w*n),a=Math.ceil(e.h*n),s=this.renderer.makeOffscreenCanvas(i,a),l={id:ic=++ic%ac,bb:e,level:t,width:i,height:a,canvas:s,context:s.getContext("2d"),eles:[],elesQueue:[],reqs:0},u=l.context,c=-l.bb.x1,h=-l.bb.y1;return u.scale(n,n),u.translate(c,h),l},rc.getLayers=function(e,t,n){var i=this,a=i.renderer.cy.zoom(),s=i.firstGet;if(i.firstGet=!1,null==n)if((n=Math.ceil(Ot(a*t)))<-4)n=-4;else if(a>=3.99||n>2)return null;i.validateLayersElesOrdering(n,e);var l,u,c=i.layersByLevel,h=Math.pow(2,n),d=c[n]=c[n]||[];if(i.levelIsComplete(n,e))return d;!function checkTempLevels(){var t=function canUseAsTmpLvl(t){if(i.validateLayersElesOrdering(t,e),i.levelIsComplete(t,e))return u=c[t],!0},a=function checkLvls(e){if(!u)for(var i=n+e;-4<=i&&i<=2&&!t(i);i+=e);};a(1),a(-1);for(var s=d.length-1;s>=0;s--){var l=d[s];l.invalid&&rt(d,l)}}();var p=function makeLayer(t){var a=(t=t||{}).after;!function getBb(){if(!l){l=Ut();for(var t=0;t<e.length;t++)Ht(l,e[t].boundingBox())}}();var s=Math.ceil(l.w*h),u=Math.ceil(l.h*h);if(s>32767||u>32767)return null;if(s*u>16e6)return null;var c=i.makeLayer(l,n);if(null!=a){var p=d.indexOf(a)+1;d.splice(p,0,c)}else(void 0===t.insert||t.insert)&&d.unshift(c);return c};if(i.skipping&&!s)return null;for(var g=null,v=e.length/1,y=!s,m=0;m<e.length;m++){var b=e[m],x=b._private.rscratch,w=x.imgLayerCaches=x.imgLayerCaches||{},E=w[n];if(E)g=E;else{if((!g||g.eles.length>=v||!en(g.bb,b.boundingBox()))&&!(g=p({insert:!0,after:g})))return null;u||y?i.queueLayer(g,b):i.drawEleInLayer(g,b,n,t),g.eles.push(b),w[n]=g}}return u||(y?null:d)},rc.getEleLevelForLayerLevel=function(e,t){return e},rc.drawEleInLayer=function(e,t,n,i){var a=this.renderer,s=e.context,l=t.boundingBox();0!==l.w&&0!==l.h&&t.visible()&&(n=this.getEleLevelForLayerLevel(n,i),a.setImgSmoothing(s,!1),a.drawCachedElement(s,t,null,null,n,true),a.setImgSmoothing(s,!0))},rc.levelIsComplete=function(e,t){var n=this.layersByLevel[e];if(!n||0===n.length)return!1;for(var i=0,a=0;a<n.length;a++){var s=n[a];if(s.reqs>0)return!1;if(s.invalid)return!1;i+=s.eles.length}return i===t.length},rc.validateLayersElesOrdering=function(e,t){var n=this.layersByLevel[e];if(n)for(var i=0;i<n.length;i++){for(var a=n[i],s=-1,l=0;l<t.length;l++)if(a.eles[0]===t[l]){s=l;break}if(s<0)this.invalidateLayer(a);else{var u=s;for(l=0;l<a.eles.length;l++)if(a.eles[l]!==t[u+l]){this.invalidateLayer(a);break}}}},rc.updateElementsInLayers=function(e,t){for(var n=ee(e[0]),i=0;i<e.length;i++)for(var a=n?null:e[i],s=n?e[i]:e[i].ele,l=s._private.rscratch,u=l.imgLayerCaches=l.imgLayerCaches||{},c=-4;c<=2;c++){var h=u[c];h&&(a&&this.getEleLevelForLayerLevel(h.level)!==a.level||t(h,s,a))}},rc.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var n=this.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e},rc.invalidateElements=function(e){var t=this;0!==e.length&&(t.lastInvalidationTime=Se(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function invalAssocLayers(e,n,i){t.invalidateLayer(e)}))},rc.invalidateLayer=function(e){if(this.lastInvalidationTime=Se(),!e.invalid){var t=e.level,n=e.eles,i=this.layersByLevel[t];rt(i,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var a=0;a<n.length;a++){var s=n[a]._private.rscratch.imgLayerCaches;s&&(s[t]=null)}}},rc.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function refineEachEle(e,n,i){var a=e.replacement;if(a||((a=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,a.eles=e.eles),!a.reqs)for(var s=0;s<a.eles.length;s++)t.queueLayer(a,a.eles[s])})},rc.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},rc.queueLayer=function(e,t){var n=this.layersQueue,i=e.elesQueue,a=i.hasId=i.hasId||{};if(!e.replacement){if(t){if(a[t.id()])return;i.push(t),a[t.id()]=!0}e.reqs?(e.reqs++,n.updateItem(e)):(e.reqs=1,n.push(e))}},rc.dequeue=function(e){for(var t=this,n=t.layersQueue,i=[],a=0;a<1&&0!==n.size();){var s=n.peek();if(s.replacement)n.pop();else if(s.replaces&&s!==s.replaces.replacement)n.pop();else if(s.invalid)n.pop();else{var l=s.elesQueue.shift();l&&(t.drawEleInLayer(s,l,s.level,e),a++),0===i.length&&i.push(!0),0===s.elesQueue.length&&(n.pop(),s.reqs=0,s.replaces&&t.applyLayerReplacement(s),t.requestRedraw())}}return i},rc.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],n=e.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=e;for(var a=0;a<e.eles.length;a++){var s=e.eles[a]._private,l=s.imgLayerCaches=s.imgLayerCaches||{};l&&(l[e.level]=e)}this.requestRedraw()}},rc.requestRedraw=Ce(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),rc.setupDequeueing=$u({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function deq(e,t){return e.dequeue(t)},onDeqd:We,shouldRedraw:Ue,priority:function priority(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var oc,sc={};function polygon(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.lineTo(i.x,i.y)}}function triangleBackcurve(e,t,n){for(var i,a=0;a<t.length;a++){var s=t[a];0===a&&(i=s),e.lineTo(s.x,s.y)}e.quadraticCurveTo(n.x,n.y,i.x,i.y)}function triangleTee(e,t,n){e.beginPath&&e.beginPath();for(var i=t,a=0;a<i.length;a++){var s=i[a];e.lineTo(s.x,s.y)}var l=n,u=n[0];e.moveTo(u.x,u.y);for(a=1;a<l.length;a++){s=l[a];e.lineTo(s.x,s.y)}e.closePath&&e.closePath()}function circleTriangle(e,t,n,i,a){e.beginPath&&e.beginPath(),e.arc(n,i,a,0,2*Math.PI,!1);var s=t,l=s[0];e.moveTo(l.x,l.y);for(var u=0;u<s.length;u++){var c=s[u];e.lineTo(c.x,c.y)}e.closePath&&e.closePath()}function circle$1(e,t,n,i){e.arc(t,n,i,0,2*Math.PI,!1)}sc.arrowShapeImpl=function(e){return(oc||(oc={polygon,"triangle-backcurve":triangleBackcurve,"triangle-tee":triangleTee,"circle-triangle":circleTriangle,"triangle-cross":triangleTee,circle:circle$1}))[e]};var lc={drawElement:function(e,t,n,i,a,s){t.isNode()?this.drawNode(e,t,n,i,a,s):this.drawEdge(e,t,n,i,a,s)},drawElementOverlay:function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},drawElementUnderlay:function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},drawCachedElementPortion:function(e,t,n,i,a,s,l,u){var c=this,h=n.getBoundingBox(t);if(0!==h.w&&0!==h.h){var d=n.getElement(t,h,i,a,s);if(null!=d){var p=u(c,t);if(0===p)return;var g,v,y,m,b,x,w=l(c,t),E=h.x1,_=h.y1,T=h.w,L=h.h;if(0!==w){var D=n.getRotationPoint(t);y=D.x,m=D.y,e.translate(y,m),e.rotate(w),(b=c.getImgSmoothing(e))||c.setImgSmoothing(e,!0);var S=n.getRotationOffset(t);g=S.x,v=S.y}else g=E,v=_;1!==p&&(x=e.globalAlpha,e.globalAlpha=x*p),e.drawImage(d.texture.canvas,d.x,0,d.width,d.height,g,v,T,L),1!==p&&(e.globalAlpha=x),0!==w&&(e.rotate(-w),e.translate(-y,-m),b||c.setImgSmoothing(e,!1))}else n.drawElement(e,t)}}},uc=function getZeroRotation(){return 0},cc=function getLabelRotation(e,t){return e.getTextAngle(t,null)},hc=function getSourceLabelRotation(e,t){return e.getTextAngle(t,"source")},dc=function getTargetLabelRotation(e,t){return e.getTextAngle(t,"target")},pc=function getOpacity(e,t){return t.effectiveOpacity()},fc=function getTextOpacity(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};lc.drawCachedElement=function(e,t,n,i,a,s){var l=this,u=l.data,c=u.eleTxrCache,h=u.lblTxrCache,d=u.slbTxrCache,p=u.tlbTxrCache,g=t.boundingBox(),v=!0===s?c.reasons.highQuality:null;if(0!==g.w&&0!==g.h&&t.visible()&&(!i||Zt(g,i))){var y=t.isEdge(),m=t.element()._private.rscratch.badLine;l.drawElementUnderlay(e,t),l.drawCachedElementPortion(e,t,c,n,a,v,uc,pc),y&&m||l.drawCachedElementPortion(e,t,h,n,a,v,cc,fc),y&&!m&&(l.drawCachedElementPortion(e,t,d,n,a,v,hc,fc),l.drawCachedElementPortion(e,t,p,n,a,v,dc,fc)),l.drawElementOverlay(e,t)}},lc.drawElements=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];this.drawElement(e,i)}},lc.drawCachedElements=function(e,t,n,i){for(var a=0;a<t.length;a++){var s=t[a];this.drawCachedElement(e,s,n,i)}},lc.drawCachedNodes=function(e,t,n,i){for(var a=0;a<t.length;a++){var s=t[a];s.isNode()&&this.drawCachedElement(e,s,n,i)}},lc.drawLayeredElements=function(e,t,n,i){var a=this.data.lyrTxrCache.getLayers(t,n);if(a)for(var s=0;s<a.length;s++){var l=a[s],u=l.bb;0!==u.w&&0!==u.h&&e.drawImage(l.canvas,u.x1,u.y1,u.w,u.h)}else this.drawCachedElements(e,t,n,i)};var vc={drawEdge:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this,u=t._private.rscratch;if((!s||t.visible())&&!u.badLine&&null!=u.allpts&&!isNaN(u.allpts[0])){var c;n&&(c=n,e.translate(-c.x1,-c.y1));var h=s?t.pstyle("opacity").value:1,d=s?t.pstyle("line-opacity").value:1,p=t.pstyle("curve-style").value,g=t.pstyle("line-style").value,v=t.pstyle("width").pfValue,y=t.pstyle("line-cap").value,m=t.pstyle("line-outline-width").value,b=t.pstyle("line-outline-color").value,x=h*d,w=h*d,E=function drawLine(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;"straight-triangle"===p?(l.eleStrokeStyle(e,t,n),l.drawEdgeTrianglePath(t,e,u.allpts)):(e.lineWidth=v,e.lineCap=y,l.eleStrokeStyle(e,t,n),l.drawEdgePath(t,e,u.allpts,g),e.lineCap="butt")},_=function drawArrows(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;l.drawArrowheads(e,t,n)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var T=t.pstyle("ghost-offset-x").pfValue,L=t.pstyle("ghost-offset-y").pfValue,D=t.pstyle("ghost-opacity").value,S=x*D;e.translate(T,L),E(S),_(S),e.translate(-T,-L)}else!function drawLineOutline(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;e.lineWidth=v+m,e.lineCap=y,m>0?(l.colorStrokeStyle(e,b[0],b[1],b[2],n),"straight-triangle"===p?l.drawEdgeTrianglePath(t,e,u.allpts):(l.drawEdgePath(t,e,u.allpts,g),e.lineCap="butt")):e.lineCap="butt"}();!function drawUnderlay(){a&&l.drawEdgeUnderlay(e,t)}(),E(),_(),function drawOverlay(){a&&l.drawEdgeOverlay(e,t)}(),function drawText(){l.drawElementText(e,t,null,i)}(),n&&e.translate(c.x1,c.y1)}}},yc=function drawEdgeOverlayUnderlay(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(0!==i){var a=this,s=a.usePaths(),l=n._private.rscratch,u=2*n.pstyle("".concat(e,"-padding")).pfValue,c=n.pstyle("".concat(e,"-color")).value;t.lineWidth=u,"self"!==l.edgeType||s?t.lineCap="round":t.lineCap="butt",a.colorStrokeStyle(t,c[0],c[1],c[2],i),a.drawEdgePath(n,t,l.allpts,"solid")}}}};vc.drawEdgeOverlay=yc("overlay"),vc.drawEdgeUnderlay=yc("underlay"),vc.drawEdgePath=function(e,t,n,i){var a,s=e._private.rscratch,l=t,u=!1,c=this.usePaths(),h=e.pstyle("line-dash-pattern").pfValue,d=e.pstyle("line-dash-offset").pfValue;if(c){var p=n.join("$");s.pathCacheKey&&s.pathCacheKey===p?(a=t=s.pathCache,u=!0):(a=t=new Path2D,s.pathCacheKey=p,s.pathCache=a)}if(l.setLineDash)switch(i){case"dotted":l.setLineDash([1,1]);break;case"dashed":l.setLineDash(h),l.lineDashOffset=d;break;case"solid":l.setLineDash([])}if(!u&&!s.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(n[0],n[1]),s.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var g=2;g+3<n.length;g+=4)t.quadraticCurveTo(n[g],n[g+1],n[g+2],n[g+3]);break;case"straight":case"haystack":for(var v=2;v+1<n.length;v+=2)t.lineTo(n[v],n[v+1]);break;case"segments":if(s.isRound){var y,m=_createForOfIteratorHelper(s.roundCorners);try{for(m.s();!(y=m.n()).done;){drawPreparedRoundCorner(t,y.value)}}catch(e){m.e(e)}finally{m.f()}t.lineTo(n[n.length-2],n[n.length-1])}else for(var b=2;b+1<n.length;b+=2)t.lineTo(n[b],n[b+1])}t=l,c?t.stroke(a):t.stroke(),t.setLineDash&&t.setLineDash([])},vc.drawEdgeTrianglePath=function(e,t,n){t.fillStyle=t.strokeStyle;for(var i=e.pstyle("width").pfValue,a=0;a+1<n.length;a+=2){var s=[n[a+2]-n[a],n[a+3]-n[a+1]],l=Math.sqrt(s[0]*s[0]+s[1]*s[1]),u=[s[1]/l,-s[0]/l],c=[u[0]*i/2,u[1]*i/2];t.beginPath(),t.moveTo(n[a]-c[0],n[a+1]-c[1]),t.lineTo(n[a]+c[0],n[a+1]+c[1]),t.lineTo(n[a+2],n[a+3]),t.closePath(),t.fill()}},vc.drawArrowheads=function(e,t,n){var i=t._private.rscratch,a="haystack"===i.edgeType;a||this.drawArrowhead(e,t,"source",i.arrowStartX,i.arrowStartY,i.srcArrowAngle,n),this.drawArrowhead(e,t,"mid-target",i.midX,i.midY,i.midtgtArrowAngle,n),this.drawArrowhead(e,t,"mid-source",i.midX,i.midY,i.midsrcArrowAngle,n),a||this.drawArrowhead(e,t,"target",i.arrowEndX,i.arrowEndY,i.tgtArrowAngle,n)},vc.drawArrowhead=function(e,t,n,i,a,s,l){if(!(isNaN(i)||null==i||isNaN(a)||null==a||isNaN(s)||null==s)){var u=this,c=t.pstyle(n+"-arrow-shape").value;if("none"!==c){var h="hollow"===t.pstyle(n+"-arrow-fill").value?"both":"filled",d=t.pstyle(n+"-arrow-fill").value,p=t.pstyle("width").pfValue,g=t.pstyle(n+"-arrow-width"),v="match-line"===g.value?p:g.pfValue;"%"===g.units&&(v*=p);var y=t.pstyle("opacity").value;void 0===l&&(l=y);var m=e.globalCompositeOperation;1===l&&"hollow"!==d||(e.globalCompositeOperation="destination-out",u.colorFillStyle(e,255,255,255,1),u.colorStrokeStyle(e,255,255,255,1),u.drawArrowShape(t,e,h,p,c,v,i,a,s),e.globalCompositeOperation=m);var b=t.pstyle(n+"-arrow-color").value;u.colorFillStyle(e,b[0],b[1],b[2],l),u.colorStrokeStyle(e,b[0],b[1],b[2],l),u.drawArrowShape(t,e,d,p,c,v,i,a,s)}}},vc.drawArrowShape=function(e,t,n,i,a,s,l,u,c){var h,d=this,p=this.usePaths()&&"triangle-cross"!==a,g=!1,v=t,y={x:l,y:u},m=e.pstyle("arrow-scale").value,b=this.getArrowWidth(i,m),x=d.arrowShapes[a];if(p){var w=d.arrowPathCache=d.arrowPathCache||[],E=Fe(a),_=w[E];null!=_?(h=t=_,g=!0):(h=t=new Path2D,w[E]=h)}g||(t.beginPath&&t.beginPath(),p?x.draw(t,1,0,{x:0,y:0},1):x.draw(t,b,c,y,i),t.closePath&&t.closePath()),t=v,p&&(t.translate(l,u),t.rotate(c),t.scale(b,b)),"filled"!==n&&"both"!==n||(p?t.fill(h):t.fill()),"hollow"!==n&&"both"!==n||(t.lineWidth=s/(p?b:1),t.lineJoin="miter",p?t.stroke(h):t.stroke()),p&&(t.scale(1/b,1/b),t.rotate(-c),t.translate(-l,-u))};var mc={safeDrawImage:function(e,t,n,i,a,s,l,u,c,h){if(!(a<=0||s<=0||c<=0||h<=0))try{e.drawImage(t,n,i,a,s,l,u,c,h)}catch(e){Ze(e)}},drawInscribedImage:function(e,t,n,i,a){var s=this,l=n.position(),u=l.x,c=l.y,h=n.cy().style(),d=h.getIndexedStyle.bind(h),p=d(n,"background-fit","value",i),g=d(n,"background-repeat","value",i),v=n.width(),y=n.height(),m=2*n.padding(),b=v+("inner"===d(n,"background-width-relative-to","value",i)?0:m),x=y+("inner"===d(n,"background-height-relative-to","value",i)?0:m),w=n._private.rscratch,E="node"===d(n,"background-clip","value",i),_=d(n,"background-image-opacity","value",i)*a,T=d(n,"background-image-smoothing","value",i),L=n.pstyle("corner-radius").value;"auto"!==L&&(L=n.pstyle("corner-radius").pfValue);var D=t.width||t.cachedW,S=t.height||t.cachedH;null!=D&&null!=S||(document.body.appendChild(t),D=t.cachedW=t.width||t.offsetWidth,S=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var k=D,P=S;if("auto"!==d(n,"background-width","value",i)&&(k="%"===d(n,"background-width","units",i)?d(n,"background-width","pfValue",i)*b:d(n,"background-width","pfValue",i)),"auto"!==d(n,"background-height","value",i)&&(P="%"===d(n,"background-height","units",i)?d(n,"background-height","pfValue",i)*x:d(n,"background-height","pfValue",i)),0!==k&&0!==P){if("contain"===p)k*=N=Math.min(b/k,x/P),P*=N;else if("cover"===p){var N;k*=N=Math.max(b/k,x/P),P*=N}var I=u-b/2,M=d(n,"background-position-x","units",i),R=d(n,"background-position-x","pfValue",i);I+="%"===M?(b-k)*R:R;var O=d(n,"background-offset-x","units",i),z=d(n,"background-offset-x","pfValue",i);I+="%"===O?(b-k)*z:z;var G=c-x/2,V=d(n,"background-position-y","units",i),q=d(n,"background-position-y","pfValue",i);G+="%"===V?(x-P)*q:q;var Y=d(n,"background-offset-y","units",i),X=d(n,"background-offset-y","pfValue",i);G+="%"===Y?(x-P)*X:X,w.pathCache&&(I-=u,G-=c,u=0,c=0);var U=e.globalAlpha;e.globalAlpha=_;var H=s.getImgSmoothing(e),j=!1;if("no"===T&&H?(s.setImgSmoothing(e,!1),j=!0):"yes"!==T||H||(s.setImgSmoothing(e,!0),j=!0),"no-repeat"===g)E&&(e.save(),w.pathCache?e.clip(w.pathCache):(s.nodeShapes[s.getNodeShape(n)].draw(e,u,c,b,x,L,w),e.clip())),s.safeDrawImage(e,t,0,0,D,S,I,G,k,P),E&&e.restore();else{var W=e.createPattern(t,g);e.fillStyle=W,s.nodeShapes[s.getNodeShape(n)].draw(e,u,c,b,x,L,w),e.translate(I,G),e.fill(),e.translate(-I,-G)}e.globalAlpha=U,j&&s.setImgSmoothing(e,H)}}},bc={};function roundRect(e,t,n,i,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,l=Math.min(s,i/2,a/2);e.beginPath(),e.moveTo(t+l,n),e.lineTo(t+i-l,n),e.quadraticCurveTo(t+i,n,t+i,n+l),e.lineTo(t+i,n+a-l),e.quadraticCurveTo(t+i,n+a,t+i-l,n+a),e.lineTo(t+l,n+a),e.quadraticCurveTo(t,n+a,t,n+a-l),e.lineTo(t,n+l),e.quadraticCurveTo(t,n,t+l,n),e.closePath()}bc.eleTextBiggerThanMin=function(e,t){if(!t){var n=e.cy().zoom(),i=this.getPixelRatio(),a=Math.ceil(Ot(n*i));t=Math.pow(2,a)}return!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},bc.drawElementText=function(e,t,n,i,a){var s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=this;if(null==i){if(s&&!l.eleTextBiggerThanMin(t))return}else if(!1===i)return;if(t.isNode()){var u=t.pstyle("label");if(!u||!u.value)return;var c=l.getLabelJustification(t);e.textAlign=c,e.textBaseline="bottom"}else{var h=t.element()._private.rscratch.badLine,d=t.pstyle("label"),p=t.pstyle("source-label"),g=t.pstyle("target-label");if(h||(!d||!d.value)&&(!p||!p.value)&&(!g||!g.value))return;e.textAlign="center",e.textBaseline="bottom"}var v,y=!n;n&&(v=n,e.translate(-v.x1,-v.y1)),null==a?(l.drawText(e,t,null,y,s),t.isEdge()&&(l.drawText(e,t,"source",y,s),l.drawText(e,t,"target",y,s))):l.drawText(e,t,a,y,s),n&&e.translate(v.x1,v.y1)},bc.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((t=this.fontCaches[n]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},bc.setupTextStyle=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.pstyle("font-style").strValue,a=t.pstyle("font-size").pfValue+"px",s=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,u=n?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,c=t.pstyle("text-outline-opacity").value*u,h=t.pstyle("color").value,d=t.pstyle("text-outline-color").value;e.font=i+" "+l+" "+a+" "+s,e.lineJoin="round",this.colorFillStyle(e,h[0],h[1],h[2],u),this.colorStrokeStyle(e,d[0],d[1],d[2],c)},bc.getTextAngle=function(e,t){var n,i=e._private.rscratch,a=t?t+"-":"",s=e.pstyle(a+"text-rotation");if("autorotate"===s.strValue){var l=at(i,"labelAngle",t);n=e.isEdge()?l:0}else n="none"===s.strValue?0:s.pfValue;return n},bc.drawText=function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=t._private.rscratch,l=a?t.effectiveOpacity():1;if(!a||0!==l&&0!==t.pstyle("text-opacity").value){"main"===n&&(n=null);var u,c,h=at(s,"labelX",n),d=at(s,"labelY",n),p=this.getLabelText(t,n);if(null!=p&&""!==p&&!isNaN(h)&&!isNaN(d)){this.setupTextStyle(e,t,a);var g,v=n?n+"-":"",y=at(s,"labelWidth",n),m=at(s,"labelHeight",n),b=t.pstyle(v+"text-margin-x").pfValue,x=t.pstyle(v+"text-margin-y").pfValue,w=t.isEdge(),E=t.pstyle("text-halign").value,_=t.pstyle("text-valign").value;switch(w&&(E="center",_="center"),h+=b,d+=x,0!==(g=i?this.getTextAngle(t,n):0)&&(u=h,c=d,e.translate(u,c),e.rotate(g),h=0,d=0),_){case"top":break;case"center":d+=m/2;break;case"bottom":d+=m}var T=t.pstyle("text-background-opacity").value,L=t.pstyle("text-border-opacity").value,D=t.pstyle("text-border-width").pfValue,S=t.pstyle("text-background-padding").pfValue,k=t.pstyle("text-background-shape").strValue,P="round-rectangle"===k||"roundrectangle"===k,N="circle"===k;if(T>0||D>0&&L>0){var I=e.fillStyle,M=e.strokeStyle,R=e.lineWidth,O=t.pstyle("text-background-color").value,z=t.pstyle("text-border-color").value,G=t.pstyle("text-border-style").value,V=T>0,q=D>0&&L>0,Y=h-S;switch(E){case"left":Y-=y;break;case"center":Y-=y/2}var X=d-m-S,U=y+2*S,H=m+2*S;if(V&&(e.fillStyle="rgba(".concat(O[0],",").concat(O[1],",").concat(O[2],",").concat(T*l,")")),q&&(e.strokeStyle="rgba(".concat(z[0],",").concat(z[1],",").concat(z[2],",").concat(L*l,")"),e.lineWidth=D,e.setLineDash))switch(G){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=D/4,e.setLineDash([]);break;default:e.setLineDash([])}if(P?(e.beginPath(),roundRect(e,Y,X,U,H,2)):N?(e.beginPath(),function circle(e,t,n,i,a){var s=Math.min(i,a)/2,l=t+i/2,u=n+a/2;e.beginPath(),e.arc(l,u,s,0,2*Math.PI),e.closePath()}(e,Y,X,U,H)):(e.beginPath(),e.rect(Y,X,U,H)),V&&e.fill(),q&&e.stroke(),q&&"double"===G){var j=D/2;e.beginPath(),P?roundRect(e,Y+j,X+j,U-2*j,H-2*j,2):e.rect(Y+j,X+j,U-2*j,H-2*j),e.stroke()}e.fillStyle=I,e.strokeStyle=M,e.lineWidth=R,e.setLineDash&&e.setLineDash([])}var W=2*t.pstyle("text-outline-width").pfValue;if(W>0&&(e.lineWidth=W),"wrap"===t.pstyle("text-wrap").value){var K=at(s,"labelWrapCachedLines",n),Z=at(s,"labelLineHeight",n),Q=y/2,J=this.getLabelJustification(t);switch("auto"===J||("left"===E?"left"===J?h+=-y:"center"===J&&(h+=-Q):"center"===E?"left"===J?h+=-Q:"right"===J&&(h+=Q):"right"===E&&("center"===J?h+=Q:"right"===J&&(h+=y))),_){case"top":case"center":case"bottom":d-=(K.length-1)*Z}for(var ee=0;ee<K.length;ee++)W>0&&e.strokeText(K[ee],h,d),e.fillText(K[ee],h,d),d+=Z}else W>0&&e.strokeText(p,h,d),e.fillText(p,h,d);0!==g&&(e.rotate(-g),e.translate(-u,-c))}}};var xc={drawNode:function(e,t,n){var i,a,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=this,h=t._private,d=h.rscratch,p=t.position();if(Z(p.x)&&Z(p.y)&&(!u||t.visible())){var g,v,y=u?t.effectiveOpacity():1,m=c.usePaths(),b=!1,x=t.padding();i=t.width()+2*x,a=t.height()+2*x,n&&(v=n,e.translate(-v.x1,-v.y1));for(var w=t.pstyle("background-image").value,E=new Array(w.length),_=new Array(w.length),T=0,L=0;L<w.length;L++){var D=w[L];if(E[L]=null!=D&&"none"!==D){var S=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",L);T++,_[L]=c.getCachedImage(D,S,function(){h.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var k=t.pstyle("background-blacken").value,P=t.pstyle("border-width").pfValue,N=t.pstyle("background-opacity").value*y,I=t.pstyle("border-color").value,M=t.pstyle("border-style").value,R=t.pstyle("border-join").value,O=t.pstyle("border-cap").value,z=t.pstyle("border-position").value,G=t.pstyle("border-dash-pattern").pfValue,V=t.pstyle("border-dash-offset").pfValue,q=t.pstyle("border-opacity").value*y,Y=t.pstyle("outline-width").pfValue,X=t.pstyle("outline-color").value,U=t.pstyle("outline-style").value,H=t.pstyle("outline-opacity").value*y,j=t.pstyle("outline-offset").value,W=t.pstyle("corner-radius").value;"auto"!==W&&(W=t.pstyle("corner-radius").pfValue);var K=function setupShapeColor(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;c.eleFillStyle(e,t,n)},Q=function setupBorderColor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;c.colorStrokeStyle(e,I[0],I[1],I[2],t)},J=function setupOutlineColor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;c.colorStrokeStyle(e,X[0],X[1],X[2],t)},ee=function getPath(e,t,n,i){var a,s=c.nodePathCache=c.nodePathCache||[],l=ze("polygon"===n?n+","+i.join(","):n,""+t,""+e,""+W),u=s[l],h=!1;return null!=u?(a=u,h=!0,d.pathCache=a):(a=new Path2D,s[l]=d.pathCache=a),{path:a,cacheHit:h}},te=t.pstyle("shape").strValue,ne=t.pstyle("shape-polygon-points").pfValue;if(m){e.translate(p.x,p.y);var re=ee(i,a,te,ne);g=re.path,b=re.cacheHit}var ie=function drawShape(){if(!b){var n=p;m&&(n={x:0,y:0}),c.nodeShapes[c.getNodeShape(t)].draw(g||e,n.x,n.y,i,a,W,d)}m?e.fill(g):e.fill()},ae=function drawImages(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=h.backgrounding,s=0,l=0;l<_.length;l++){var u=t.cy().style().getIndexedStyle(t,"background-image-containment","value",l);i&&"over"===u||!i&&"inside"===u?s++:E[l]&&_[l].complete&&!_[l].error&&(s++,c.drawInscribedImage(e,_[l],t,l,n))}h.backgrounding=!(s===T),a!==h.backgrounding&&t.updateStyle(!1)},oe=function drawPie(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;c.hasPie(t)&&(c.drawPie(e,t,s),n&&(m||c.nodeShapes[c.getNodeShape(t)].draw(e,p.x,p.y,i,a,W,d)))},se=function drawStripe(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;c.hasStripe(t)&&(e.save(),m?e.clip(d.pathCache):(c.nodeShapes[c.getNodeShape(t)].draw(e,p.x,p.y,i,a,W,d),e.clip()),c.drawStripe(e,t,s),e.restore(),n&&(m||c.nodeShapes[c.getNodeShape(t)].draw(e,p.x,p.y,i,a,W,d)))},le=function darken(){var t=(k>0?k:-k)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:y),n=k>0?0:255;0!==k&&(c.colorFillStyle(e,n,n,n,t),m?e.fill(g):e.fill())},ue=function drawBorder(){if(P>0){if(e.lineWidth=P,e.lineCap=O,e.lineJoin=R,e.setLineDash)switch(M){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(G),e.lineDashOffset=V;break;case"solid":case"double":e.setLineDash([])}if("center"!==z){if(e.save(),e.lineWidth*=2,"inside"===z)m?e.clip(g):e.clip();else{var t=new Path2D;t.rect(-i/2-P,-a/2-P,i+2*P,a+2*P),t.addPath(g),e.clip(t,"evenodd")}m?e.stroke(g):e.stroke(),e.restore()}else m?e.stroke(g):e.stroke();if("double"===M){e.lineWidth=P/3;var n=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",m?e.stroke(g):e.stroke(),e.globalCompositeOperation=n}e.setLineDash&&e.setLineDash([])}},ce=function drawOutline(){if(Y>0){if(e.lineWidth=Y,e.lineCap="butt",e.setLineDash)switch(U){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var n=p;m&&(n={x:0,y:0});var s=c.getNodeShape(t),l=P;"inside"===z&&(l=0),"outside"===z&&(l*=2);var u,h=(i+l+(Y+j))/i,d=(a+l+(Y+j))/a,g=i*h,v=a*d,y=c.nodeShapes[s].points;if(m)u=ee(g,v,s,y).path;if("ellipse"===s)c.drawEllipsePath(u||e,n.x,n.y,g,v);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(s)){var b=0,x=0,w=0;"round-diamond"===s?b=1.4*(l+j+Y):"round-heptagon"===s?(b=1.075*(l+j+Y),w=-(l/2+j+Y)/35):"round-hexagon"===s?b=1.12*(l+j+Y):"round-pentagon"===s?(b=1.13*(l+j+Y),w=-(l/2+j+Y)/15):"round-tag"===s?(b=1.12*(l+j+Y),x=.07*(l/2+Y+j)):"round-triangle"===s&&(b=(l+j+Y)*(Math.PI/2),w=-(l+j/2+Y)/Math.PI),0!==b&&(g=i*(h=(i+b)/i),["round-hexagon","round-tag"].includes(s)||(v=a*(d=(a+b)/a)));for(var E=g/2,_=v/2,T=(W="auto"===W?Tn(g,v):W)+(l+Y+j)/2,L=new Array(y.length/2),D=new Array(y.length/2),S=0;S<y.length/2;S++)L[S]={x:n.x+x+E*y[2*S],y:n.y+w+_*y[2*S+1]};var k,N,I,M,R=L.length;for(N=L[R-1],k=0;k<R;k++)I=L[k%R],M=L[(k+1)%R],D[k]=getRoundCorner(N,I,M,T),N=I,I=M;c.drawRoundPolygonPath(u||e,n.x+x,n.y+w,i*h,a*d,y,D)}else if(["roundrectangle","round-rectangle"].includes(s))W="auto"===W?Cn(g,v):W,c.drawRoundRectanglePath(u||e,n.x,n.y,g,v,W+(l+Y+j)/2);else if(["cutrectangle","cut-rectangle"].includes(s))W="auto"===W?8:W,c.drawCutRectanglePath(u||e,n.x,n.y,g,v,null,W+(l+Y+j)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(s))W="auto"===W?Cn(g,v):W,c.drawBottomRoundRectanglePath(u||e,n.x,n.y,g,v,W+(l+Y+j)/2);else if("barrel"===s)c.drawBarrelPath(u||e,n.x,n.y,g,v);else if(s.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(s)){y=hn(dn(y,(l+Y+j)/i)),c.drawPolygonPath(u||e,n.x,n.y,i,a,y)}else{y=hn(dn(y,-((l+Y+j)/i))),c.drawPolygonPath(u||e,n.x,n.y,i,a,y)}if(m?e.stroke(u):e.stroke(),"double"===U){e.lineWidth=l/3;var O=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",m?e.stroke(u):e.stroke(),e.globalCompositeOperation=O}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var he=t.pstyle("ghost-offset-x").pfValue,de=t.pstyle("ghost-offset-y").pfValue,pe=t.pstyle("ghost-opacity").value,ge=pe*y;e.translate(he,de),J(),ce(),K(pe*N),ie(),ae(ge,!0),Q(pe*q),ue(),oe(0!==k||0!==P),se(0!==k||0!==P),ae(ge,!1),le(ge),e.translate(-he,-de)}m&&e.translate(-p.x,-p.y),function drawUnderlay(){l&&c.drawNodeUnderlay(e,t,p,i,a)}(),m&&e.translate(p.x,p.y),J(),ce(),K(),ie(),ae(y,!0),Q(),ue(),oe(0!==k||0!==P),se(0!==k||0!==P),ae(y,!1),le(),m&&e.translate(-p.x,-p.y),function drawText(){c.drawElementText(e,t,null,s)}(),function drawOverlay(){l&&c.drawNodeOverlay(e,t,p,i,a)}(),n&&e.translate(v.x1,v.y1)}}},wc=function drawNodeOverlayUnderlay(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,i,a,s){if(n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,h=n.pstyle("".concat(e,"-shape")).value,d=n.pstyle("".concat(e,"-corner-radius")).value;if(u>0){if(i=i||n.position(),null==a||null==s){var p=n.padding();a=n.width()+2*p,s=n.height()+2*p}this.colorFillStyle(t,c[0],c[1],c[2],u),this.nodeShapes[h].draw(t,i.x,i.y,a+2*l,s+2*l,d),t.fill()}}}};xc.drawNodeOverlay=wc("overlay"),xc.drawNodeUnderlay=wc("underlay"),xc.hasPie=function(e){return(e=e[0])._private.hasPie},xc.hasStripe=function(e){return(e=e[0])._private.hasStripe},xc.drawPie=function(e,t,n,i){t=t[0],i=i||t.position();var a,s=t.cy().style(),l=t.pstyle("pie-size"),u=t.pstyle("pie-hole"),c=t.pstyle("pie-start-angle").pfValue,h=i.x,d=i.y,p=t.width(),g=t.height(),v=Math.min(p,g)/2,y=0;if(this.usePaths()&&(h=0,d=0),"%"===l.units?v*=l.pfValue:void 0!==l.pfValue&&(v=l.pfValue/2),"%"===u.units?a=v*u.pfValue:void 0!==u.pfValue&&(a=u.pfValue/2),!(a>=v))for(var m=1;m<=s.pieBackgroundN;m++){var b=t.pstyle("pie-"+m+"-background-size").value,x=t.pstyle("pie-"+m+"-background-color").value,w=t.pstyle("pie-"+m+"-background-opacity").value*n,E=b/100;E+y>1&&(E=1-y);var _=1.5*Math.PI+2*Math.PI*y,T=(_+=c)+2*Math.PI*E;0===b||y>=1||y+E>1||(0===a?(e.beginPath(),e.moveTo(h,d),e.arc(h,d,v,_,T),e.closePath()):(e.beginPath(),e.arc(h,d,v,_,T),e.arc(h,d,a,T,_,!0),e.closePath()),this.colorFillStyle(e,x[0],x[1],x[2],w),e.fill(),y+=E)}},xc.drawStripe=function(e,t,n,i){t=t[0],i=i||t.position();var a=t.cy().style(),s=i.x,l=i.y,u=t.width(),c=t.height(),h=0,d=this.usePaths();e.save();var p=t.pstyle("stripe-direction").value,g=t.pstyle("stripe-size");switch(p){case"vertical":break;case"righward":e.rotate(-Math.PI/2)}var v=u,y=c;"%"===g.units?(v*=g.pfValue,y*=g.pfValue):void 0!==g.pfValue&&(v=g.pfValue,y=g.pfValue),d&&(s=0,l=0),l-=v/2,s-=y/2;for(var m=1;m<=a.stripeBackgroundN;m++){var b=t.pstyle("stripe-"+m+"-background-size").value,x=t.pstyle("stripe-"+m+"-background-color").value,w=t.pstyle("stripe-"+m+"-background-opacity").value*n,E=b/100;E+h>1&&(E=1-h),0===b||h>=1||h+E>1||(e.beginPath(),e.rect(s,l+y*h,v,y*E),e.closePath(),this.colorFillStyle(e,x[0],x[1],x[2],w),e.fill(),h+=E)}e.restore()};var Ec,_c={};function compileShader(e,t,n){var i=e.createShader(t);if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(i));return i}function createTextureCanvas(e,t,n){void 0===n&&(n=t);var i=e.makeOffscreenCanvas(t,n),a=i.context=i.getContext("2d");return i.clear=function(){return a.clearRect(0,0,i.width,i.height)},i.clear(),i}function getEffectivePanZoom(e){var t=e.pixelRatio,n=e.cy.zoom(),i=e.cy.pan();return{zoom:n*t,pan:{x:i.x*t,y:i.y*t}}}function isSimpleShape(e){return"solid"===e.pstyle("background-fill").value&&("none"===e.pstyle("background-image").strValue&&(0===e.pstyle("border-width").value||(0===e.pstyle("border-opacity").value||"solid"===e.pstyle("border-style").value)))}function arrayEqual(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function toWebGLColor(e,t,n){var i=e[0]/255,a=e[1]/255,s=e[2]/255,l=t,u=n||new Array(4);return u[0]=i*l,u[1]=a*l,u[2]=s*l,u[3]=l,u}function indexToVec4(e,t){var n=t||new Array(4);return n[0]=(255&e)/255,n[1]=(e>>8&255)/255,n[2]=(e>>16&255)/255,n[3]=(e>>24&255)/255,n}function vec4ToIndex(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}function getTypeInfo(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function createTypedArray(e,t,n){switch(t){case e.FLOAT:return new Float32Array(n);case e.INT:return new Int32Array(n)}}function createTypedArrayView(e,t,n,i,a,s){switch(t){case e.FLOAT:return new Float32Array(n.buffer,s*i,a);case e.INT:return new Int32Array(n.buffer,s*i,a)}}function createBufferDynamicDraw(e,t,n,i){var a=_slicedToArray(getTypeInfo(e,n),3),s=a[0],l=a[1],u=a[2],c=createTypedArray(e,l,t*s),h=s*u,d=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,d),e.bufferData(e.ARRAY_BUFFER,t*h,e.DYNAMIC_DRAW),e.enableVertexAttribArray(i),l===e.FLOAT?e.vertexAttribPointer(i,s,l,!1,h,0):l===e.INT&&e.vertexAttribIPointer(i,s,l,h,0),e.vertexAttribDivisor(i,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var p=new Array(t),g=0;g<t;g++)p[g]=createTypedArrayView(e,l,c,h,s,g);return d.dataArray=c,d.stride=h,d.size=s,d.getView=function(e){return p[e]},d.setPoint=function(e,t,n){var i=p[e];i[0]=t,i[1]=n},d.bufferSubData=function(t){e.bindBuffer(e.ARRAY_BUFFER,d),t?e.bufferSubData(e.ARRAY_BUFFER,0,c,0,t*s):e.bufferSubData(e.ARRAY_BUFFER,0,c)},d}_c.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=this.cy.window(),n=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/n},_c.paintCache=function(e){for(var t,n=this.paintCaches=this.paintCaches||[],i=!0,a=0;a<n.length;a++)if((t=n[a]).context===e){i=!1;break}return i&&(t={context:e},n.push(t)),t},_c.createGradientStyleFor=function(e,t,n,i,a){var s,l=this.usePaths(),u=n.pstyle(t+"-gradient-stop-colors").value,c=n.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===i)if(n.isEdge()){var h=n.sourceEndpoint(),d=n.targetEndpoint(),p=n.midpoint(),g=zt(h,p),v=zt(d,p);s=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(g,v))}else{var y=l?{x:0,y:0}:n.position(),m=n.paddedWidth(),b=n.paddedHeight();s=e.createRadialGradient(y.x,y.y,0,y.x,y.y,Math.max(m,b))}else if(n.isEdge()){var x=n.sourceEndpoint(),w=n.targetEndpoint();s=e.createLinearGradient(x.x,x.y,w.x,w.y)}else{var E=l?{x:0,y:0}:n.position(),_=n.paddedWidth()/2,T=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":s=e.createLinearGradient(E.x,E.y-T,E.x,E.y+T);break;case"to-top":s=e.createLinearGradient(E.x,E.y+T,E.x,E.y-T);break;case"to-left":s=e.createLinearGradient(E.x+_,E.y,E.x-_,E.y);break;case"to-right":s=e.createLinearGradient(E.x-_,E.y,E.x+_,E.y);break;case"to-bottom-right":case"to-right-bottom":s=e.createLinearGradient(E.x-_,E.y-T,E.x+_,E.y+T);break;case"to-top-right":case"to-right-top":s=e.createLinearGradient(E.x-_,E.y+T,E.x+_,E.y-T);break;case"to-bottom-left":case"to-left-bottom":s=e.createLinearGradient(E.x+_,E.y-T,E.x-_,E.y+T);break;case"to-top-left":case"to-left-top":s=e.createLinearGradient(E.x+_,E.y+T,E.x-_,E.y-T)}}if(!s)return null;for(var L=c.length===u.length,D=u.length,S=0;S<D;S++)s.addColorStop(L?c[S]:S/(D-1),"rgba("+u[S][0]+","+u[S][1]+","+u[S][2]+","+a+")");return s},_c.gradientFillStyle=function(e,t,n,i){var a=this.createGradientStyleFor(e,"background",t,n,i);if(!a)return null;e.fillStyle=a},_c.colorFillStyle=function(e,t,n,i,a){e.fillStyle="rgba("+t+","+n+","+i+","+a+")"},_c.eleFillStyle=function(e,t,n){var i=t.pstyle("background-fill").value;if("linear-gradient"===i||"radial-gradient"===i)this.gradientFillStyle(e,t,i,n);else{var a=t.pstyle("background-color").value;this.colorFillStyle(e,a[0],a[1],a[2],n)}},_c.gradientStrokeStyle=function(e,t,n,i){var a=this.createGradientStyleFor(e,"line",t,n,i);if(!a)return null;e.strokeStyle=a},_c.colorStrokeStyle=function(e,t,n,i,a){e.strokeStyle="rgba("+t+","+n+","+i+","+a+")"},_c.eleStrokeStyle=function(e,t,n){var i=t.pstyle("line-fill").value;if("linear-gradient"===i||"radial-gradient"===i)this.gradientStrokeStyle(e,t,i,n);else{var a=t.pstyle("line-color").value;this.colorStrokeStyle(e,a[0],a[1],a[2],n)}},_c.matchCanvasSize=function(e){var t=this,n=t.data,i=t.findContainerClientCoords(),a=i[2],s=i[3],l=t.getPixelRatio(),u=t.motionBlurPxRatio;e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]&&e!==t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG]||(l=u);var c,h=a*l,d=s*l;if(h!==t.canvasWidth||d!==t.canvasHeight){t.fontCaches=null;var p=n.canvasContainer;p.style.width=a+"px",p.style.height=s+"px";for(var g=0;g<t.CANVAS_LAYERS;g++)(c=n.canvases[g]).width=h,c.height=d,c.style.width=a+"px",c.style.height=s+"px";for(g=0;g<t.BUFFER_COUNT;g++)(c=n.bufferCanvases[g]).width=h,c.height=d,c.style.width=a+"px",c.style.height=s+"px";t.textureMult=1,l<=1&&(c=n.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,c.width=h*t.textureMult,c.height=d*t.textureMult),t.canvasWidth=h,t.canvasHeight=d,t.pixelRatio=l}},_c.renderTo=function(e,t,n,i){this.render({forcedContext:e,forcedZoom:t,forcedPan:n,drawAllLayers:!0,forcedPxRatio:i})},_c.clearCanvas=function(){var e=this,t=e.data;function clear(t){t.clearRect(0,0,e.canvasWidth,e.canvasHeight)}clear(t.contexts[e.NODE]),clear(t.contexts[e.DRAG])},_c.render=function(e){var t=this;e=e||tt();var n=t.cy,i=e.forcedContext,a=e.drawAllLayers,s=e.drawOnlyNodeLayer,l=e.forcedZoom,u=e.forcedPan,c=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,h=t.data,d=h.canvasNeedsRedraw,p=t.textureOnViewport&&!i&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),g=void 0!==e.motionBlur?e.motionBlur:t.motionBlur,v=t.motionBlurPxRatio,y=n.hasCompoundNodes(),m=t.hoverData.draggingEles,b=!(!t.hoverData.selecting&&!t.touchData.selecting),x=g=g&&!i&&t.motionBlurEnabled&&!b;i||(t.prevPxRatio!==c&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=c),!i&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),g&&(null==t.mbFrames&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(x=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!p&&(d[t.NODE]=!0,d[t.SELECT_BOX]=!0);var w=n.style(),E=n.zoom(),_=void 0!==l?l:E,T=n.pan(),L={x:T.x,y:T.y},D={zoom:E,pan:{x:T.x,y:T.y}},S=t.prevViewport;void 0===S||D.zoom!==S.zoom||D.pan.x!==S.pan.x||D.pan.y!==S.pan.y||m&&!y||(t.motionBlurPxRatio=1),u&&(L=u),_*=c,L.x*=c,L.y*=c;var k=t.getCachedZSortedEles();function mbclear(e,n,i,a,s){var l=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",t.colorFillStyle(e,255,255,255,t.motionBlurTransparency),e.fillRect(n,i,a,s),e.globalCompositeOperation=l}function setContextTransform(e,n){var s,c,d,p;t.clearingMotionBlur||e!==h.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]&&e!==h.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]?(s=L,c=_,d=t.canvasWidth,p=t.canvasHeight):(s={x:T.x*v,y:T.y*v},c=E*v,d=t.canvasWidth*v,p=t.canvasHeight*v),e.setTransform(1,0,0,1,0,0),"motionBlur"===n?mbclear(e,0,0,d,p):i||void 0!==n&&!n||e.clearRect(0,0,d,p),a||(e.translate(s.x,s.y),e.scale(c,c)),u&&e.translate(u.x,u.y),l&&e.scale(l,l)}if(p||(t.textureDrawLastFrame=!1),p){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=n.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var P=t.data.bufferContexts[t.TEXTURE_BUFFER];P.setTransform(1,0,0,1,0,0),P.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:P,drawOnlyNodeLayer:!0,forcedPxRatio:c*t.textureMult}),(D=t.textureCache.viewport={zoom:n.zoom(),pan:n.pan(),width:t.canvasWidth,height:t.canvasHeight}).mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}d[t.DRAG]=!1,d[t.NODE]=!1;var N=h.contexts[t.NODE],I=t.textureCache.texture;D=t.textureCache.viewport;N.setTransform(1,0,0,1,0,0),g?mbclear(N,0,0,D.width,D.height):N.clearRect(0,0,D.width,D.height);var M=w.core("outside-texture-bg-color").value,R=w.core("outside-texture-bg-opacity").value;t.colorFillStyle(N,M[0],M[1],M[2],R),N.fillRect(0,0,D.width,D.height);E=n.zoom();setContextTransform(N,!1),N.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/c,D.height/D.zoom/c),N.drawImage(I,D.mpan.x,D.mpan.y,D.width/D.zoom/c,D.height/D.zoom/c)}else t.textureOnViewport&&!i&&(t.textureCache=null);var O=n.extent(),z=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),G=t.hideEdgesOnViewport&&z,V=[];if(V[t.NODE]=!d[t.NODE]&&g&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,V[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),V[t.DRAG]=!d[t.DRAG]&&g&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,V[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),d[t.NODE]||a||s||V[t.NODE]){var q=g&&!V[t.NODE]&&1!==v;setContextTransform(N=i||(q?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:h.contexts[t.NODE]),g&&!q?"motionBlur":void 0),G?t.drawCachedNodes(N,k.nondrag,c,O):t.drawLayeredElements(N,k.nondrag,c,O),t.debug&&t.drawDebugPoints(N,k.nondrag),a||g||(d[t.NODE]=!1)}if(!s&&(d[t.DRAG]||a||V[t.DRAG])){q=g&&!V[t.DRAG]&&1!==v;setContextTransform(N=i||(q?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:h.contexts[t.DRAG]),g&&!q?"motionBlur":void 0),G?t.drawCachedNodes(N,k.drag,c,O):t.drawCachedElements(N,k.drag,c,O),t.debug&&t.drawDebugPoints(N,k.drag),a||g||(d[t.DRAG]=!1)}if(this.drawSelectionRectangle(e,setContextTransform),g&&1!==v){var Y=h.contexts[t.NODE],X=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],U=h.contexts[t.DRAG],H=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],j=function drawMotionBlur(e,n,i){e.setTransform(1,0,0,1,0,0),i||!x?e.clearRect(0,0,t.canvasWidth,t.canvasHeight):mbclear(e,0,0,t.canvasWidth,t.canvasHeight);var a=v;e.drawImage(n,0,0,t.canvasWidth*a,t.canvasHeight*a,0,0,t.canvasWidth,t.canvasHeight)};(d[t.NODE]||V[t.NODE])&&(j(Y,X,V[t.NODE]),d[t.NODE]=!1),(d[t.DRAG]||V[t.DRAG])&&(j(U,H,V[t.DRAG]),d[t.DRAG]=!1)}t.prevViewport=D,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),g&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!p,t.mbFrames=0,d[t.NODE]=!0,d[t.DRAG]=!0,t.redraw()},100)),i||n.emit("render")},_c.drawSelectionRectangle=function(e,t){var n=this,i=n.cy,a=n.data,s=i.style(),l=e.drawOnlyNodeLayer,u=e.drawAllLayers,c=a.canvasNeedsRedraw,h=e.forcedContext;if(n.showFps||!l&&c[n.SELECT_BOX]&&!u){var d=h||a.contexts[n.SELECT_BOX];if(t(d),1==n.selection[4]&&(n.hoverData.selecting||n.touchData.selecting)){var p=n.cy.zoom(),g=s.core("selection-box-border-width").value/p;d.lineWidth=g,d.fillStyle="rgba("+s.core("selection-box-color").value[0]+","+s.core("selection-box-color").value[1]+","+s.core("selection-box-color").value[2]+","+s.core("selection-box-opacity").value+")",d.fillRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]),g>0&&(d.strokeStyle="rgba("+s.core("selection-box-border-color").value[0]+","+s.core("selection-box-border-color").value[1]+","+s.core("selection-box-border-color").value[2]+","+s.core("selection-box-opacity").value+")",d.strokeRect(n.selection[0],n.selection[1],n.selection[2]-n.selection[0],n.selection[3]-n.selection[1]))}if(a.bgActivePosistion&&!n.hoverData.selecting){p=n.cy.zoom();var v=a.bgActivePosistion;d.fillStyle="rgba("+s.core("active-bg-color").value[0]+","+s.core("active-bg-color").value[1]+","+s.core("active-bg-color").value[2]+","+s.core("active-bg-opacity").value+")",d.beginPath(),d.arc(v.x,v.y,s.core("active-bg-size").pfValue/p,0,2*Math.PI),d.fill()}var y=n.lastRedrawTime;if(n.showFps&&y){y=Math.round(y);var m=Math.round(1e3/y),b="1 frame = "+y+" ms = "+m+" fps";if(d.setTransform(1,0,0,1,0,0),d.fillStyle="rgba(255, 0, 0, 0.75)",d.strokeStyle="rgba(255, 0, 0, 0.75)",d.font="30px Arial",!Ec){var x=d.measureText(b);Ec=x.actualBoundingBoxAscent}d.fillText(b,0,Ec);d.strokeRect(0,Ec+10,250,20),d.fillRect(0,Ec+10,250*Math.min(m/60,1),20)}u||(c[n.SELECT_BOX]=!1)}};var Cc="undefined"!=typeof Float32Array?Float32Array:Array;function create(){var e=new Cc(9);return Cc!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function translate(e,t,n){var i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],h=t[6],d=t[7],p=t[8],g=n[0],v=n[1];return e[0]=i,e[1]=a,e[2]=s,e[3]=l,e[4]=u,e[5]=c,e[6]=g*i+v*l+h,e[7]=g*a+v*u+d,e[8]=g*s+v*c+p,e}function rotate(e,t,n){var i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],h=t[6],d=t[7],p=t[8],g=Math.sin(n),v=Math.cos(n);return e[0]=v*i+g*l,e[1]=v*a+g*u,e[2]=v*s+g*c,e[3]=v*l-g*i,e[4]=v*u-g*a,e[5]=v*c-g*s,e[6]=h,e[7]=d,e[8]=p,e}function scale(e,t,n){var i=n[0],a=n[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Tc=function(){return _createClass(function Atlas(e,t,n,i){_classCallCheck(this,Atlas),this.debugID=Math.floor(1e4*Math.random()),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(e,t,t),this.scratch=i(e,t,this.texHeight,"scratch")},[{key:"lock",value:function lock(){this.locked=!0}},{key:"getKeys",value:function getKeys(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function getScale(e){var t=e.w,n=e.h,i=this.texHeight,a=this.texSize,s=i/n,l=t*s,u=n*s;return l>a&&(l=t*(s=a/t),u=n*s),{scale:s,texW:l,texH:u}}},{key:"draw",value:function draw(e,t,n){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var a=this.texSize,s=this.texRows,l=this.texHeight,u=this.getScale(t),c=u.scale,h=u.texW,d=u.texH,p=function drawAt(e,i){if(n&&i){var a=i.context,s=e.x,u=e.row,h=s,d=l*u;a.save(),a.translate(h,d),a.scale(c,c),n(a,t),a.restore()}},g=[null,null],v=function drawNormal(){p(i.freePointer,i.canvas),g[0]={x:i.freePointer.x,y:i.freePointer.row*l,w:h,h:d},g[1]={x:i.freePointer.x+h,y:i.freePointer.row*l,w:0,h:d},i.freePointer.x+=h,i.freePointer.x==a&&(i.freePointer.x=0,i.freePointer.row++)},y=function moveToStartOfNextRow(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+h<=a)v();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===a?(y(),v()):this.enableWrapping?function drawWrapped(){var e=i.scratch,t=i.canvas;e.clear(),p({x:0,row:0},e);var n=a-i.freePointer.x,s=h-n,u=l,c=i.freePointer.x,v=i.freePointer.row*l,y=n;t.context.drawImage(e,0,0,y,u,c,v,y,u),g[0]={x:c,y:v,w:y,h:d};var m=n,b=(i.freePointer.row+1)*l,x=s;t&&t.context.drawImage(e,m,0,x,u,0,b,x,u),g[1]={x:0,y:b,w:x,h:d},i.freePointer.x=s,i.freePointer.row++}():(y(),v())}return this.keyToLocation.set(e,g),this.needsBuffer=!0,g}},{key:"getOffsets",value:function getOffsets(e){return this.keyToLocation.get(e)}},{key:"isEmpty",value:function isEmpty(){return 0===this.freePointer.x&&0===this.freePointer.row}},{key:"canFit",value:function canFit(e){if(this.locked)return!1;var t=this.texSize,n=this.texRows,i=this.getScale(e).texW;return!(this.freePointer.x+i>t)||this.freePointer.row<n-1}},{key:"bufferIfNeeded",value:function bufferIfNeeded(e){this.texture||(this.texture=function createTexture(e,t){var n=e.createTexture();return n.buffer=function(t){e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},n.deleteTexture=function(){e.deleteTexture(n)},n}(e,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function dispose(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),Lc=function(){return _createClass(function AtlasCollection(e,t,n,i){_classCallCheck(this,AtlasCollection),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set},[{key:"getKeys",value:function getKeys(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function _createAtlas(){var e=this.r,t=this.texSize,n=this.texRows,i=this.createTextureCanvas;return new Tc(e,t,n,i)}},{key:"_getScratchCanvas",value:function _getScratchCanvas(){if(!this.scratch){var e=this.r,t=this.texSize,n=this.texRows,i=this.createTextureCanvas,a=Math.floor(t/n);this.scratch=i(e,t,a,"scratch")}return this.scratch}},{key:"draw",value:function draw(e,t,n){var i=this.styleKeyToAtlas.get(e);return i||((i=this.atlases[this.atlases.length-1])&&i.canFit(t)||(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(e,t,n),this.styleKeyToAtlas.set(e,i)),i}},{key:"getAtlas",value:function getAtlas(e){return this.styleKeyToAtlas.get(e)}},{key:"hasAtlas",value:function hasAtlas(e){return this.styleKeyToAtlas.has(e)}},{key:"markKeyForGC",value:function markKeyForGC(e){this.markedKeys.add(e)}},{key:"gc",value:function gc(){var e=this,t=this.markedKeys;if(0!==t.size){var n,i=[],a=new Map,s=null,l=_createForOfIteratorHelper(this.atlases);try{var u=function _loop(){var l=n.value,u=l.getKeys(),c=function intersection(e,t){return e.intersection?e.intersection(t):new Set(_toConsumableArray(e).filter(function(e){return t.has(e)}))}(t,u);if(0===c.size)return i.push(l),u.forEach(function(e){return a.set(e,l)}),1;s||(s=e._createAtlas(),i.push(s));var h,d=_createForOfIteratorHelper(u);try{for(d.s();!(h=d.n()).done;){var p=h.value;if(!c.has(p)){var g=_slicedToArray(l.getOffsets(p),2),v=g[0],y=g[1];s.canFit({w:v.w+y.w,h:v.h})||(s.lock(),s=e._createAtlas(),i.push(s)),l.canvas&&(e._copyTextureToNewAtlas(p,l,s),a.set(p,s))}}}catch(e){d.e(e)}finally{d.f()}l.dispose()};for(l.s();!(n=l.n()).done;)u()}catch(e){l.e(e)}finally{l.f()}this.atlases=i,this.styleKeyToAtlas=a,this.markedKeys=new Set}else console.log("nothing to garbage collect")}},{key:"_copyTextureToNewAtlas",value:function _copyTextureToNewAtlas(e,t,n){var i=_slicedToArray(t.getOffsets(e),2),a=i[0],s=i[1];if(0===s.w)n.draw(e,a,function(e){e.drawImage(t.canvas,a.x,a.y,a.w,a.h,0,0,a.w,a.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(t.canvas,a.x,a.y,a.w,a.h,0,0,a.w,a.h),l.context.drawImage(t.canvas,s.x,s.y,s.w,s.h,a.w,0,s.w,s.h);var u=a.w+s.w,c=a.h;n.draw(e,{w:u,h:c},function(e){e.drawImage(l,0,0,u,c,0,0,u,c)})}}},{key:"getCounts",value:function getCounts(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();var Dc=function(){return _createClass(function AtlasManager(e,t){_classCallCheck(this,AtlasManager),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map},[{key:"getAtlasSize",value:function getAtlasSize(){return this.atlasSize}},{key:"addAtlasCollection",value:function addAtlasCollection(e,t){var n=this.globalOptions,i=n.webglTexSize,a=n.createTextureCanvas,s=t.texRows,l=this._cacheScratchCanvas(a),u=new Lc(this.r,i,s,l);this.collections.set(e,u)}},{key:"addRenderType",value:function addRenderType(e,t){var n=t.collection;if(!this.collections.has(n))throw new Error("invalid atlas collection name '".concat(n,"'"));var i=this.collections.get(n),a=me({type:e,atlasCollection:i},t);this.renderTypes.set(e,a)}},{key:"getRenderTypeOpts",value:function getRenderTypeOpts(e){return this.renderTypes.get(e)}},{key:"getAtlasCollection",value:function getAtlasCollection(e){return this.collections.get(e)}},{key:"_cacheScratchCanvas",value:function _cacheScratchCanvas(e){var t=-1,n=-1,i=null;return function(a,s,l,u){return u?(i&&s==t&&l==n||(t=s,n=l,i=e(a,s,l)),i):e(a,s,l)}}},{key:"_key",value:function _key(e,t){return"".concat(e,"-").concat(t)}},{key:"invalidate",value:function invalidate(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.forceRedraw,s=void 0!==a&&a,l=i.filterEle,u=void 0===l?function(){return!0}:l,c=i.filterType,h=void 0===c?function(){return!0}:c,d=!1,p=!1,g=_createForOfIteratorHelper(e);try{for(g.s();!(t=g.n()).done;){var v=t.value;if(u(v)){var y,m=_createForOfIteratorHelper(this.renderTypes.values());try{var b=function _loop2(){var e=y.value,t=e.type;if(h(t)){var i=n.collections.get(e.collection),a=e.getKey(v),l=Array.isArray(a)?a:[a];if(s)l.forEach(function(e){return i.markKeyForGC(e)}),p=!0;else{var u=e.getID?e.getID(v):v.id(),c=n._key(t,u),g=n.typeAndIdToKey.get(c);void 0===g||arrayEqual(l,g)||(d=!0,n.typeAndIdToKey.delete(c),g.forEach(function(e){return i.markKeyForGC(e)}))}}};for(m.s();!(y=m.n()).done;)b()}catch(e){m.e(e)}finally{m.f()}}}}catch(e){g.e(e)}finally{g.f()}return p&&(this.gc(),d=!1),d}},{key:"gc",value:function gc(){var e,t=_createForOfIteratorHelper(this.collections.values());try{for(t.s();!(e=t.n()).done;){e.value.gc()}}catch(e){t.e(e)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function getOrCreateAtlas(e,t,n,i){var a=this.renderTypes.get(t),s=this.collections.get(a.collection),l=!1,u=s.draw(i,n,function(t){a.drawClipped?(t.save(),t.beginPath(),t.rect(0,0,n.w,n.h),t.clip(),a.drawElement(t,e,n,!0,!0),t.restore()):a.drawElement(t,e,n,!0,!0),l=!0});if(l){var c=a.getID?a.getID(e):e.id(),h=this._key(t,c);this.typeAndIdToKey.has(h)?this.typeAndIdToKey.get(h).push(i):this.typeAndIdToKey.set(h,[i])}return u}},{key:"getAtlasInfo",value:function getAtlasInfo(e,t){var n=this,i=this.renderTypes.get(t),a=i.getKey(e);return(Array.isArray(a)?a:[a]).map(function(a){var s=i.getBoundingBox(e,a),l=n.getOrCreateAtlas(e,t,s,a),u=_slicedToArray(l.getOffsets(a),2),c=u[0];return{atlas:l,tex:c,tex1:c,tex2:u[1],bb:s}})}},{key:"getDebugInfo",value:function getDebugInfo(){var e,t=[],n=_createForOfIteratorHelper(this.collections);try{for(n.s();!(e=n.n()).done;){var i=_slicedToArray(e.value,2),a=i[0],s=i[1].getCounts(),l=s.keyCount,u=s.atlasCount;t.push({type:a,keyCount:l,atlasCount:u})}}catch(e){n.e(e)}finally{n.f()}return t}}])}(),Ac=function(){return _createClass(function AtlasBatchManager(e){_classCallCheck(this,AtlasBatchManager),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]},[{key:"getMaxAtlasesPerBatch",value:function getMaxAtlasesPerBatch(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function getAtlasSize(){return this.atlasSize}},{key:"getIndexArray",value:function getIndexArray(){return Array.from({length:this.maxAtlasesPerBatch},function(e,t){return t})}},{key:"startBatch",value:function startBatch(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function getAtlasCount(){return this.batchAtlases.length}},{key:"getAtlases",value:function getAtlases(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function canAddToCurrentBatch(e){return this.batchAtlases.length!==this.maxAtlasesPerBatch||this.batchAtlases.includes(e)}},{key:"getAtlasIndexForBatch",value:function getAtlasIndexForBatch(e){var t=this.batchAtlases.indexOf(e);if(t<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(e),t=this.batchAtlases.length-1}return t}}])}(),Sc={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},kc=1,Pc=2,Nc=function(){return _createClass(function ElementDrawingWebGL(e,t,n){_classCallCheck(this,ElementDrawingWebGL),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=createTextureCanvas,this.atlasManager=new Dc(e,n),this.batchManager=new Ac(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Sc.SCREEN),this.pickingProgram=this._createShaderProgram(Sc.PICKING),this.vao=this._createVAO()},[{key:"addAtlasCollection",value:function addAtlasCollection(e,t){this.atlasManager.addAtlasCollection(e,t)}},{key:"addTextureAtlasRenderType",value:function addTextureAtlasRenderType(e,t){this.atlasManager.addRenderType(e,t)}},{key:"addSimpleShapeRenderType",value:function addSimpleShapeRenderType(e,t){this.simpleShapeOptions.set(e,t)}},{key:"invalidate",value:function invalidate(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type,n=this.atlasManager;return t?n.invalidate(e,{filterType:function filterType(e){return e===t},forceRedraw:!0}):n.invalidate(e)}},{key:"gc",value:function gc(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function _createShaderProgram(e){var t=this.gl,n="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; // a vertex from the unit square\n      \n      in mat3 aTransform; // used to transform verticies, eg into a bounding box\n      in int aVertType; // the type of thing we are rendering\n\n      // the z-index that is output when using picking mode\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex; // x/y/w/h of texture in atlas\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in vec2 aLineWidth; // also used for node border width\n\n      // simple shapes\n      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]\n      in vec4 aColor; // also used for edges\n      in vec4 aBorderColor; // aLineWidth is used for border width\n\n      // output values passed to the fragment shader\n      out vec2 vTexCoord;\n      out vec4 vColor;\n      out vec2 vPosition;\n      // flat values are not interpolated\n      flat out int vAtlasId; \n      flat out int vVertType;\n      flat out vec2 vTopRight;\n      flat out vec2 vBotLeft;\n      flat out vec4 vCornerRadius;\n      flat out vec4 vBorderColor;\n      flat out vec2 vBorderWidth;\n      flat out vec4 vIndex;\n      \n      void main(void) {\n        int vid = gl_VertexID;\n        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below\n\n        if(aVertType == ".concat(0,") {\n          float texX = aTex.x; // texture coordinates\n          float texY = aTex.y;\n          float texW = aTex.z;\n          float texH = aTex.w;\n\n          if(vid == 1 || vid == 2 || vid == 4) {\n            texX += texW;\n          }\n          if(vid == 2 || vid == 4 || vid == 5) {\n            texY += texH;\n          }\n\n          float d = float(uAtlasSize);\n          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(4," || aVertType == ").concat(7," \n             || aVertType == ").concat(5," || aVertType == ").concat(6,") { // simple shapes\n\n          // the bounding box is needed by the fragment shader\n          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat\n          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat\n          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated\n\n          // calculations are done in the fragment shader, just pass these along\n          vColor = aColor;\n          vCornerRadius = aCornerRadius;\n          vBorderColor = aBorderColor;\n          vBorderWidth = aLineWidth;\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(1,") {\n          vec2 source = aPointAPointB.xy;\n          vec2 target = aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          // stretch the unit square into a long skinny rectangle\n          vec2 xBasis = target - source;\n          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;\n\n          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(2,") {\n          vec2 pointA = aPointAPointB.xy;\n          vec2 pointB = aPointAPointB.zw;\n          vec2 pointC = aPointCPointD.xy;\n          vec2 pointD = aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 p0, p1, p2, pos;\n          if(position.x == 0.0) { // The left side of the unit square\n            p0 = pointA;\n            p1 = pointB;\n            p2 = pointC;\n            pos = position;\n          } else { // The right side of the unit square, use same approach but flip the geometry upside down\n            p0 = pointD;\n            p1 = pointC;\n            p2 = pointB;\n            pos = vec2(0.0, -position.y);\n          }\n\n          vec2 p01 = p1 - p0;\n          vec2 p12 = p2 - p1;\n          vec2 p21 = p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent = normalize(normalize(p12) + normalize(p01));\n          vec2 normal = vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -> p1.\n          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma = sign(dot(p01 + p21, normal));\n          float width = aLineWidth[0];\n\n          if(sign(pos.y) == -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(3," && vid < 3) {\n          // massage the first triangle into an edge arrow\n          if(vid == 0)\n            position = vec2(-0.15, -0.3);\n          if(vid == 1)\n            position = vec2(  0.0,  0.0);\n          if(vid == 2)\n            position = vec2( 0.15, -0.3);\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor = aColor;\n        }\n        else {\n          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId = aAtlasId;\n        vVertType = aVertType;\n        vIndex = aIndex;\n      }\n    "),i=this.batchManager.getIndexArray(),a="#version 300 es\n      precision highp float;\n\n      // declare texture unit for each texture atlas in the batch\n      ".concat(i.map(function(e){return"uniform sampler2D uTexture".concat(e,";")}).join("\n\t"),"\n\n      uniform vec4 uBGColor;\n      uniform float uZoom;\n\n      in vec2 vTexCoord;\n      in vec4 vColor;\n      in vec2 vPosition; // model coordinates\n\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n      flat in vec2 vTopRight;\n      flat in vec2 vBotLeft;\n      flat in vec4 vCornerRadius;\n      flat in vec4 vBorderColor;\n      flat in vec2 vBorderWidth;\n\n      out vec4 outColor;\n\n      ").concat("\n  float circleSD(vec2 p, float r) {\n    return distance(vec2(0), p) - r; // signed distance\n  }\n","\n      ").concat("\n  float rectangleSD(vec2 p, vec2 b) {\n    vec2 d = abs(p)-b;\n    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);\n  }\n","\n      ").concat("\n  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {\n    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;\n    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;\n    vec2 q = abs(p) - b + cr.x;\n    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;\n  }\n","\n      ").concat("\n  float ellipseSD(vec2 p, vec2 ab) {\n    p = abs( p ); // symmetry\n\n    // find root with Newton solver\n    vec2 q = ab*(p-ab);\n    float w = (q.x<q.y)? 1.570796327 : 0.0;\n    for( int i=0; i<5; i++ ) {\n      vec2 cs = vec2(cos(w),sin(w));\n      vec2 u = ab*vec2( cs.x,cs.y);\n      vec2 v = ab*vec2(-cs.y,cs.x);\n      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));\n    }\n    \n    // compute final point and distance\n    float d = length(p-ab*vec2(cos(w),sin(w)));\n    \n    // return signed distance\n    return (dot(p/ab,p/ab)>1.0) ? d : -d;\n  }\n","\n\n      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha\n        return vec4( \n          top.rgb + (bot.rgb * (1.0 - top.a)),\n          top.a   + (bot.a   * (1.0 - top.a)) \n        );\n      }\n\n      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance\n        // scale to the zoom level so that borders don't look blurry when zoomed in\n        // note 1.5 is an aribitrary value chosen because it looks good\n        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); \n      }\n\n      void main(void) {\n        if(vVertType == ").concat(0,") {\n          // look up the texel from the texture unit\n          ").concat(i.map(function(e){return"if(vAtlasId == ".concat(e,") outColor = texture(uTexture").concat(e,", vTexCoord);")}).join("\n\telse "),"\n        } \n        else if(vVertType == ").concat(3,") {\n          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';\n          outColor = blend(vColor, uBGColor);\n          outColor.a = 1.0; // make opaque, masks out line under arrow\n        }\n        else if(vVertType == ").concat(4," && vBorderWidth == vec2(0.0)) { // simple rectangle with no border\n          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done\n        }\n        else if(vVertType == ").concat(4," || vVertType == ").concat(7," \n          || vVertType == ").concat(5," || vVertType == ").concat(6,") { // use SDF\n\n          float outerBorder = vBorderWidth[0];\n          float innerBorder = vBorderWidth[1];\n          float borderPadding = outerBorder * 2.0;\n          float w = vTopRight.x - vBotLeft.x - borderPadding;\n          float h = vTopRight.y - vBotLeft.y - borderPadding;\n          vec2 b = vec2(w/2.0, h/2.0); // half width, half height\n          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center\n\n          float d; // signed distance\n          if(vVertType == ").concat(4,") {\n            d = rectangleSD(p, b);\n          } else if(vVertType == ").concat(7," && w == h) {\n            d = circleSD(p, b.x); // faster than ellipse\n          } else if(vVertType == ").concat(7,") {\n            d = ellipseSD(p, b);\n          } else {\n            d = roundRectangleSD(p, b, vCornerRadius.wzyx);\n          }\n\n          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling\n          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box\n          if(d > 0.0) {\n            if(d > outerBorder) {\n              discard;\n            } else {\n              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);\n            }\n          } else {\n            if(d > innerBorder) {\n              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;\n              vec4 innerBorderColor = blend(vBorderColor, vColor);\n              outColor = distInterp(innerBorderColor, outerColor, d);\n            } \n            else {\n              vec4 outerColor;\n              if(innerBorder == 0.0 && outerBorder == 0.0) {\n                outerColor = vec4(0);\n              } else if(innerBorder == 0.0) {\n                outerColor = vBorderColor;\n              } else {\n                outerColor = blend(vBorderColor, vColor);\n              }\n              outColor = distInterp(vColor, outerColor, d - innerBorder);\n            }\n          }\n        }\n        else {\n          outColor = vColor;\n        }\n\n        ").concat(e.picking?"if(outColor.a == 0.0) discard;\n             else outColor = vIndex;":"","\n      }\n    "),s=function createProgram(e,t,n){var i=compileShader(e,e.VERTEX_SHADER,t),a=compileShader(e,e.FRAGMENT_SHADER,n),s=e.createProgram();if(e.attachShader(s,i),e.attachShader(s,a),e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS))throw new Error("Could not initialize shaders");return s}(t,n,a);s.aPosition=t.getAttribLocation(s,"aPosition"),s.aIndex=t.getAttribLocation(s,"aIndex"),s.aVertType=t.getAttribLocation(s,"aVertType"),s.aTransform=t.getAttribLocation(s,"aTransform"),s.aAtlasId=t.getAttribLocation(s,"aAtlasId"),s.aTex=t.getAttribLocation(s,"aTex"),s.aPointAPointB=t.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=t.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=t.getAttribLocation(s,"aLineWidth"),s.aColor=t.getAttribLocation(s,"aColor"),s.aCornerRadius=t.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=t.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=t.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=t.getUniformLocation(s,"uAtlasSize"),s.uBGColor=t.getUniformLocation(s,"uBGColor"),s.uZoom=t.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var l=0;l<this.batchManager.getMaxAtlasesPerBatch();l++)s.uTextures.push(t.getUniformLocation(s,"uTexture".concat(l)));return s}},{key:"_createVAO",value:function _createVAO(){var e=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=e.length/2;var t=this.maxInstances,n=this.gl,i=this.program,a=n.createVertexArray();return n.bindVertexArray(a),function createBufferStaticDraw(e,t,n,i){var a=_slicedToArray(getTypeInfo(e,t),2),s=a[0],l=a[1],u=createTypedArray(e,l,i),c=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,u,e.STATIC_DRAW),l===e.FLOAT?e.vertexAttribPointer(n,s,l,!1,0,0):l===e.INT&&e.vertexAttribIPointer(n,s,l,0,0),e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,null),c}(n,"vec2",i.aPosition,e),this.transformBuffer=function create3x3MatrixBufferDynamicDraw(e,t,n){for(var i=new Float32Array(9*t),a=new Array(t),s=0;s<t;s++){var l=9*s*4;a[s]=new Float32Array(i.buffer,l,9)}var u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,i.byteLength,e.DYNAMIC_DRAW);for(var c=0;c<3;c++){var h=n+c;e.enableVertexAttribArray(h),e.vertexAttribPointer(h,3,e.FLOAT,!1,36,12*c),e.vertexAttribDivisor(h,1)}return e.bindBuffer(e.ARRAY_BUFFER,null),u.getMatrixView=function(e){return a[e]},u.setData=function(e,t){a[t].set(e,0)},u.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferSubData(e.ARRAY_BUFFER,0,i)},u}(n,t,i.aTransform),this.indexBuffer=createBufferDynamicDraw(n,t,"vec4",i.aIndex),this.vertTypeBuffer=createBufferDynamicDraw(n,t,"int",i.aVertType),this.atlasIdBuffer=createBufferDynamicDraw(n,t,"int",i.aAtlasId),this.texBuffer=createBufferDynamicDraw(n,t,"vec4",i.aTex),this.pointAPointBBuffer=createBufferDynamicDraw(n,t,"vec4",i.aPointAPointB),this.pointCPointDBuffer=createBufferDynamicDraw(n,t,"vec4",i.aPointCPointD),this.lineWidthBuffer=createBufferDynamicDraw(n,t,"vec2",i.aLineWidth),this.colorBuffer=createBufferDynamicDraw(n,t,"vec4",i.aColor),this.cornerRadiusBuffer=createBufferDynamicDraw(n,t,"vec4",i.aCornerRadius),this.borderColorBuffer=createBufferDynamicDraw(n,t,"vec4",i.aBorderColor),n.bindVertexArray(null),a}},{key:"buffers",get:function get(){var e=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(e){return he(e,"Buffer")}).map(function(t){return e[t]})),this._buffers}},{key:"startFrame",value:function startFrame(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sc.SCREEN;this.panZoomMatrix=e,this.renderTarget=t,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function startBatch(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function endFrame(){this.endBatch()}},{key:"_isVisible",value:function _isVisible(e,t){return!!e.visible()&&(!t||!t.isVisible||t.isVisible(e))}},{key:"drawTexture",value:function drawTexture(e,t,n){var i=this.atlasManager,a=this.batchManager,s=i.getRenderTypeOpts(n);if(this._isVisible(e,s)&&(!e.isEdge()||this._isValidEdge(e))){if(this.renderTarget.picking&&s.getTexPickingMode){var l=s.getTexPickingMode(e);if(l===kc)return;if(l==Pc)return void this.drawPickingRectangle(e,t,n)}var u,c=_createForOfIteratorHelper(i.getAtlasInfo(e,n));try{for(c.s();!(u=c.n()).done;){var h=u.value,d=h.atlas,p=h.tex1,g=h.tex2;a.canAddToCurrentBatch(d)||this.endBatch();for(var v=a.getAtlasIndexForBatch(d),y=0,m=[[p,!0],[g,!1]];y<m.length;y++){var b=_slicedToArray(m[y],2),x=b[0],w=b[1];if(0!=x.w){var E=this.instanceCount;this.vertTypeBuffer.getView(E)[0]=0,indexToVec4(t,this.indexBuffer.getView(E)),this.atlasIdBuffer.getView(E)[0]=v;var _=this.texBuffer.getView(E);_[0]=x.x,_[1]=x.y,_[2]=x.w,_[3]=x.h;var T=this.transformBuffer.getMatrixView(E);this.setTransformMatrix(e,T,s,h,w),this.instanceCount++,w||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(e){c.e(e)}finally{c.f()}}}},{key:"setTransformMatrix",value:function setTransformMatrix(e,t,n,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=0;if(n.shapeProps&&n.shapeProps.padding&&(s=e.pstyle(n.shapeProps.padding).pfValue),i){var l=i.bb,u=i.tex1,c=i.tex2,h=u.w/(u.w+c.w);a||(h=1-h);var d=this._getAdjustedBB(l,s,a,h);this._applyTransformMatrix(t,d,n,e)}else{var p=n.getBoundingBox(e),g=this._getAdjustedBB(p,s,!0,1);this._applyTransformMatrix(t,g,n,e)}}},{key:"_applyTransformMatrix",value:function _applyTransformMatrix(e,t,n,i){var a,s;identity(e);var l=n.getRotation?n.getRotation(i):0;if(0!==l){var u=n.getRotationPoint(i);translate(e,e,[u.x,u.y]),rotate(e,e,l);var c=n.getRotationOffset(i);a=c.x+(t.xOffset||0),s=c.y+(t.yOffset||0)}else a=t.x1,s=t.y1;translate(e,e,[a,s]),scale(e,e,[t.w,t.h])}},{key:"_getAdjustedBB",value:function _getAdjustedBB(e,t,n,i){var a=e.x1,s=e.y1,l=e.w,u=e.h;t&&(a-=t,s-=t,l+=2*t,u+=2*t);var c=0,h=l*i;return n&&i<1?l=h:!n&&i<1&&(a+=c=l-h,l=h),{x1:a,y1:s,w:l,h:u,xOffset:c,yOffset:e.yOffset}}},{key:"drawPickingRectangle",value:function drawPickingRectangle(e,t,n){var i=this.atlasManager.getRenderTypeOpts(n),a=this.instanceCount;this.vertTypeBuffer.getView(a)[0]=4,indexToVec4(t,this.indexBuffer.getView(a)),toWebGLColor([0,0,0],1,this.colorBuffer.getView(a));var s=this.transformBuffer.getMatrixView(a);this.setTransformMatrix(e,s,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function drawNode(e,t,n){var i=this.simpleShapeOptions.get(n);if(this._isVisible(e,i)){var a=i.shapeProps,s=this._getVertTypeForShape(e,a.shape);if(void 0===s||i.isSimple&&!i.isSimple(e))this.drawTexture(e,t,n);else{var l=this.instanceCount;if(this.vertTypeBuffer.getView(l)[0]=s,5===s||6===s){var u=i.getBoundingBox(e),c=this._getCornerRadius(e,a.radius,u),h=this.cornerRadiusBuffer.getView(l);h[0]=c,h[1]=c,h[2]=c,h[3]=c,6===s&&(h[0]=0,h[2]=0)}indexToVec4(t,this.indexBuffer.getView(l)),toWebGLColor(e.pstyle(a.color).value,e.pstyle(a.opacity).value,this.colorBuffer.getView(l));var d=this.lineWidthBuffer.getView(l);if(d[0]=0,d[1]=0,a.border){var p=e.pstyle("border-width").value;if(p>0){toWebGLColor(e.pstyle("border-color").value,e.pstyle("border-opacity").value,this.borderColorBuffer.getView(l));var g=e.pstyle("border-position").value;if("inside"===g)d[0]=0,d[1]=-p;else if("outside"===g)d[0]=p,d[1]=0;else{var v=p/2;d[0]=v,d[1]=-v}}}var y=this.transformBuffer.getMatrixView(l);this.setTransformMatrix(e,y,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"_getVertTypeForShape",value:function _getVertTypeForShape(e,t){switch(e.pstyle(t).value){case"rectangle":return 4;case"ellipse":return 7;case"roundrectangle":case"round-rectangle":return 5;case"bottom-round-rectangle":return 6;default:return}}},{key:"_getCornerRadius",value:function _getCornerRadius(e,t,n){var i=n.w,a=n.h;if("auto"===e.pstyle(t).value)return Cn(i,a);var s=e.pstyle(t).pfValue,l=i/2,u=a/2;return Math.min(s,u,l)}},{key:"drawEdgeArrow",value:function drawEdgeArrow(e,t,n){if(e.visible()){var i,a,s,l=e._private.rscratch;if("source"===n?(i=l.arrowStartX,a=l.arrowStartY,s=l.srcArrowAngle):(i=l.arrowEndX,a=l.arrowEndY,s=l.tgtArrowAngle),!(isNaN(i)||null==i||isNaN(a)||null==a||isNaN(s)||null==s))if("none"!==e.pstyle(n+"-arrow-shape").value){var u=e.pstyle(n+"-arrow-color").value,c=e.pstyle("opacity").value*e.pstyle("line-opacity").value,h=e.pstyle("width").pfValue,d=e.pstyle("arrow-scale").value,p=this.r.getArrowWidth(h,d),g=this.instanceCount,v=this.transformBuffer.getMatrixView(g);identity(v),translate(v,v,[i,a]),scale(v,v,[p,p]),rotate(v,v,s),this.vertTypeBuffer.getView(g)[0]=3,indexToVec4(t,this.indexBuffer.getView(g)),toWebGLColor(u,c,this.colorBuffer.getView(g)),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"drawEdgeLine",value:function drawEdgeLine(e,t){if(e.visible()){var n=this._getEdgePoints(e);if(n){var i=e.pstyle("opacity").value,a=e.pstyle("line-opacity").value,s=e.pstyle("width").pfValue,l=e.pstyle("line-color").value,u=i*a;if(n.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),4==n.length){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=1,indexToVec4(t,this.indexBuffer.getView(c)),toWebGLColor(l,u,this.colorBuffer.getView(c)),this.lineWidthBuffer.getView(c)[0]=s;var h=this.pointAPointBBuffer.getView(c);h[0]=n[0],h[1]=n[1],h[2]=n[2],h[3]=n[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var d=0;d<n.length-2;d+=2){var p=this.instanceCount;this.vertTypeBuffer.getView(p)[0]=2,indexToVec4(t,this.indexBuffer.getView(p)),toWebGLColor(l,u,this.colorBuffer.getView(p)),this.lineWidthBuffer.getView(p)[0]=s;var g=n[d-2],v=n[d-1],y=n[d],m=n[d+1],b=n[d+2],x=n[d+3],w=n[d+4],E=n[d+5];0==d&&(g=2*y-b+.001,v=2*m-x+.001),d==n.length-4&&(w=2*b-y+.001,E=2*x-m+.001);var _=this.pointAPointBBuffer.getView(p);_[0]=g,_[1]=v,_[2]=y,_[3]=m;var T=this.pointCPointDBuffer.getView(p);T[0]=b,T[1]=x,T[2]=w,T[3]=E,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function _isValidEdge(e){var t=e._private.rscratch;return!t.badLine&&null!=t.allpts&&!isNaN(t.allpts[0])}},{key:"_getEdgePoints",value:function _getEdgePoints(e){var t=e._private.rscratch;if(this._isValidEdge(e)){var n=t.allpts;if(4==n.length)return n;var i=this._getNumSegments(e);return this._getCurveSegmentPoints(n,i)}}},{key:"_getNumSegments",value:function _getNumSegments(e){return Math.min(Math.max(15,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function _getCurveSegmentPoints(e,t){if(4==e.length)return e;for(var n=Array(2*(t+1)),i=0;i<=t;i++)if(0==i)n[0]=e[0],n[1]=e[1];else if(i==t)n[2*i]=e[e.length-2],n[2*i+1]=e[e.length-1];else{var a=i/t;this._setCurvePoint(e,a,n,2*i)}return n}},{key:"_setCurvePoint",value:function _setCurvePoint(e,t,n,i){if(!(e.length<=2)){for(var a=Array(e.length-2),s=0;s<a.length;s+=2){var l=(1-t)*e[s]+t*e[s+2],u=(1-t)*e[s+1]+t*e[s+3];a[s]=l,a[s+1]=u}return this._setCurvePoint(a,t,n,i)}n[i]=e[0],n[i+1]=e[1]}},{key:"endBatch",value:function endBatch(){var e=this.gl,t=this.vao,n=this.vertexCount,i=this.instanceCount;if(0!==i){var a=this.renderTarget.picking?this.pickingProgram:this.program;e.useProgram(a),e.bindVertexArray(t);var s,l=_createForOfIteratorHelper(this.buffers);try{for(l.s();!(s=l.n()).done;){s.value.bufferSubData(i)}}catch(e){l.e(e)}finally{l.f()}for(var u=this.batchManager.getAtlases(),c=0;c<u.length;c++)u[c].bufferIfNeeded(e);for(var h=0;h<u.length;h++)e.activeTexture(e.TEXTURE0+h),e.bindTexture(e.TEXTURE_2D,u[h].texture),e.uniform1i(a.uTextures[h],h);e.uniform1f(a.uZoom,function getEffectiveZoom(e){var t=e.pixelRatio;return e.cy.zoom()*t}(this.r)),e.uniformMatrix3fv(a.uPanZoomMatrix,!1,this.panZoomMatrix),e.uniform1i(a.uAtlasSize,this.batchManager.getAtlasSize());var d=toWebGLColor(this.bgColor,1);e.uniform4fv(a.uBGColor,d),e.drawArraysInstanced(e.TRIANGLES,0,n,i),e.bindVertexArray(null),e.bindTexture(e.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:u.length}),this.startBatch()}}},{key:"getDebugInfo",value:function getDebugInfo(){var e=this.atlasManager.getDebugInfo(),t=e.reduce(function(e,t){return e+t.atlasCount},0),n=this.batchDebugInfo,i=n.reduce(function(e,t){return e+t.count},0);return{atlasInfo:e,totalAtlases:t,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:n.length,batchInfo:n,totalInstances:i}}}])}(),Ic={};function getLabelLines(e,t){var n=e._private.rscratch;return at(n,"labelWrapCachedLines",t)||[]}Ic.initWebgl=function(e,t){var n=this,i=n.data.contexts[n.WEBGL];e.bgColor=function getBGColor(e){var t=e.cy.container(),n=t&&t.style&&t.style.backgroundColor||"white";return be(n)}(n),e.webglTexSize=Math.min(e.webglTexSize,i.getParameter(i.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS)),n.webglDebug=e.webglDebug,n.webglDebugShowAtlases=e.webglDebugShowAtlases,n.pickingFrameBuffer=function createPickingFrameBuffer(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.bindFramebuffer(e.FRAMEBUFFER,null),t.setFramebufferAttachmentSizes=function(t,i){e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null)},t}(i),n.pickingFrameBuffer.needsDraw=!0,n.drawing=new Nc(n,i,e);var a=function getLabelRotation(e){return function(t){return n.getTextAngle(t,e)}},s=function isLabelVisible(e){return function(t){var n=t.pstyle(e);return n&&n.value}},l=function isLayerVisible(e){return function(t){return t.pstyle("".concat(e,"-opacity")).value>0}},u=function getTexPickingMode(e){return"yes"===e.pstyle("text-events").strValue?Pc:kc},c=function getBBForSimpleShape(e){var t=e.position(),n=t.x,i=t.y,a=e.outerWidth(),s=e.outerHeight();return{w:a,h:s,x1:n-a/2,y1:i-s/2}};n.drawing.addAtlasCollection("node",{texRows:e.webglTexRowsNodes}),n.drawing.addAtlasCollection("label",{texRows:e.webglTexRows}),n.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement}),n.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:c,isSimple:isSimpleShape,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),n.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:c,isVisible:l("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),n.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:c,isVisible:l("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),n.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:u,getKey:Mc(t.getLabelKey,null),getBoundingBox:Rc(t.getLabelBox,null),drawClipped:!0,drawElement:t.drawLabel,getRotation:a(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:s("label")}),n.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:u,getKey:Mc(t.getSourceLabelKey,"source"),getBoundingBox:Rc(t.getSourceLabelBox,"source"),drawClipped:!0,drawElement:t.drawSourceLabel,getRotation:a("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:s("source-label")}),n.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:u,getKey:Mc(t.getTargetLabelKey,"target"),getBoundingBox:Rc(t.getTargetLabelBox,"target"),drawClipped:!0,drawElement:t.drawTargetLabel,getRotation:a("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:s("target-label")});var h=Ce(function(){console.log("garbage collect flag set"),n.data.gc=!0},1e4);n.onUpdateEleCalcs(function(e,t){var i=!1;t&&t.length>0&&(i|=n.drawing.invalidate(t)),i&&h()}),function overrideCanvasRendererFunctions(e){var t=e.render;e.render=function(n){n=n||{};var i=e.cy;e.webgl&&(i.zoom()>Zu?(!function clearWebgl(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}(e),t.call(e,n)):(!function clearCanvas(e){var t=function clear(t){t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.canvasWidth,e.canvasHeight),t.restore()};t(e.data.contexts[e.NODE]),t(e.data.contexts[e.DRAG])}(e),renderWebgl(e,n,Sc.SCREEN)))};var n=e.matchCanvasSize;e.matchCanvasSize=function(t){n.call(e,t),e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight),e.pickingFrameBuffer.needsDraw=!0},e.findNearestElements=function(t,n,i,a){return function findNearestElementsWebgl(e,t,n){var i,a,s,l=function getPickingIndexes(e,t,n,i,a){var s,l,u,c,h=getEffectivePanZoom(e),d=h.pan,p=h.zoom,g=function modelToRenderedPosition(e,t,n,i,a){var s=i*n+t.x,l=a*n+t.y;return[s,l=Math.round(e.canvasHeight-l)]}(e,d,p,t,n),v=_slicedToArray(g,2),y=v[0],m=v[1],b=6;if(s=y-b/2,l=m-b/2,c=b,0===(u=b)||0===c)return[];var x=e.data.contexts[e.WEBGL];x.bindFramebuffer(x.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(x.viewport(0,0,x.canvas.width,x.canvas.height),renderWebgl(e,null,Sc.PICKING),e.pickingFrameBuffer.needsDraw=!1);var w=u*c,E=new Uint8Array(4*w);x.readPixels(s,l,u,c,x.RGBA,x.UNSIGNED_BYTE,E),x.bindFramebuffer(x.FRAMEBUFFER,null);for(var _=new Set,T=0;T<w;T++){var L=vec4ToIndex(E.slice(4*T,4*T+4))-1;L>=0&&_.add(L)}return _}(e,t,n),u=e.getCachedZSortedEles(),c=_createForOfIteratorHelper(l);try{for(c.s();!(s=c.n()).done;){var h=u[s.value];if(!i&&h.isNode()&&(i=h),!a&&h.isEdge()&&(a=h),i&&a)break}}catch(e){c.e(e)}finally{c.f()}return[i,a].filter(Boolean)}(e,t,n)};var i=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){i.call(e),e.pickingFrameBuffer.needsDraw=!0};var a=e.notify;e.notify=function(t,n){a.call(e,t,n),"viewport"===t||"bounds"===t?e.pickingFrameBuffer.needsDraw=!0:"background"===t&&e.drawing.invalidate(n,{type:"node-body"})}}(n)};var Mc=function getStyleKeysForLabel(e,t){return function(n){var i=e(n),a=getLabelLines(n,t);return a.length>1?a.map(function(e,t){return"".concat(i,"_").concat(t)}):i}},Rc=function getBoundingBoxForLabel(e,t){return function(n,i){var a=e(n);if("string"==typeof i){var s=i.indexOf("_");if(s>0){var l=Number(i.substring(s+1)),u=getLabelLines(n,t),c=a.h/u.length,h=c*l,d=a.y1+h;return{x1:a.x1,w:a.w,y1:d,h:c,yOffset:h}}}return a}};function setContextTransform(e,t){var n=e.canvasWidth,i=e.canvasHeight,a=getEffectivePanZoom(e),s=a.pan,l=a.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,n,i),t.translate(s.x,s.y),t.scale(l,l)}function drawEle(e,t,n){var i=e.drawing;t+=1,n.isNode()?(i.drawNode(n,t,"node-underlay"),i.drawNode(n,t,"node-body"),i.drawTexture(n,t,"label"),i.drawNode(n,t,"node-overlay")):(i.drawEdgeLine(n,t),i.drawEdgeArrow(n,t,"source"),i.drawEdgeArrow(n,t,"target"),i.drawTexture(n,t,"label"),i.drawTexture(n,t,"edge-source-label"),i.drawTexture(n,t,"edge-target-label"))}function renderWebgl(e,t,n){var i;e.webglDebug&&(i=performance.now());var a=e.drawing,s=0;if(n.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&function drawSelectionRectangle(e,t){e.drawSelectionRectangle(t,function(t){return setContextTransform(e,t)})}(e,t),e.data.canvasNeedsRedraw[e.NODE]||n.picking){var l=e.data.contexts[e.WEBGL];n.screen?(l.clearColor(0,0,0,0),l.enable(l.BLEND),l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA)):l.disable(l.BLEND),l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT),l.viewport(0,0,l.canvas.width,l.canvas.height);var u=function createPanZoomMatrix(e){var t=e.canvasWidth,n=e.canvasHeight,i=getEffectivePanZoom(e),a=i.pan,s=i.zoom,l=create();translate(l,l,[a.x,a.y]),scale(l,l,[s,s]);var u=create();!function projection(e,t,n){e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1}(u,t,n);var c=create();return function multiply(e,t,n){var i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],h=t[6],d=t[7],p=t[8],g=n[0],v=n[1],y=n[2],m=n[3],b=n[4],x=n[5],w=n[6],E=n[7],_=n[8];e[0]=g*i+v*l+y*h,e[1]=g*a+v*u+y*d,e[2]=g*s+v*c+y*p,e[3]=m*i+b*l+x*h,e[4]=m*a+b*u+x*d,e[5]=m*s+b*c+x*p,e[6]=w*i+E*l+_*h,e[7]=w*a+E*u+_*d,e[8]=w*s+E*c+_*p}(c,u,l),c}(e),c=e.getCachedZSortedEles();if(s=c.length,a.startFrame(u,n),n.screen){for(var h=0;h<c.nondrag.length;h++)drawEle(e,h,c.nondrag[h]);for(var d=0;d<c.drag.length;d++)drawEle(e,d,c.drag[d])}else if(n.picking)for(var p=0;p<c.length;p++)drawEle(e,p,c[p]);a.endFrame(),n.screen&&e.webglDebugShowAtlases&&(!function drawAxes(e){var t=e.data.contexts[e.NODE];t.save(),setContextTransform(e,t),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.moveTo(-1e3,0),t.lineTo(1e3,0),t.stroke(),t.beginPath(),t.moveTo(0,-1e3),t.lineTo(0,1e3),t.stroke(),t.restore()}(e),function drawAtlases(e){var t=function draw(t,n,i){for(var a=t.atlasManager.getAtlasCollection(n),s=e.data.contexts[e.NODE],l=a.atlases,u=0;u<l.length;u++){var c=l[u].canvas;if(c){var h=c.width,d=c.height,p=h*u,g=c.height*i;s.save(),s.scale(.4,.4),s.drawImage(c,p,g),s.strokeStyle="black",s.rect(p,g,h,d),s.stroke(),s.restore()}}},n=0;t(e.drawing,"node",n++),t(e.drawing,"label",n++)}(e)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var g=performance.now(),v=Math.ceil(g-i),y=a.getDebugInfo(),m=["".concat(s," elements"),"".concat(y.totalInstances," instances"),"".concat(y.batchCount," batches"),"".concat(y.totalAtlases," atlases"),"".concat(y.wrappedCount," wrapped textures"),"".concat(y.simpleCount," simple shapes")].join(", ");console.log("WebGL (".concat(n.name,") - frame time ").concat(v,"ms")),console.log("Totals:"),console.log("  ".concat(m)),console.log("Texture Atlases Used:");var b,x=_createForOfIteratorHelper(y.atlasInfo);try{for(x.s();!(b=x.n()).done;){var w=b.value;console.log("  ".concat(w.type,": ").concat(w.keyCount," keys, ").concat(w.atlasCount," atlases"))}}catch(e){x.e(e)}finally{x.f()}console.log("")}e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,a.gc())}for(var Bc={drawPolygonPath:function(e,t,n,i,a,s){var l=i/2,u=a/2;e.beginPath&&e.beginPath(),e.moveTo(t+l*s[0],n+u*s[1]);for(var c=1;c<s.length/2;c++)e.lineTo(t+l*s[2*c],n+u*s[2*c+1]);e.closePath()},drawRoundPolygonPath:function(e,t,n,i,a,s,l){l.forEach(function(t){return drawPreparedRoundCorner(e,t)}),e.closePath()},drawRoundRectanglePath:function(e,t,n,i,a,s){var l=i/2,u=a/2,c="auto"===s?Cn(i,a):Math.min(s,u,l);e.beginPath&&e.beginPath(),e.moveTo(t,n-u),e.arcTo(t+l,n-u,t+l,n,c),e.arcTo(t+l,n+u,t,n+u,c),e.arcTo(t-l,n+u,t-l,n,c),e.arcTo(t-l,n-u,t,n-u,c),e.lineTo(t,n-u),e.closePath()},drawBottomRoundRectanglePath:function(e,t,n,i,a,s){var l=i/2,u=a/2,c="auto"===s?Cn(i,a):s;e.beginPath&&e.beginPath(),e.moveTo(t,n-u),e.lineTo(t+l,n-u),e.lineTo(t+l,n),e.arcTo(t+l,n+u,t,n+u,c),e.arcTo(t-l,n+u,t-l,n,c),e.lineTo(t-l,n-u),e.lineTo(t,n-u),e.closePath()},drawCutRectanglePath:function(e,t,n,i,a,s,l){var u=i/2,c=a/2,h="auto"===l?8:l;e.beginPath&&e.beginPath(),e.moveTo(t-u+h,n-c),e.lineTo(t+u-h,n-c),e.lineTo(t+u,n-c+h),e.lineTo(t+u,n+c-h),e.lineTo(t+u-h,n+c),e.lineTo(t-u+h,n+c),e.lineTo(t-u,n+c-h),e.lineTo(t-u,n-c+h),e.closePath()},drawBarrelPath:function(e,t,n,i,a){var s=i/2,l=a/2,u=t-s,c=t+s,h=n-l,d=n+l,p=Ln(i,a),g=p.widthOffset,v=p.heightOffset,y=p.ctrlPtOffsetPct*g;e.beginPath&&e.beginPath(),e.moveTo(u,h+v),e.lineTo(u,d-v),e.quadraticCurveTo(u+y,d,u+g,d),e.lineTo(c-g,d),e.quadraticCurveTo(c-y,d,c,d-v),e.lineTo(c,h+v),e.quadraticCurveTo(c-y,h,c-g,h),e.lineTo(u+g,h),e.quadraticCurveTo(u+y,h,u,h+v),e.closePath()}},Oc=Math.sin(0),Fc=Math.cos(0),zc={},Gc={},Vc=Math.PI/40,qc=0*Math.PI;qc<2*Math.PI;qc+=Vc)zc[qc]=Math.sin(qc),Gc[qc]=Math.cos(qc);Bc.drawEllipsePath=function(e,t,n,i,a){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,n,i/2,a/2,0,0,2*Math.PI);else for(var s,l,u=i/2,c=a/2,h=0*Math.PI;h<2*Math.PI;h+=Vc)s=t-u*zc[h]*Oc+u*Gc[h]*Fc,l=n+c*Gc[h]*Oc+c*zc[h]*Fc,0===h?e.moveTo(s,l):e.lineTo(s,l);e.closePath()};var Yc={};function b64UriToB64(e){var t=e.indexOf(",");return e.substr(t+1)}function output(e,t,n){var i=function getB64Uri(){return t.toDataURL(n,e.quality)};switch(e.output){case"blob-promise":return new zr(function(i,a){try{t.toBlob(function(e){null!=e?i(e):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,e.quality)}catch(e){a(e)}});case"blob":return function b64ToBlob(e,t){for(var n=atob(e),i=new ArrayBuffer(n.length),a=new Uint8Array(i),s=0;s<n.length;s++)a[s]=n.charCodeAt(s);return new Blob([i],{type:t})}(b64UriToB64(i()),n);case"base64":return b64UriToB64(i());default:return i()}}Yc.createBuffer=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,[n,n.getContext("2d")]},Yc.bufferCanvasImage=function(e){var t=this.cy,n=t.mutableElements().boundingBox(),i=this.findContainerClientCoords(),a=e.full?Math.ceil(n.w):i[2],s=e.full?Math.ceil(n.h):i[3],l=Z(e.maxWidth)||Z(e.maxHeight),u=this.getPixelRatio(),c=1;if(void 0!==e.scale)a*=e.scale,s*=e.scale,c=e.scale;else if(l){var h=1/0,d=1/0;Z(e.maxWidth)&&(h=c*e.maxWidth/a),Z(e.maxHeight)&&(d=c*e.maxHeight/s),a*=c=Math.min(h,d),s*=c}l||(a*=u,s*=u,c*=u);var p=document.createElement("canvas");p.width=a,p.height=s,p.style.width=a+"px",p.style.height=s+"px";var g=p.getContext("2d");if(a>0&&s>0){g.clearRect(0,0,a,s),g.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(e.full)g.translate(-n.x1*c,-n.y1*c),g.scale(c,c),this.drawElements(g,v),g.scale(1/c,1/c),g.translate(n.x1*c,n.y1*c);else{var y=t.pan(),m={x:y.x*c,y:y.y*c};c*=t.zoom(),g.translate(m.x,m.y),g.scale(c,c),this.drawElements(g,v),g.scale(1/c,1/c),g.translate(-m.x,-m.y)}e.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=e.bg,g.rect(0,0,a,s),g.fill())}return p},Yc.png=function(e){return output(e,this.bufferCanvasImage(e),"image/png")},Yc.jpg=function(e){return output(e,this.bufferCanvasImage(e),"image/jpeg")};var Xc={nodeShapeImpl:function(e,t,n,i,a,s,l,u){switch(e){case"ellipse":return this.drawEllipsePath(t,n,i,a,s);case"polygon":return this.drawPolygonPath(t,n,i,a,s,l);case"round-polygon":return this.drawRoundPolygonPath(t,n,i,a,s,l,u);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,n,i,a,s,u);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,n,i,a,s,l,u);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,n,i,a,s,u);case"barrel":return this.drawBarrelPath(t,n,i,a,s)}}},Uc=CanvasRenderer,Hc=CanvasRenderer.prototype;function CanvasRenderer(e){var t=this,n=t.cy.window().document;e.webgl&&(Hc.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:new Array(Hc.CANVAS_LAYERS),contexts:new Array(Hc.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Hc.CANVAS_LAYERS),bufferCanvases:new Array(Hc.BUFFER_COUNT),bufferContexts:new Array(Hc.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",a="rgba(0,0,0,0)";t.data.canvasContainer=n.createElement("div");var l=t.data.canvasContainer.style;t.data.canvasContainer.style[i]=a,l.position="relative",l.zIndex="0",l.overflow="hidden";var u=e.cy.container();u.appendChild(t.data.canvasContainer),u.style[i]=a;var c={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};(function ms(){return s&&s.userAgent.match(/msie|trident|edge/i)})()&&(c["-ms-touch-action"]="none",c["touch-action"]="none");for(var h=0;h<Hc.CANVAS_LAYERS;h++){var d=t.data.canvases[h]=n.createElement("canvas"),p=Hc.CANVAS_TYPES[h];t.data.contexts[h]=d.getContext(p),t.data.contexts[h]||$e("Could not create canvas of type "+p),Object.keys(c).forEach(function(e){d.style[e]=c[e]}),d.style.position="absolute",d.setAttribute("data-id","layer"+h),d.style.zIndex=String(Hc.CANVAS_LAYERS-h),t.data.canvasContainer.appendChild(d),t.data.canvasNeedsRedraw[h]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[Hc.NODE].setAttribute("data-id","layer"+Hc.NODE+"-node"),t.data.canvases[Hc.SELECT_BOX].setAttribute("data-id","layer"+Hc.SELECT_BOX+"-selectbox"),t.data.canvases[Hc.DRAG].setAttribute("data-id","layer"+Hc.DRAG+"-drag"),t.data.canvases[Hc.WEBGL]&&t.data.canvases[Hc.WEBGL].setAttribute("data-id","layer"+Hc.WEBGL+"-webgl");for(h=0;h<Hc.BUFFER_COUNT;h++)t.data.bufferCanvases[h]=n.createElement("canvas"),t.data.bufferContexts[h]=t.data.bufferCanvases[h].getContext("2d"),t.data.bufferCanvases[h].style.position="absolute",t.data.bufferCanvases[h].setAttribute("data-id","buffer"+h),t.data.bufferCanvases[h].style.zIndex=String(-h-1),t.data.bufferCanvases[h].style.visibility="hidden";t.pathsEnabled=!0;var g=Ut(),v=function getCenterOffset(e){return{x:-e.w/2,y:-e.h/2}},y=function getStyleKey(e){return e[0]._private.nodeKey},m=function getLabelKey(e){return e[0]._private.labelStyleKey},b=function getSourceLabelKey(e){return e[0]._private.sourceLabelStyleKey},x=function getTargetLabelKey(e){return e[0]._private.targetLabelStyleKey},w=function drawElement(e,n,i,a,s){return t.drawElement(e,n,i,!1,!1,s)},E=function drawLabel(e,n,i,a,s){return t.drawElementText(e,n,i,a,"main",s)},_=function drawSourceLabel(e,n,i,a,s){return t.drawElementText(e,n,i,a,"source",s)},T=function drawTargetLabel(e,n,i,a,s){return t.drawElementText(e,n,i,a,"target",s)},L=function getElementBox(e){return e.boundingBox(),e[0]._private.bodyBounds},D=function getLabelBox(e){return e.boundingBox(),e[0]._private.labelBounds.main||g},S=function getSourceLabelBox(e){return e.boundingBox(),e[0]._private.labelBounds.source||g},k=function getTargetLabelBox(e){return e.boundingBox(),e[0]._private.labelBounds.target||g},P=function isLabelVisibleAtScale(e,t){return t},N=function getElementRotationPoint(e){return function getBoxCenter(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}(L(e))},I=function addTextMargin(e,t,n){var i=e?e+"-":"";return{x:t.x+n.pstyle(i+"text-margin-x").pfValue,y:t.y+n.pstyle(i+"text-margin-y").pfValue}},M=function getRsPt(e,t,n){var i=e[0]._private.rscratch;return{x:i[t],y:i[n]}},R=function getLabelRotationPoint(e){return I("",M(e,"labelX","labelY"),e)},O=function getSourceLabelRotationPoint(e){return I("source",M(e,"sourceLabelX","sourceLabelY"),e)},z=function getTargetLabelRotationPoint(e){return I("target",M(e,"targetLabelX","targetLabelY"),e)},G=function getElementRotationOffset(e){return v(L(e))},V=function getSourceLabelRotationOffset(e){return v(S(e))},q=function getTargetLabelRotationOffset(e){return v(k(e))},Y=function getLabelRotationOffset(e){var t=D(e),n=v(D(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":n.x=-t.w-(t.leftPad||0);break;case"right":n.x=-(t.rightPad||0)}switch(e.pstyle("text-valign").value){case"top":n.y=-t.h-(t.topPad||0);break;case"bottom":n.y=-(t.botPad||0)}}return n},X=t.data.eleTxrCache=new ec(t,{getKey:y,doesEleInvalidateKey:function backgroundTimestampHasChanged(e){var t=e[0]._private;return!(t.oldBackgroundTimestamp===t.backgroundTimestamp)},drawElement:w,getBoundingBox:L,getRotationPoint:N,getRotationOffset:G,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),U=t.data.lblTxrCache=new ec(t,{getKey:m,drawElement:E,getBoundingBox:D,getRotationPoint:R,getRotationOffset:Y,isVisible:P}),H=t.data.slbTxrCache=new ec(t,{getKey:b,drawElement:_,getBoundingBox:S,getRotationPoint:O,getRotationOffset:V,isVisible:P}),j=t.data.tlbTxrCache=new ec(t,{getKey:x,drawElement:T,getBoundingBox:k,getRotationPoint:z,getRotationOffset:q,isVisible:P}),W=t.data.lyrTxrCache=new nc(t);t.onUpdateEleCalcs(function invalidateTextureCaches(e,t){X.invalidateElements(t),U.invalidateElements(t),H.invalidateElements(t),j.invalidateElements(t),W.invalidateElements(t);for(var n=0;n<t.length;n++){var i=t[n]._private;i.oldBackgroundTimestamp=i.backgroundTimestamp}});var K=function refineInLayers(e){for(var t=0;t<e.length;t++)W.enqueueElementRefinement(e[t].ele)};X.onDequeue(K),U.onDequeue(K),H.onDequeue(K),j.onDequeue(K),e.webgl&&t.initWebgl(e,{getStyleKey:y,getLabelKey:m,getSourceLabelKey:b,getTargetLabelKey:x,drawElement:w,drawLabel:E,drawSourceLabel:_,drawTargetLabel:T,getElementBox:L,getLabelBox:D,getSourceLabelBox:S,getTargetLabelBox:k,getElementRotationPoint:N,getElementRotationOffset:G,getLabelRotationPoint:R,getSourceLabelRotationPoint:O,getTargetLabelRotationPoint:z,getLabelRotationOffset:Y,getSourceLabelRotationOffset:V,getTargetLabelRotationOffset:q})}Hc.CANVAS_LAYERS=3,Hc.SELECT_BOX=0,Hc.DRAG=1,Hc.NODE=2,Hc.WEBGL=3,Hc.CANVAS_TYPES=["2d","2d","2d","webgl2"],Hc.BUFFER_COUNT=3,Hc.TEXTURE_BUFFER=0,Hc.MOTIONBLUR_BUFFER_NODE=1,Hc.MOTIONBLUR_BUFFER_DRAG=2,Hc.redrawHint=function(e,t){var n=this;switch(e){case"eles":n.data.canvasNeedsRedraw[Hc.NODE]=t;break;case"drag":n.data.canvasNeedsRedraw[Hc.DRAG]=t;break;case"select":n.data.canvasNeedsRedraw[Hc.SELECT_BOX]=t;break;case"gc":n.data.gc=!0}};var jc="undefined"!=typeof Path2D;Hc.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},Hc.usePaths=function(){return jc&&this.pathsEnabled},Hc.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},Hc.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},Hc.makeOffscreenCanvas=function(e,t){var n;"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":_typeof(OffscreenCanvas))?n=new OffscreenCanvas(e,t):((n=this.cy.window().document.createElement("canvas")).width=e,n.height=t);return n},[sc,lc,vc,mc,bc,xc,_c,Ic,Bc,Yc,Xc].forEach(function(e){me(Hc,e)});var Wc=[{type:"layout",extensions:tu},{type:"renderer",extensions:[{name:"null",impl:NullRenderer},{name:"base",impl:Hu},{name:"canvas",impl:Uc}]}],$c={},Kc={};function setExtension(e,t,n){var i=n,a=function overrideErr(n){Ze("Can not register `"+t+"` for `"+e+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===e){if(El.prototype[t])return a(t);El.prototype[t]=n}else if("collection"===e){if(Hs.prototype[t])return a(t);Hs.prototype[t]=n}else if("layout"===e){for(var s=function Layout(e){this.options=e,n.call(this,e),K(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},l=s.prototype=Object.create(n.prototype),u=[],c=0;c<u.length;c++){var h=u[c];l[h]=l[h]||function(){return this}}l.start&&!l.run?l.run=function(){return this.start(),this}:!l.start&&l.run&&(l.start=function(){return this.run(),this});var d=n.prototype.stop;l.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var n=0;n<t.length;n++)t[n].stop()}return d?d.call(this):this.emit("layoutstop"),this},l.destroy||(l.destroy=function(){return this}),l.cy=function(){return this._private.cy};var p=function getCy(e){return e._private.cy},g={addEventFields:function addEventFields(e,t){t.layout=e,t.cy=p(e),t.target=e},bubble:function bubble(){return!0},parent:function parent(e){return p(e)}};me(l,{createEmitter:function createEmitter(){return this._private.emitter=new Emitter(g,this),this},emitter:function emitter(){return this._private.emitter},on:function on(e,t){return this.emitter().on(e,t),this},one:function one(e,t){return this.emitter().one(e,t),this},once:function once(e,t){return this.emitter().one(e,t),this},removeListener:function removeListener(e,t){return this.emitter().removeListener(e,t),this},removeAllListeners:function removeAllListeners(){return this.emitter().removeAllListeners(),this},emit:function emit(e,t){return this.emitter().emit(e,t),this}}),Ua.eventAliasesOn(l),i=s}else if("renderer"===e&&"null"!==t&&"base"!==t){var v=getExtension("renderer","base"),y=v.prototype,m=n,b=n.prototype,x=function Renderer(){v.apply(this,arguments),m.apply(this,arguments)},w=x.prototype;for(var E in y){var _=y[E];if(null!=b[E])return a(E);w[E]=_}for(var T in b)w[T]=b[T];y.clientFunctions.forEach(function(e){w[e]=w[e]||function(){$e("Renderer does not implement `renderer."+e+"()` on its prototype")}}),i=x}else if("__proto__"===e||"constructor"===e||"prototype"===e)return $e(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return we({map:$c,keys:[e,t],value:i})}function getExtension(e,t){return Ee({map:$c,keys:[e,t]})}function setModule(e,t,n,i,a){return we({map:Kc,keys:[e,t,n,i],value:a})}function getModule(e,t,n,i){return Ee({map:Kc,keys:[e,t,n,i]})}var Zc=function extension(){return 2===arguments.length?getExtension.apply(null,arguments):3===arguments.length?setExtension.apply(null,arguments):4===arguments.length?getModule.apply(null,arguments):5===arguments.length?setModule.apply(null,arguments):void $e("Invalid extension access syntax")};El.prototype.extension=Zc,Wc.forEach(function(e){e.extensions.forEach(function(t){setExtension(e.type,t.name,t.impl)})});var Qc=function Stylesheet(){if(!(this instanceof Qc))return new Qc;this.length=0},Jc=Qc.prototype;Jc.instanceString=function(){return"stylesheet"},Jc.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},Jc.css=function(e,t){var n=this.length-1;if(H(e))this[n].properties.push({name:e,value:t});else if(K(e))for(var i=e,a=Object.keys(i),s=0;s<a.length;s++){var l=a[s],u=i[l];if(null!=u){var c=yl.properties[l]||yl.properties[le(l)];if(null!=c){var h=c.name,d=u;this[n].properties.push({name:h,value:d})}}}return this},Jc.style=Jc.css,Jc.generateStyle=function(e){var t=new yl(e);return this.appendToStyle(t)},Jc.appendToStyle=function(e){for(var t=0;t<this.length;t++){var n=this[t],i=n.selector,a=n.properties;e.selector(i);for(var s=0;s<a.length;s++){var l=a[s];e.css(l.name,l.value)}}return e};var eh=function cytoscape(e){return void 0===e&&(e={}),K(e)?new El(e):H(e)?Zc.apply(Zc,arguments):void 0};eh.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(eh),e.apply(null,t),this},eh.warnings=function(e){return Ke(e)},eh.version="3.33.1",eh.stylesheet=eh.Stylesheet=Qc;var th=n(3457),nh=n(8918),rh=n(4658),ih=n(5097),ah=n(8041),oh=n(5263),sh=(n(4353),n(6750),n(2838),function(){var e,o=function(e,t,n,i){for(n=n||{},i=e.length;i--;n[e[i]]=t);return n},t=[1,4],n=[1,13],i=[1,12],a=[1,15],s=[1,16],l=[1,20],u=[1,19],c=[6,7,8],h=[1,26],d=[1,24],p=[1,25],g=[6,7,11],v=[1,6,13,15,16,19,22],y=[1,33],m=[1,34],b=[1,6,7,11,13,15,16,19,22],x={trace:function trace(){},yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:function anonymous(e,t,n,i,a,s,l){var u=s.length-1;switch(a){case 6:case 7:return i;case 8:i.getLogger().trace("Stop NL ");break;case 9:i.getLogger().trace("Stop EOF ");break;case 11:i.getLogger().trace("Stop NL2 ");break;case 12:i.getLogger().trace("Stop EOF2 ");break;case 15:i.getLogger().info("Node: ",s[u].id),i.addNode(s[u-1].length,s[u].id,s[u].descr,s[u].type);break;case 16:i.getLogger().trace("Icon: ",s[u]),i.decorateNode({icon:s[u]});break;case 17:case 21:i.decorateNode({class:s[u]});break;case 18:i.getLogger().trace("SPACELIST");break;case 19:i.getLogger().trace("Node: ",s[u].id),i.addNode(0,s[u].id,s[u].descr,s[u].type);break;case 20:i.decorateNode({icon:s[u]});break;case 25:i.getLogger().trace("node found ..",s[u-2]),this.$={id:s[u-1],descr:s[u-1],type:i.getType(s[u-2],s[u])};break;case 26:this.$={id:s[u],descr:s[u],type:i.nodeType.DEFAULT};break;case 27:i.getLogger().trace("node found ..",s[u-3]),this.$={id:s[u-3],descr:s[u-1],type:i.getType(s[u-2],s[u])}}},table:[{3:1,4:2,5:3,6:[1,5],8:t},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:t},{6:n,7:[1,10],9:9,12:11,13:i,14:14,15:a,16:s,17:17,18:18,19:l,22:u},o(c,[2,3]),{1:[2,2]},o(c,[2,4]),o(c,[2,5]),{1:[2,6],6:n,12:21,13:i,14:14,15:a,16:s,17:17,18:18,19:l,22:u},{6:n,9:22,12:11,13:i,14:14,15:a,16:s,17:17,18:18,19:l,22:u},{6:h,7:d,10:23,11:p},o(g,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:l,22:u}),o(g,[2,18]),o(g,[2,19]),o(g,[2,20]),o(g,[2,21]),o(g,[2,23]),o(g,[2,24]),o(g,[2,26],{19:[1,30]}),{20:[1,31]},{6:h,7:d,10:32,11:p},{1:[2,7],6:n,12:21,13:i,14:14,15:a,16:s,17:17,18:18,19:l,22:u},o(v,[2,14],{7:y,11:m}),o(b,[2,8]),o(b,[2,9]),o(b,[2,10]),o(g,[2,15]),o(g,[2,16]),o(g,[2,17]),{20:[1,35]},{21:[1,36]},o(v,[2,13],{7:y,11:m}),o(b,[2,11]),o(b,[2,12]),{21:[1,37]},o(g,[2,25]),o(g,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:function parseError(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function parse(e){var t=this,n=[0],i=[],a=[null],s=[],l=this.table,u="",c=0,h=0,d=s.slice.call(arguments,1),p=Object.create(this.lexer),g={yy:{}};for(var v in this.yy)Object.prototype.hasOwnProperty.call(this.yy,v)&&(g.yy[v]=this.yy[v]);p.setInput(e,g.yy),g.yy.lexer=p,g.yy.parser=this,void 0===p.yylloc&&(p.yylloc={});var y=p.yylloc;s.push(y);var m=p.options&&p.options.ranges;function lex(){var e;return"number"!=typeof(e=i.pop()||p.lex()||1)&&(e instanceof Array&&(e=(i=e).pop()),e=t.symbols_[e]||e),e}"function"==typeof g.yy.parseError?this.parseError=g.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,x,w,E,_,T,L,D,S={};;){if(x=n[n.length-1],this.defaultActions[x]?w=this.defaultActions[x]:(null==b&&(b=lex()),w=l[x]&&l[x][b]),void 0===w||!w.length||!w[0]){var k="";for(_ in D=[],l[x])this.terminals_[_]&&_>2&&D.push("'"+this.terminals_[_]+"'");k=p.showPosition?"Parse error on line "+(c+1)+":\n"+p.showPosition()+"\nExpecting "+D.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(k,{text:p.match,token:this.terminals_[b]||b,line:p.yylineno,loc:y,expected:D})}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+b);switch(w[0]){case 1:n.push(b),a.push(p.yytext),s.push(p.yylloc),n.push(w[1]),b=null,h=p.yyleng,u=p.yytext,c=p.yylineno,y=p.yylloc;break;case 2:if(T=this.productions_[w[1]][1],S.$=a[a.length-T],S._$={first_line:s[s.length-(T||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(T||1)].first_column,last_column:s[s.length-1].last_column},m&&(S._$.range=[s[s.length-(T||1)].range[0],s[s.length-1].range[1]]),void 0!==(E=this.performAction.apply(S,[u,h,c,g.yy,w[1],a,s].concat(d))))return E;T&&(n=n.slice(0,-1*T*2),a=a.slice(0,-1*T),s=s.slice(0,-1*T)),n.push(this.productions_[w[1]][0]),a.push(S.$),s.push(S._$),L=l[n[n.length-2]][n[n.length-1]],n.push(L);break;case 3:return!0}}return!0}},w=(e={EOF:1,parseError:function parseError(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,i,a;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),(i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var s in a)this[s]=a[s];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length;s++)if((n=this._input.match(this.rules[a[s]]))&&(!t||n[0].length>t[0].length)){if(t=n,i=s,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,a[s])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,a[i]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function lex(){var e=this.next();return e||this.lex()},begin:function begin(e){this.conditionStack.push(e)},popState:function popState(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function _currentRules(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function topState(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function pushState(e){this.begin(e)},stateStackSize:function stateStackSize(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function anonymous(e,t,n,i){switch(n){case 0:return e.getLogger().trace("Found comment",t.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:case 23:case 26:this.popState();break;case 5:e.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return e.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:e.getLogger().trace("end icon"),this.popState();break;case 10:return e.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return e.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return e.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return e.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:case 15:case 16:case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 24:e.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return e.getLogger().trace("description:",t.yytext),"NODE_DESCR";case 27:return this.popState(),e.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),e.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),e.getLogger().trace("node end ...",t.yytext),"NODE_DEND";case 30:case 33:case 34:return this.popState(),e.getLogger().trace("node end (("),"NODE_DEND";case 31:case 32:return this.popState(),e.getLogger().trace("node end (-"),"NODE_DEND";case 35:case 36:return e.getLogger().trace("Long description:",t.yytext),20}},rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}},e);function Parser(){this.yy={}}return x.lexer=w,Parser.prototype=x,x.Parser=Parser,new Parser}());sh.parser=sh;const lh=sh;let uh=[],ch=0,hh={};const dh={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},ph={clear:()=>{uh=[],ch=0,hh={}},addNode:(e,t,n,a)=>{var s,l;i.l.info("addNode",e,t,n,a);const u=(0,i.c)();let c=(null==(s=u.mindmap)?void 0:s.padding)??i.B.mindmap.padding;switch(a){case dh.ROUNDED_RECT:case dh.RECT:case dh.HEXAGON:c*=2}const h={id:ch++,nodeId:(0,i.d)(t,u),level:e,descr:(0,i.d)(n,u),type:a,children:[],width:(null==(l=u.mindmap)?void 0:l.maxNodeWidth)??i.B.mindmap.maxNodeWidth,padding:c},d=function(e){for(let t=uh.length-1;t>=0;t--)if(uh[t].level<e)return uh[t];return null}(e);if(d)d.children.push(h),uh.push(h);else{if(0!==uh.length)throw new Error('There can be only one root. No parent could be found for ("'+h.descr+'")');uh.push(h)}},getMindmap:()=>uh.length>0?uh[0]:null,nodeType:dh,getType:(e,t)=>{switch(i.l.debug("In get type",e,t),e){case"[":return dh.RECT;case"(":return")"===t?dh.ROUNDED_RECT:dh.CLOUD;case"((":return dh.CIRCLE;case")":return dh.CLOUD;case"))":return dh.BANG;case"{{":return dh.HEXAGON;default:return dh.DEFAULT}},setElementForId:(e,t)=>{hh[e]=t},decorateNode:e=>{if(!e)return;const t=(0,i.c)(),n=uh[uh.length-1];e.icon&&(n.icon=(0,i.d)(e.icon,t)),e.class&&(n.class=(0,i.d)(e.class,t))},type2Str:e=>{switch(e){case dh.DEFAULT:return"no-border";case dh.RECT:return"rect";case dh.ROUNDED_RECT:return"rounded-rect";case dh.CIRCLE:return"circle";case dh.CLOUD:return"cloud";case dh.BANG:return"bang";case dh.HEXAGON:return"hexgon";default:return"no-border"}},getLogger:()=>i.l,getElementById:e=>hh[e]},gh=ph;function drawNodes(e,t,n,a,s){!function(e,t,n,a,s){const l=s.htmlLabels,u=a%11,c=t.append("g");n.section=u;let h="section-"+u;u<0&&(h+=" section-root"),c.attr("class",(n.class?n.class+" ":"")+"mindmap-node "+h);const d=c.append("g"),p=c.append("g"),g=n.descr.replace(/(<br\/*>)/g,"\n");(0,rh.a)(p,g,{useHtmlLabels:l,width:n.width,classes:"mindmap-node-label"}),l||p.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const v=p.node().getBBox(),[y]=(0,i.D)(s.fontSize);if(n.height=v.height+1.1*y*.5+n.padding,n.width=v.width+2*n.padding,n.icon)if(n.type===e.nodeType.CIRCLE)n.height+=50,n.width+=50,c.append("foreignObject").attr("height","50px").attr("width",n.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+u+" "+n.icon),p.attr("transform","translate("+n.width/2+", "+(n.height/2-1.5*n.padding)+")");else{n.width+=50;const e=n.height;n.height=Math.max(e,60);const t=Math.abs(n.height-e);c.append("foreignObject").attr("width","60px").attr("height",n.height).attr("style","text-align: center;margin-top:"+t/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+u+" "+n.icon),p.attr("transform","translate("+(25+n.width/2)+", "+(t/2+n.padding/2)+")")}else if(l){const e=(n.width-v.width)/2,t=(n.height-v.height)/2;p.attr("transform","translate("+e+", "+t+")")}else{const e=n.width/2,t=n.padding/2;p.attr("transform","translate("+e+", "+t+")")}switch(n.type){case e.nodeType.DEFAULT:!function(e,t,n,i){t.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("d",`M0 ${n.height-5} v${10-n.height} q0,-5 5,-5 h${n.width-10} q5,0 5,5 v${n.height-5} H0 Z`),t.append("line").attr("class","node-line-"+i).attr("x1",0).attr("y1",n.height).attr("x2",n.width).attr("y2",n.height)}(e,d,n,u);break;case e.nodeType.ROUNDED_RECT:!function(e,t,n){t.append("rect").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("height",n.height).attr("rx",n.padding).attr("ry",n.padding).attr("width",n.width)}(e,d,n);break;case e.nodeType.RECT:!function(e,t,n){t.append("rect").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("height",n.height).attr("width",n.width)}(e,d,n);break;case e.nodeType.CIRCLE:d.attr("transform","translate("+n.width/2+", "+ +n.height/2+")"),function(e,t,n){t.append("circle").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("r",n.width/2)}(e,d,n);break;case e.nodeType.CLOUD:!function(e,t,n){const i=n.width,a=n.height,s=.15*i,l=.25*i,u=.35*i,c=.2*i;t.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("d",`M0 0 a${s},${s} 0 0,1 ${.25*i},${-1*i*.1}\n      a${u},${u} 1 0,1 ${.4*i},${-1*i*.1}\n      a${l},${l} 1 0,1 ${.35*i},${1*i*.2}\n\n      a${s},${s} 1 0,1 ${.15*i},${1*a*.35}\n      a${c},${c} 1 0,1 ${-1*i*.15},${1*a*.65}\n\n      a${l},${s} 1 0,1 ${-1*i*.25},${.15*i}\n      a${u},${u} 1 0,1 ${-1*i*.5},0\n      a${s},${s} 1 0,1 ${-1*i*.25},${-1*i*.15}\n\n      a${s},${s} 1 0,1 ${-1*i*.1},${-1*a*.35}\n      a${c},${c} 1 0,1 ${.1*i},${-1*a*.65}\n\n    H0 V0 Z`)}(e,d,n);break;case e.nodeType.BANG:!function(e,t,n){const i=n.width,a=n.height,s=.15*i;t.append("path").attr("id","node-"+n.id).attr("class","node-bkg node-"+e.type2Str(n.type)).attr("d",`M0 0 a${s},${s} 1 0,0 ${.25*i},${-1*a*.1}\n      a${s},${s} 1 0,0 ${.25*i},0\n      a${s},${s} 1 0,0 ${.25*i},0\n      a${s},${s} 1 0,0 ${.25*i},${1*a*.1}\n\n      a${s},${s} 1 0,0 ${.15*i},${1*a*.33}\n      a${.8*s},${.8*s} 1 0,0 0,${1*a*.34}\n      a${s},${s} 1 0,0 ${-1*i*.15},${1*a*.33}\n\n      a${s},${s} 1 0,0 ${-1*i*.25},${.15*a}\n      a${s},${s} 1 0,0 ${-1*i*.25},0\n      a${s},${s} 1 0,0 ${-1*i*.25},0\n      a${s},${s} 1 0,0 ${-1*i*.25},${-1*a*.15}\n\n      a${s},${s} 1 0,0 ${-1*i*.1},${-1*a*.33}\n      a${.8*s},${.8*s} 1 0,0 0,${-1*a*.34}\n      a${s},${s} 1 0,0 ${.1*i},${-1*a*.33}\n\n    H0 V0 Z`)}(e,d,n);break;case e.nodeType.HEXAGON:!function(e,t,n){const i=n.height,a=i/4,s=n.width-n.padding+2*a;!function insertPolygonShape(e,t,n,i,a){e.insert("polygon",":first-child").attr("points",i.map(function(e){return e.x+","+e.y}).join(" ")).attr("transform","translate("+(a.width-t)/2+", "+n+")")}(t,s,i,[{x:a,y:0},{x:s-a,y:0},{x:s,y:-i/2},{x:s-a,y:-i},{x:a,y:-i},{x:0,y:-i/2}],n)}(0,d,n)}e.setElementForId(n.id,c),n.height}(e,t,n,a,s),n.children&&n.children.forEach((n,i)=>{drawNodes(e,t,n,a<0?i:a,s)})}function addNodes(e,t,n,i){t.add({group:"nodes",data:{id:e.id.toString(),labelText:e.descr,height:e.height,width:e.width,level:i,nodeId:e.id,padding:e.padding,type:e.type},position:{x:e.x,y:e.y}}),e.children&&e.children.forEach(a=>{addNodes(a,t,n,i+1),t.add({group:"edges",data:{id:`${e.id}_${a.id}`,source:e.id,target:a.id,depth:i,section:a.section}})})}function layoutMindmap(e,t){return new Promise(n=>{const a=(0,nh.Ltv)("body").append("div").attr("id","cy").attr("style","display:none"),s=eh({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});a.remove(),addNodes(e,s,t,0),s.nodes().forEach(function(e){e.layoutDimensions=()=>{const t=e.data();return{w:t.width,h:t.height}}}),s.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),s.ready(e=>{i.l.info("Ready",e),n(s)})})}eh.use(th);const fh={draw:async(e,t,n,a)=>{var s,l;i.l.debug("Rendering mindmap diagram\n"+e);const u=a.db,c=u.getMindmap();if(!c)return;const h=(0,i.c)();h.htmlLabels=!1;const d=(0,i.A)(t),p=d.append("g");p.attr("class","mindmap-edges");const g=d.append("g");g.attr("class","mindmap-nodes"),drawNodes(u,g,c,-1,h);const v=await layoutMindmap(c,h);!function drawEdges(e,t){t.edges().map((t,n)=>{const a=t.data();if(t[0]._private.bodyBounds){const s=t[0]._private.rscratch;i.l.trace("Edge: ",n,a),e.insert("path").attr("d",`M ${s.startX},${s.startY} L ${s.midX},${s.midY} L${s.endX},${s.endY} `).attr("class","edge section-edge-"+a.section+" edge-depth-"+a.depth)}})}(p,v),function positionNodes(e,t){t.nodes().map((t,n)=>{const a=t.data();a.x=t.position().x,a.y=t.position().y,function(e,t){const n=e.getElementById(t.id),i=t.x||0,a=t.y||0;n.attr("transform","translate("+i+","+a+")")}(e,a);const s=e.getElementById(a.nodeId);i.l.info("Id:",n,"Position: (",t.position().x,", ",t.position().y,")",a),s.attr("transform",`translate(${t.position().x-a.width/2}, ${t.position().y-a.height/2})`),s.attr("attr",`apa-${n})`)})}(u,v),(0,i.o)(void 0,d,(null==(s=h.mindmap)?void 0:s.padding)??i.B.mindmap.padding,(null==(l=h.mindmap)?void 0:l.useMaxWidth)??i.B.mindmap.useMaxWidth)}},styles=e=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${(e=>{let t="";for(let t=0;t<e.THEME_COLOR_LIMIT;t++)e["lineColor"+t]=e["lineColor"+t]||e["cScaleInv"+t],(0,ih.A)(e["lineColor"+t])?e["lineColor"+t]=(0,ah.A)(e["lineColor"+t],20):e["lineColor"+t]=(0,oh.A)(e["lineColor"+t],20);for(let n=0;n<e.THEME_COLOR_LIMIT;n++){const i=""+(17-3*n);t+=`\n    .section-${n-1} rect, .section-${n-1} path, .section-${n-1} circle, .section-${n-1} polygon, .section-${n-1} path  {\n      fill: ${e["cScale"+n]};\n    }\n    .section-${n-1} text {\n     fill: ${e["cScaleLabel"+n]};\n    }\n    .node-icon-${n-1} {\n      font-size: 40px;\n      color: ${e["cScaleLabel"+n]};\n    }\n    .section-edge-${n-1}{\n      stroke: ${e["cScale"+n]};\n    }\n    .edge-depth-${n-1}{\n      stroke-width: ${i};\n    }\n    .section-${n-1} line {\n      stroke: ${e["cScaleInv"+n]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `}return t})(e)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${e.git0};\n  }\n  .section-root text {\n    fill: ${e.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .mindmap-node-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n`,vh={db:gh,renderer:fh,parser:lh,styles}}}]);